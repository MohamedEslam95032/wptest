const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./assets/table-view-Cp9BNIv-.js","./assets/_plugin-vue_export-helper-y4Xv5kKr.js","./assets/vue-router-mJSwnJkd.js","./assets/styles/vue-router.css","./assets/index-DghDHKPv.js","./assets/styles/index3.css","./assets/styles/table-view.css","./assets/query-editor-DkngT3ee.js","./assets/styles/query-editor.css"])))=>i.map(i=>d[i]);
import{_ as Q}from"./assets/preload-helper-Dp1pzeXC.js";import{r as c,o as I,y as J,u as W,Q as U,b as u,d as o,e as y,f as n,g as h,h as L,i as E,j as e,n as f,l as D,S as K,F as N,G as X,c as Y,a as Z,t as i,_ as x,D as q,I as A,J as ee,k as $,$ as te,m as F,W as se,E as ae,s as ne,v as oe,x as ie,P as re}from"./assets/_plugin-vue_export-helper-y4Xv5kKr.js";import{a as le,u as ce,D as de,c as ue,b as pe}from"./assets/vue-router-mJSwnJkd.js";import{_ as xe,L as me}from"./assets/index-C_FNz6s0.js";function _e(){const S=c(!1);let p=null;const m=()=>{S.value=document.body.classList.contains("dark")};return I(()=>{m(),p=new MutationObserver(v=>{v.forEach(d=>{d.type==="attributes"&&d.attributeName==="class"&&m()})}),p.observe(document.body,{attributes:!0,attributeFilter:["class"]})}),J(()=>{p&&p.disconnect()}),{isDark:S}}const ve={class:"translate-x-0"},be={__name:"index",setup(S){W();const{isDark:p}=_e(),m=c(new CSSStyleSheet),v=()=>{const d=document.querySelector("#uixpress-database-css");if(!d||!d.sheet){setTimeout(v,100);return}const l=d.sheet;for(const _ of[...l.cssRules].reverse())m.value.insertRule(_.cssText)};return v(),(d,l)=>{const _=U("RouterView");return o(),u(N,null,[(o(),y(E("style"),null,{default:h(()=>[...l[0]||(l[0]=[L(" html{font-size:14px;}#wpcontent{padding:0}",-1)])]),_:1})),n(D(K),{tag:"div","adopted-style-sheets":[m.value],class:"uipx-normalize"},{default:h(()=>[(o(),y(E("style"),null,{default:h(()=>[...l[1]||(l[1]=[L(" :root{font-size:14px}#wpcontent{padding:0}",-1)])]),_:1})),e("div",{class:f(["overflow-hidden uipx-normalize font-sans h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]",D(p)?"dark":""])},[n(xe),e("div",ve,[n(D(me),{height:3})]),n(_)],2)]),_:1},8,["adopted-style-sheets"])],64)}}},fe={class:"flex h-full text-zinc-900 dark:text-zinc-100 font-sans max-h-full overflow-hidden gap-6 max-md:gap-0 uipx-normalize"},he={class:"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden"},ze={class:"px-6 pt-6 pb-4"},we={class:"flex items-center justify-between mb-4"},ke={class:"text-xl font-medium text-zinc-900 dark:text-zinc-100"},ge={class:"relative"},ye=["placeholder"],Se={class:"px-6 py-3"},Ve={class:"flex items-center gap-2"},Ce=["title"],De={key:0,class:"mt-3 pt-3 space-y-3"},Le={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 transition-colors"},Ee={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5"},Te={class:"grid grid-cols-2 gap-1.5"},Re=["onClick"],$e={class:"flex flex-row place-content-between items-center px-6 pr-4"},Ne={class:"py-2 text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500"},We={class:"flex-1 overflow-auto px-6 pb-6 custom-scrollbar"},je={key:0,class:"p-8 text-center"},Pe={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},Be={class:"text-sm text-zinc-500 dark:text-zinc-400"},Me={key:1,class:"p-8 text-center"},Oe={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},Qe={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-2"},qe={key:2,class:"space-y-1.5"},Ae=["onClick"],Fe={class:"flex items-start justify-between"},Ie={class:"flex-1 min-w-0"},Ue={class:"flex items-center gap-2 mb-1.5"},Ge={key:0},He={class:"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto"},Je={key:0,class:"flex-1 flex items-center justify-center"},Ke={class:"text-center"},Xe={class:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4"},Ye={class:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2"},Ze={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-4"},et={__name:"layout",setup(S){W();const p=le(),m=ce(),v=c(!1),d=c([]),l=c(""),_=c(null),V=c(!1),z=c(typeof window<"u"?window.innerWidth:0),R=c("name"),w=c("asc"),k=c(!1),g=c(!1),j=async()=>{v.value=!0;try{const a=await ae({endpoint:"uixpress/v1/database/tables"});a&&a.data&&(d.value=a.data)}catch(s){console.error("Error fetching tables:",s)}finally{v.value=!1}},C=Y(()=>{let s=[...d.value];if(g.value&&(s=s.filter(a=>!a.is_wp_table)),l.value){const a=l.value.toLowerCase();s=s.filter(b=>b.name.toLowerCase().includes(a))}return s.sort((a,b)=>{let t,r;switch(R.value){case"rows":t=a.row_count||0,r=b.row_count||0;break;case"size":t=a.size_mb||0,r=b.size_mb||0;break;case"type":t=a.is_wp_table?0:1,r=b.is_wp_table?0:1;break;case"name":default:t=a.name.toLowerCase(),r=b.name.toLowerCase();break}return w.value==="asc"?t>r?1:-1:t<r?1:-1}),s}),G=s=>{_.value=s,p.push(`/table/${s.name}`),z.value<=1024&&(V.value=!0)},P=()=>{p.push("/query")},H=()=>{z.value=window.innerWidth};return I(()=>{j(),z.value=window.innerWidth,window.addEventListener("resize",H)}),Z(()=>m.path,()=>{z.value<=1024&&m.path==="/"&&(V.value=!1),m.path==="/"&&j()}),(s,a)=>{const b=U("RouterView");return o(),u("div",fe,[e("div",he,[e("div",ze,[e("div",we,[e("h1",ke,i(s.__("Database Explorer","uixpress")),1),n(q,{type:"primary",onClick:P,class:"text-sm"},{default:h(()=>[n(x,{icon:"code",class:"text-base"})]),_:1})]),e("div",ge,[n(x,{icon:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 dark:text-zinc-500 text-base pointer-events-none"}),A(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.value=t),type:"text",placeholder:s.__("Search tables...","uixpress"),class:"w-full bg-zinc-50 dark:bg-zinc-900 border-0 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100 transition-shadow"},null,8,ye),[[ee,l.value]])])]),e("div",Se,[e("div",Ve,[e("button",{onClick:a[1]||(a[1]=t=>w.value=w.value==="asc"?"desc":"asc"),class:"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",title:w.value==="asc"?s.__("Ascending","uixpress"):s.__("Descending","uixpress")},[n(x,{icon:w.value==="asc"?"arrow_upward":"arrow_downward",class:"text-sm text-zinc-600 dark:text-zinc-400"},null,8,["icon"])],8,Ce),e("button",{onClick:a[2]||(a[2]=t=>k.value=!k.value),class:f(["relative p-2 rounded-md transition-colors",k.value?"bg-zinc-900 dark:bg-zinc-100":"bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},[n(x,{icon:"tune",class:f(["text-sm",k.value?"text-white dark:text-zinc-900":"text-zinc-600 dark:text-zinc-400"])},null,8,["class"])],2)]),n(se,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:h(()=>[k.value?(o(),u("div",De,[e("div",null,[e("label",{class:"flex items-center gap-2 cursor-pointer group",onClick:a[4]||(a[4]=t=>g.value=!g.value)},[A(e("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>g.value=t),class:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100"},null,512),[[te,g.value]]),e("span",Le,i(s.__("Show non-WordPress tables only","uixpress")),1)])]),e("div",null,[e("label",Ee,i(s.__("Sort By","uixpress")),1),e("div",Te,[(o(),u(N,null,F([{value:"name",label:"Name",icon:"sort_by_alpha"},{value:"rows",label:"Rows",icon:"table"},{value:"size",label:"Size",icon:"data_usage"},{value:"type",label:"Type",icon:"category"}],t=>e("button",{key:t.value,onClick:r=>R.value=t.value,class:f(["flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-md transition-colors",R.value===t.value?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},[n(x,{icon:t.icon,class:"text-sm"},null,8,["icon"]),L(" "+i(s.__(t.label,"uixpress")),1)],10,Re)),64))])])])):$("",!0)]),_:1})]),e("div",$e,[e("div",Ne,i(C.value.length)+" "+i(C.value.length===1?s.__("table","uixpress"):s.__("tables","uixpress")),1)]),e("div",We,[v.value&&!d.value.length?(o(),u("div",je,[e("div",Pe,[n(x,{icon:"database",class:"text-zinc-400 text-xl animate-pulse"})]),e("p",Be,i(s.__("Loading tables...","uixpress")),1)])):C.value.length===0?(o(),u("div",Me,[e("div",Oe,[n(x,{icon:"database",class:"text-zinc-400 text-xl"})]),e("p",Qe,i(l.value?s.__("No tables found","uixpress"):s.__("No tables available","uixpress")),1)])):(o(),u("div",qe,[(o(!0),u(N,null,F(C.value,t=>{var r,B,M,O;return o(),u("div",{key:t.name,onClick:it=>G(t),class:f(["p-3 rounded-xl cursor-pointer transition-all group -mx-3",((r=_.value)==null?void 0:r.name)===t.name?"bg-zinc-200 dark:bg-zinc-800":"hover:bg-zinc-100 dark:hover:bg-zinc-800"])},[e("div",Fe,[e("div",Ie,[e("div",Ue,[e("span",{class:f(["text-sm font-medium truncate",((B=_.value)==null?void 0:B.name)===t.name?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"])},i(t.name),3)]),e("div",{class:f(["flex items-center gap-3 text-xs",(((M=_.value)==null?void 0:M.name)===t.name,"text-zinc-500 dark:text-zinc-400")])},[e("span",null,i(t.row_count.toLocaleString())+" "+i(s.__("rows","uixpress")),1),t.size_mb>0?(o(),u("span",Ge,i(t.size_mb.toFixed(2))+" MB ",1)):$("",!0)],2)]),n(x,{icon:"chevron_right",class:f(["text-base flex-shrink-0 transition-opacity",((O=_.value)==null?void 0:O.name)===t.name?"text-zinc-900 dark:text-white opacity-100":"text-zinc-400 opacity-0 group-hover:opacity-100"])},null,8,["class"])])],10,Ae)}),128))]))])]),e("div",He,[n(b,{key:"database-content"},{default:h(({Component:t})=>[t?t&&z.value>1024?(o(),y(E(t),{key:1})):t&&z.value<=1024?(o(),y(de,{key:2,modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=r=>V.value=r),size:"full","show-header":!1,"show-close-button":!1,"close-on-overlay-click":!0,"close-on-escape":!0,onClose:a[6]||(a[6]=r=>D(p).push("/"))},{default:h(()=>[(o(),y(E(t)))]),_:2},1032,["modelValue"])):$("",!0):(o(),u("div",Je,[e("div",Ke,[e("div",Xe,[n(x,{icon:"database",class:"text-2xl text-zinc-400"})]),e("h3",Ye,i(s.__("Table Details","uixpress")),1),e("p",Ze,i(s.__("Select a table from the list to view its structure and data.","uixpress")),1),n(q,{onClick:P,type:"primary",class:"text-sm"},{default:h(()=>[n(x,{icon:"code",class:"text-base mr-2"}),L(" "+i(s.__("Open SQL Editor","uixpress")),1)]),_:1})])]))]),_:1})])])}}},tt=X(et,[["__scopeId","data-v-5feb5d76"]]),T=ne(be),st=oe();T.use(st);const at=W();ie(at);re(T);const nt=[{path:"/",component:tt,name:"database-explorer",meta:{name:(0,window.wp.i18n.__)("Database Explorer","uixpress")},children:[{path:"/table/:tableName",component:()=>Q(()=>import("./assets/table-view-Cp9BNIv-.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),name:"table-view",meta:{name:(0,window.wp.i18n.__)("Table View","uixpress")}},{path:"/query",component:()=>Q(()=>import("./assets/query-editor-DkngT3ee.js"),__vite__mapDeps([7,1,2,3,8]),import.meta.url),name:"query-editor",meta:{name:(0,window.wp.i18n.__)("SQL Query Editor","uixpress")}}]}],ot=ue({history:pe(),routes:nt});T.use(ot);T.mount("#uix-database-page");
//# sourceMappingURL=database.build.CMkNIFH4.js.map
