{"version":3,"file":"app.build.RBHhcgGT.js","sources":["../src/composables/useAdoptedStyleSheets.js","../src/components/app/wrapper/menu-wrapper.vue","../src/apps/js/uixpress.js"],"sourcesContent":["import { inject, ref } from 'vue';\n\n/**\n * Injection key for adoptedStyleSheets\n * @type {symbol}\n */\nexport const ADOPTED_STYLE_SHEETS_KEY = Symbol('adoptedStyleSheets');\n\n/**\n * Composable to access the globally provided adoptedStyleSheets\n * @returns {import('vue').Ref<CSSStyleSheet>} The adoptedStyleSheets ref\n * @throws {Error} If adoptedStyleSheets is not provided in the component tree\n * @example\n * const adoptedStyleSheets = useAdoptedStyleSheets();\n * adoptedStyleSheets.value.insertRule('.my-class { color: red; }');\n */\nexport const useAdoptedStyleSheets = () => {\n  const adoptedStyleSheets = inject(ADOPTED_STYLE_SHEETS_KEY);\n\n  if (!adoptedStyleSheets) {\n    throw new Error(\n      'useAdoptedStyleSheets() must be used within a component that provides adoptedStyleSheets. ' +\n        'Make sure menu-wrapper.vue is in the component tree.'\n    );\n  }\n\n  return adoptedStyleSheets;\n};\n","<script setup>\nimport {\n  ref,\n  onMounted,\n  computed,\n  watchEffect,\n  nextTick,\n  watch,\n  provide,\n} from 'vue';\nimport { ShadowRoot } from 'vue-shadow-dom';\n\n// Import comps\nimport Notifications from '@/components/utility/notifications/index.vue';\nimport LoadingIndicator from '@/components/utility/loading-indicator/index.ts';\nimport AdminMenu from '@/components/app/menu/index.vue';\nimport ToolBar from '@/components/app/toolbar/index.vue';\n\n// Funcs\nimport { hexToRgb } from '@/assets/js/functions/hexToRgb.js';\nimport { isObject } from '@/assets/js/functions/isObject.js';\nimport {\n  setupColorScheme,\n  useColorScheme,\n} from '@/assets/js/functions/useColorScheme.js';\nimport { ADOPTED_STYLE_SHEETS_KEY } from '@/composables/useAdoptedStyleSheets.js';\nsetupColorScheme();\nconst { prefersDark } = useColorScheme();\n\n// Refs\nconst adoptedStyleSheets = ref(new CSSStyleSheet());\n\n// Provide adoptedStyleSheets globally for child components\nprovide(ADOPTED_STYLE_SHEETS_KEY, adoptedStyleSheets);\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n/**\n * Injects styles into shadow root\n */\nconst setStyles = () => {\n  let appStyleNode = document.querySelector('#uixpress-css');\n  if (!appStyleNode) {\n    appStyleNode = manuallyAddStyleSheet();\n    // Wait for stylesheet to load\n    appStyleNode.onload = () => {\n      const appStyles = appStyleNode.sheet;\n      for (const rule of [...appStyles.cssRules].reverse()) {\n        adoptedStyleSheets.value.insertRule(rule.cssText);\n      }\n      setCustomProperties();\n    };\n  } else {\n    const appStyles = appStyleNode.sheet;\n    for (const rule of [...appStyles.cssRules].reverse()) {\n      adoptedStyleSheets.value.insertRule(rule.cssText);\n    }\n    setCustomProperties();\n  }\n\n  //appStyleNode.remove();\n};\n\nconst manuallyAddStyleSheet = () => {\n  var link = document.createElement('link');\n  link.rel = 'stylesheet';\n  link.href = `${appStore.state.pluginBase}app/dist/assets/styles/app.css`;\n  document.head.appendChild(link);\n\n  return link;\n};\n\nconst returnCustomCSS = computed(() => {\n  return appStore.state.uixpress_settings?.custom_css || '';\n});\n\nconst returnLayout = computed(() => {\n  return appStore.state.uixpress_settings?.layout;\n});\n\n/**\n * Get current page identifier for magic dark mode\n * @returns {string} Page identifier (URL path or page parameter)\n */\nconst getCurrentPageIdentifier = () => {\n  const url = new URL(window.location.href);\n  const urlParams = new URLSearchParams(url.search);\n\n  // If there's a 'page' parameter, use that (for plugin settings pages)\n  if (urlParams.has('page')) {\n    return urlParams.get('page');\n  }\n\n  // Otherwise use the pathname\n  const pathname = url.pathname;\n  const adminPath =\n    appStore.state.adminUrl?.replace(window.location.origin, '') ||\n    '/wp-admin/';\n\n  // Extract the page filename from the path\n  if (pathname.includes(adminPath)) {\n    const relativePath = pathname.replace(adminPath, '');\n    return relativePath || 'index.php';\n  }\n\n  // Fallback to full pathname\n  return pathname;\n};\n\n/**\n * Check if current page is in the magic dark mode pages array\n * @returns {boolean} True if page should have magic dark mode\n */\nconst isCurrentPageInMagicDarkModeList = () => {\n  const magicDarkModePages =\n    appStore.state.uixpress_settings?.magic_dark_mode_pages || [];\n  const currentPage = getCurrentPageIdentifier();\n  return magicDarkModePages.includes(currentPage);\n};\n\n/**\n * Computed property to determine if magic dark mode should be enabled\n */\nconst shouldUseMagicDarkMode = computed(() => {\n  // Only enable if dark mode is active and current page is in the magic dark mode pages list\n  return prefersDark.value && isCurrentPageInMagicDarkModeList();\n});\n\nconst setCustomProperties = () => {\n  // Base colors\n  if (Array.isArray(appStore.state.uixpress_settings.base_theme_scale)) {\n    const baseCssValues = appStore.state.uixpress_settings.base_theme_scale;\n    for (let color of baseCssValues) {\n      const hexArray = hexToRgb(color.color);\n      const variableName = `--uix-base-${color.step}`;\n      document.documentElement.style.setProperty(\n        variableName,\n        hexArray.join(' ')\n      );\n    }\n  }\n\n  // Accent colors\n  if (Array.isArray(appStore.state.uixpress_settings.accent_theme_scale)) {\n    const baseCssValues = appStore.state.uixpress_settings.accent_theme_scale;\n\n    for (let color of baseCssValues) {\n      const hexArray = hexToRgb(color.color);\n      const variableName = `--uix-accent-${color.step}`;\n      document.documentElement.style.setProperty(\n        variableName,\n        hexArray.join(' ')\n      );\n    }\n  }\n};\n\nconst mountViewTransitions = async () => {\n  // No view transition support\n  if (!document.startViewTransition) return;\n\n  let isNavigating = false;\n\n  window.navigation.addEventListener('navigate', (event) => {\n    const toUrl = new URL(event.destination.url);\n\n    // Only handle navigate events for same-origin navigation\n    if (location.origin !== toUrl.origin) return;\n\n    // Don't intercept if it's a reload or if we're already navigating\n    if (\n      event.navigationType === 'reload' ||\n      event.navigationType === 'replace' ||\n      isNavigating\n    )\n      return;\n\n    // Don't load on hash changes\n    if (toUrl) {\n      if (toUrl.hash) return;\n    }\n\n    appStore.updateState('loading', true);\n\n    setTimeout(() => {\n      appStore.updateState('loading', false);\n    }, 5000);\n  });\n};\n\nwatchEffect(() => {\n  if (prefersDark.value) {\n    document.body.classList.add('dark');\n  } else {\n    document.body.classList.remove('dark');\n  }\n});\n\ndocument.body.classList.add('uipc-body');\n\nsetStyles();\nonMounted(mountViewTransitions);\n\nwindow.addEventListener('pagehide', (event) => {\n  appStore.updateState('loading', false);\n});\n\n// Watch for changes to the settings options and update accordingly\ndocument.addEventListener('uipx-settings-update', (event) => {\n  // Bail if not an object\n  if (!isObject(event.detail)) return;\n  // Update settings using updateState to ensure reactivity\n  appStore.updateState('uixpress_settings', {\n    ...appStore.state.uixpress_settings,\n    ...event.detail,\n  });\n});\n\n// Computed classes for admin menu\nconst menuContainerClasses = computed(() => {\n  const baseClasses = 'shrink-0 uipx-normalize';\n\n  switch (returnLayout.value) {\n    case 'rounded  ':\n      return `${baseClasses} bg-white dark:bg-zinc-900`;\n    case 'bubble  ':\n      return `${baseClasses} p-6 bg-zinc-100/50 dark:bg-zinc-900 max-h-[100dvh]`;\n    default:\n      return baseClasses;\n  }\n});\n\nconst menuClasses = computed(() => {\n  const baseClasses = 'uipx-normalize box-border font-sans';\n  const darkClass = prefersDark.value ? 'dark' : '';\n\n  switch (returnLayout.value) {\n    case 'rounded':\n      return `${baseClasses} ${darkClass} max-h-screen h-screen`;\n    case 'bubble':\n      return `${baseClasses} ${darkClass} border border-zinc-100 dark:border-zinc-700/30 bg-white dark:bg-zinc-800/40 rounded-2xl shadow-lg z-[3] top-4 left-4 bottom-4 fixed overflow-hidden `;\n    default:\n      return `${baseClasses} ${darkClass} border-r border-zinc-200 dark:border-zinc-700/30 bg-white dark:bg-zinc-900 max-h-screen h-screen`;\n  }\n});\n\nwatch(\n  () => prefersDark.value,\n  (newVal) => {\n    if (newVal) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  },\n  { immediate: true }\n);\n\nwatch(\n  () => returnLayout.value,\n  (newVal) => {\n    if (newVal === 'rounded') {\n      document.documentElement.classList.add('uixp-rounded');\n    } else {\n      document.documentElement.classList.remove('uixp-rounded');\n    }\n  },\n  { immediate: true }\n);\n\n/**\n * Apply or remove magic dark mode class on #wpbody-content\n */\nconst applyMagicDarkModeClass = () => {\n  nextTick(() => {\n    const wpbodyContent = document.getElementById('wpbody-content');\n    const wpcontent = document.getElementById('wpcontent');\n\n    let wrapper = wpbodyContent || wpcontent;\n\n    if (wrapper) {\n      if (shouldUseMagicDarkMode.value) {\n        wrapper.classList.add('dark-mode-magic');\n      } else {\n        wrapper.classList.remove('dark-mode-magic');\n      }\n    }\n  });\n};\n\n/**\n * Watch for changes to magic dark mode setting and apply/remove class on #wpbody-content\n */\nwatch(\n  shouldUseMagicDarkMode,\n  (enabled) => {\n    applyMagicDarkModeClass();\n  },\n  { immediate: true }\n);\n\n/**\n * Watch for URL changes (navigation) and reapply magic dark mode\n */\nwatch(\n  () => window.location.href,\n  () => {\n    applyMagicDarkModeClass();\n  }\n);\n\n/**\n * Watch for settings changes to ensure reactivity\n */\nwatch(\n  () => appStore.state.uixpress_settings?.magic_dark_mode_pages,\n  () => {\n    applyMagicDarkModeClass();\n  },\n  { deep: true }\n);\n\n// Also apply on mount after a short delay to ensure DOM is ready\nonMounted(() => {\n  setTimeout(() => {\n    applyMagicDarkModeClass();\n  }, 100);\n});\n</script>\n\n<template>\n  <div\n    class=\"bg-white dark:bg-zinc-900 fixed top-0 left-0 z-[2] h-screen text-zinc-700 dark:text-zinc-300\"\n  >\n    <component is=\"style\">\n      :root{font-size:14px}table.fixed {position:\n      static}#wpcontent{margin-left:var(--uixp-menu-width)}#adminmenu,\n      #adminmenuback, #wpadminbar{z-index:-1;display:none\n      !important}#adminmenuwrap{z-index:2; display:block !important}\n      html.wp-toolbar { padding-top: var(--uixp-toolbar-height) !important }\n      body.is-fullscreen-mode .block-editor__container{ z-index: 3 !important; }\n    </component>\n    <component is=\"style\" v-html=\"returnCustomCSS\"></component>\n\n    <!-- Menu with combined classes -->\n    <ShadowRoot\n      tag=\"div\"\n      :adopted-style-sheets=\"[adoptedStyleSheets]\"\n      :class=\"menuContainerClasses\"\n    >\n      <component is=\"style\"> {{ returnCustomCSS }}</component>\n\n      <div class=\"uipx-normalize fixed top-0 left-0 right-0 z-[999999]\">\n        <LoadingIndicator :height=\"3\" class=\"z-[999999]\" />\n      </div>\n      <div :class=\"menuClasses\" class=\"hidden md:flex\">\n        <AdminMenu id=\"uixp-menu\" class=\"\" />\n      </div>\n\n      <div\n        class=\"fixed right-0 top-0 md:left-[var(--uixp-menu-width)] left-0 z-[2] bg-white dark:bg-zinc-900 uipx-normalize border-zinc-200 dark:border-zinc-700/30\"\n        :class=\"[\n          prefersDark ? 'dark' : '',\n          returnLayout === 'bubble' || returnLayout === 'rounded'\n            ? ''\n            : 'border-b',\n        ]\"\n      >\n        <ToolBar id=\"uixp-toolbar\" />\n      </div>\n\n      <template\n        v-if=\"\n          Array.isArray(appStore.state.uixpress_settings.external_stylesheets)\n        \"\n        v-for=\"(style, index) in appStore.state.uixpress_settings\n          .external_stylesheets\"\n      >\n        <link\n          rel=\"stylesheet\"\n          :id=\"`uix-external-${index}-css`\"\n          :href=\"style\"\n          media=\"all\"\n        />\n      </template>\n\n      <Notifications />\n    </ShadowRoot>\n  </div>\n</template>\n\n<style>\n.uipx-normalize * {\n  box-sizing: border-box;\n}\n\nbody,\nhtml {\n  @apply text-zinc-700 dark:text-zinc-300 bg-zinc-50 dark:bg-zinc-950;\n}\n\n#wpfooter {\n  display: none !important;\n}\n\n.uixp-rounded #wpwrap {\n  @apply bg-zinc-50 dark:bg-zinc-950;\n}\n\n@media (min-width: 768px) {\n  .uipc-body #wpcontent {\n    @apply rounded-3xl;\n    position: absolute;\n    /* bottom: 3000px; */\n    top: 1px;\n    right: 1rem;\n    margin: 0 !important;\n    left: calc(var(--uixp-menu-width));\n    overflow: scroll;\n    max-height: calc(100vh - var(--uixp-toolbar-height) - 1rem);\n  }\n  body.uipc-body:not(.uixpress-custom-page) #wpcontent {\n    @apply border border-solid border-zinc-200/50 dark:border-zinc-700/30 bg-white dark:bg-zinc-800/20;\n  }\n}\n\nbody.is-fullscreen-mode.block-editor-page #uixpress-app-wrapper {\n  opacity: 0;\n  pointer-events: none;\n}\n</style>\n","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport '@/apps/css/index.css';\n\n// Import store\nimport { useAppStore } from '@/store/app/app.js';\nimport {\n  setGlobalProperties,\n  setVueGlobalProperties,\n} from '@/setup/setGlobalProperties.js';\n\n// Import comps\nimport AppWrapperMenu from '@/components/app/wrapper/menu-wrapper.vue';\n\n// Build app\nconst app = createApp(AppWrapperMenu);\n\n// Use pinia\nconst pinia = createPinia();\napp.use(pinia);\n\n// Update app store\nconst appStore = useAppStore();\nsetGlobalProperties(appStore);\n\n// Initialize an empty Map for replacements\nlet replacementMap = new Map();\n\n// Safely create the replacement map if the data is available and valid\nif (\n  appStore &&\n  appStore.state &&\n  appStore.state.uixpress_settings &&\n  Array.isArray(appStore.state.uixpress_settings.text_replacements)\n) {\n  replacementMap = new Map(\n    appStore.state.uixpress_settings.text_replacements\n      .filter(\n        (pair) =>\n          Array.isArray(pair) &&\n          pair.length === 2 &&\n          typeof pair[0] === 'string' &&\n          typeof pair[1] === 'string'\n      )\n      .map((pair) => [pair[0], pair[1]])\n  );\n}\n// Store the original __() function\nconst originalGettext = __;\n\nconst translatorFunction = (text, domain) => {\n  // First, apply our custom replacements\n  let replacedText = replacementMap.get(text) || text;\n  // Then, call the original __() function\n  return originalGettext(replacedText, domain);\n};\n\nwindow.__ = translatorFunction;\n\n// Declare translation functions\napp.config.globalProperties.__ = translatorFunction;\napp.config.globalProperties.sprintf = sprintf;\n// Note: We set __ manually here because we override it with translatorFunction\n// setVueGlobalProperties would use the original __, so we handle it manually\n\n// Move favicon to head\nconst faviconLink = document.getElementById('uipx-favicon');\n\n// Check if the element exists\nif (faviconLink) {\n  // Get the head element\n  const head = document.getElementsByTagName('head')[0];\n  // Move the favicon link to the head\n  head.appendChild(faviconLink);\n}\n\nconst mountPointMenu = document.querySelector('#adminmenumain');\n\nif (mountPointMenu) {\n  const newDiv = document.createElement('div');\n  newDiv.id = 'uixpress-app-wrapper';\n\n  //const wrap = document.querySelector('#wpwrap');\n  document.body.prepend(newDiv);\n  app.mount(newDiv);\n}\n\nconst temporaryStyles = document.querySelector('#uipc-temporary-body-hider');\nif (temporaryStyles) temporaryStyles.remove();\n"],"names":["ADOPTED_STYLE_SHEETS_KEY","setupColorScheme","prefersDark","useColorScheme","adoptedStyleSheets","ref","provide","appStore","useAppStore","setStyles","appStyleNode","manuallyAddStyleSheet","appStyles","rule","setCustomProperties","link","returnCustomCSS","computed","_a","returnLayout","getCurrentPageIdentifier","url","urlParams","pathname","adminPath","isCurrentPageInMagicDarkModeList","magicDarkModePages","currentPage","shouldUseMagicDarkMode","baseCssValues","color","hexArray","hexToRgb","variableName","mountViewTransitions","isNavigating","event","toUrl","watchEffect","onMounted","isObject","menuContainerClasses","baseClasses","menuClasses","darkClass","watch","newVal","applyMagicDarkModeClass","nextTick","wpbodyContent","wpcontent","wrapper","enabled","_openBlock","_createElementBlock","_hoisted_1","_createBlock","_resolveDynamicComponent","_cache","_createVNode","_unref","ShadowRoot","_createElementVNode","_hoisted_2","LoadingIndicator","_normalizeClass","AdminMenu","ToolBar","_Fragment","_renderList","style","index","Notifications","app","createApp","AppWrapperMenu","pinia","createPinia","setGlobalProperties","replacementMap","pair","originalGettext","translatorFunction","text","domain","replacedText","faviconLink","mountPointMenu","newDiv","temporaryStyles"],"mappings":"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"}