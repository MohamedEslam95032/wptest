{"version":3,"mappings":";ufAEO,SAASA,IAAc,CAC5B,MAAMC,EAASC,EAAI,EAAK,EAExB,IAAIC,EAAW,KAEf,MAAMC,EAAgB,IAAM,CAC1BH,EAAO,MAAQ,SAAS,KAAK,UAAU,SAAS,MAAM,CACxD,EAEA,OAAAI,EAAU,IAAM,CAEdD,EAAa,EAGbD,EAAW,IAAI,iBAAkBG,GAAc,CAC7CA,EAAU,QAASC,GAAa,CAE5BA,EAAS,OAAS,cAClBA,EAAS,gBAAkB,SAE3BH,EAAa,CAEjB,CAAC,CACH,CAAC,EAGDD,EAAS,QAAQ,SAAS,KAAM,CAC9B,WAAY,GACZ,gBAAiB,CAAC,OAAO,CAC/B,CAAK,CACH,CAAC,EAEDK,EAAY,IAAM,CACZL,GACFA,EAAS,WAAU,CAEvB,CAAC,EAEM,CAAE,OAAAF,CAAM,CACjB,8DCnCiBQ,EAAA,EAIjB,KAAM,CAAE,OAAAR,CAAA,EAAWD,GAAA,EAObU,EAAqBR,EAAI,IAAI,aAAe,EAK5CS,EAAY,IAAM,CACtB,MAAMC,EAAe,SAAS,cAAc,wBAAwB,EACpE,GAAI,CAACA,GAAgB,CAACA,EAAa,MAAO,CAExC,WAAWD,EAAW,GAAG,EACzB,MACF,CACA,MAAME,EAAYD,EAAa,MAC/B,UAAWE,IAAQ,CAAC,GAAGD,EAAU,QAAQ,EAAE,UACzCH,EAAmB,MAAM,WAAWI,EAAK,OAAO,CAEpD,EAEA,OAAAH,EAAA,4DAKEI,EAA6EC,EAAA,yBAAvD,IAA2C,IAAAC,EAAA,KAAAA,EAAA,MAA3C,8CAA2C,eACjEC,EAkBaC,EAAAC,CAAA,GAjBX,IAAI,MACH,wBAAuBV,EAAA,KAAkB,EAC1C,MAAM,6BAEN,IAEC,MAFDK,EAECC,EAAA,yBAFqB,IACsB,IAAAC,EAAA,KAAAA,EAAA,MADtB,8CACsB,eAE5CI,EASM,OARJ,MAAKC,EAAA,CAAC,uGACEH,EAAAlB,CAAA,EAAM,cAEdiB,EAAiBK,EAAA,EACjBF,EAEM,MAFNG,GAEM,CADJN,EAAgCC,EAAAM,EAAA,GAAb,OAAQ,EAAC,IAE9BP,EAAcQ,CAAA,iuECnDHjB,EAAA,EAUjB,MAAMkB,EAASC,GAAA,EACTC,EAAQC,GAAA,EAGRC,EAAU7B,EAAI,EAAK,EACnB8B,EAAS9B,EAAI,EAAE,EACf+B,EAAc/B,EAAI,EAAE,EACpBgC,EAAgBhC,EAAI,IAAI,EACxBiC,EAAajC,EAAI,EAAK,EACtBkC,EAAclC,EAAI,OAAO,OAAW,IAAc,OAAO,WAAa,CAAC,EACvEmC,EAASnC,EAAI,MAAM,EACnBoC,EAAYpC,EAAI,KAAK,EACrBqC,EAAkBrC,EAAI,EAAK,EAC3BsC,EAAgBtC,EAAI,EAAK,EAKzBuC,EAAc,SAAY,CAC9BV,EAAQ,MAAQ,GAChB,GAAI,CAIF,MAAMW,EAAO,MAAMC,GAHN,CACX,SAAU,8BAEoB,EAC5BD,GAAQA,EAAK,OACfV,EAAO,MAAQU,EAAK,KAExB,OAASE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,SACEb,EAAQ,MAAQ,EAClB,CACF,EAKMc,EAAiBC,EAAS,IAAM,CACpC,IAAIC,EAAW,CAAC,GAAGf,EAAO,KAAK,EAQ/B,GALIQ,EAAc,QAChBO,EAAWA,EAAS,OAAQC,GAAU,CAACA,EAAM,WAAW,GAItDf,EAAY,MAAO,CACrB,MAAMgB,EAAQhB,EAAY,MAAM,cAChCc,EAAWA,EAAS,OAAQC,GAC1BA,EAAM,KAAK,cAAc,SAASC,CAAK,EAE3C,CAGA,OAAAF,EAAS,KAAK,CAAC,EAAG,IAAM,CACtB,IAAIG,EAAQC,EAEZ,OAAQd,EAAO,OACb,IAAK,OACHa,EAAS,EAAE,WAAa,EACxBC,EAAS,EAAE,WAAa,EACxB,MACF,IAAK,OACHD,EAAS,EAAE,SAAW,EACtBC,EAAS,EAAE,SAAW,EACtB,MACF,IAAK,OAEHD,EAAS,EAAE,YAAc,EAAI,EAC7BC,EAAS,EAAE,YAAc,EAAI,EAC7B,MACF,IAAK,OACL,QACED,EAAS,EAAE,KAAK,cAChBC,EAAS,EAAE,KAAK,cAChB,MAGJ,OAAIb,EAAU,QAAU,MACfY,EAASC,EAAS,EAAI,GAEtBD,EAASC,EAAS,EAAI,EAEjC,CAAC,EAEMJ,CACT,CAAC,EAMKK,EAAeJ,GAAU,CAC7Bd,EAAc,MAAQc,EACtBrB,EAAO,KAAK,UAAUqB,EAAM,IAAI,EAAE,EAG9BZ,EAAY,OAAS,OACvBD,EAAW,MAAQ,GAEvB,EAKMkB,EAAkB,IAAM,CAC5B1B,EAAO,KAAK,QAAQ,CACtB,EAKM2B,EAAoB,IAAM,CAC9BlB,EAAY,MAAQ,OAAO,UAC7B,EAEA,OAAA/B,EAAU,IAAM,CACdoC,EAAA,EACAL,EAAY,MAAQ,OAAO,WAC3B,OAAO,iBAAiB,SAAUkB,CAAiB,CACrD,CAAC,EAGDC,EACE,IAAM1B,EAAM,KACZ,IAAM,CACAO,EAAY,OAAS,MAAQP,EAAM,OAAS,MAC9CM,EAAW,MAAQ,IAGjBN,EAAM,OAAS,KACjBY,EAAA,CAEJ,mCAKA,OAAAe,EAAA,EAAAC,EAkSM,MAlSNjC,GAkSM,CA9RJH,EAyOM,MAzONqC,GAyOM,CArOJrC,EAuBM,MAvBNsC,GAuBM,CAtBJtC,EAOM,MAPNuC,GAOM,CANJvC,EAEK,KAFLwC,GAEKC,EADAC,KAAE,oCAEP7C,EAEY8C,EAAA,CAFD,KAAK,UAAW,QAAOX,EAAiB,MAAM,sBACvD,IAAyC,CAAzCnC,EAAyC+C,EAAA,CAAhC,KAAK,OAAO,MAAM,wBAK/B5C,EAWM,MAXN6C,GAWM,CAVJhD,EAGE+C,EAAA,CAFA,KAAK,SACL,MAAM,wHAER5C,EAKE,8CAJSY,EAAW,MAAAkC,GACpB,KAAK,OACJ,YAAaJ,KAAE,+BAChB,MAAM,kPAHG9B,EAAA,KAAW,QAS1BZ,EAoGM,MApGN+C,GAoGM,CAnGJ/C,EAqCM,MArCNgD,GAqCM,CAnCJhD,EAaS,UAZN,QAAKJ,EAAA,KAAAA,EAAA,GAAAkD,GAAE7B,EAAA,MAAYA,EAAA,QAAS,oBAC7B,MAAM,yGACL,MAAsBA,EAAA,QAAS,MAA6ByB,KAAE,wBAA4CA,KAAE,2BAM7G7C,EAGE+C,EAAA,CAFC,KAAM3B,EAAA,QAAS,sCAChB,MAAM,oEAKVjB,EAkBS,UAjBN,QAAKJ,EAAA,KAAAA,EAAA,GAAAkD,GAAE5B,EAAA,MAAe,CAAIA,EAAA,OAC1B,MAAKjB,EAAA,6CAA6EiB,EAAA,iHAOnFrB,EAQE+C,EAAA,CAPA,KAAK,OACJ,MAAK3C,EAAA,WAA+CiB,EAAA,oGAW3DrB,EA0DaoD,GAAA,CAzDX,qBAAmB,uCACnB,mBAAiB,oBACjB,iBAAe,uBACf,qBAAmB,sCACnB,mBAAiB,uBACjB,iBAAe,gCAEf,IAiDM,CAjDK/B,EAAA,OAAXiB,EAAA,EAAAC,EAiDM,MAjDNc,GAiDM,CA/CJlD,EAgBM,YAfJA,EAcQ,SAbN,MAAM,+CACL,QAAKJ,EAAA,KAAAA,EAAA,GAAAkD,GAAE3B,EAAA,MAAa,CAAIA,EAAA,WAEzBnB,EAIE,SAHA,KAAK,gDACImB,EAAa,MAAA2B,GACtB,MAAM,4LADG3B,EAAA,KAAa,IAGxBnB,EAIO,OAJPmD,GAIOV,EADFC,KAAE,qDAMX1C,EA2BM,YA1BJA,EAIQ,QAJRoD,GAIQX,EADHC,KAAE,0BAEP1C,EAoBM,MApBNqD,GAoBM,EAnBJlB,EAAA,EAAAC,EAkBSkB,EAAA,KAAAC,EAjBU,sLAAVC,GADTxD,EAkBS,UAXN,IAAKwD,EAAO,MACZ,QAAKV,GAAE9B,EAAA,MAASwC,EAAO,MACvB,MAAKvD,EAAA,uGAAmJe,EAAA,QAAWwC,EAAO,gLAO3K3D,EAA+C+C,EAAA,CAArC,KAAMY,EAAO,KAAM,MAAM,4BAAYC,EAAA,IAC/ChB,EAAGC,KAAGc,EAAO,MAAK,wDAS9BxD,EAWM,MAXN0D,GAWM,CAVJ1D,EASM,MATN2D,GASMlB,EANDjB,EAAA,MAAe,MAAM,EAAG,IAC3BiB,EACEjB,EAAA,MAAe,SAAM,EAAuBkB,KAAE,oBAAsCA,KAAE,2BAQ5F1C,EAqFM,MArFN4D,GAqFM,CApFOlD,EAAA,OAAO,CAAKC,EAAA,MAAO,QAA9BwB,IAAAC,EAYM,MAZNyB,GAYM,CAXJ7D,EAOM,MAPN8D,GAOM,CAJJjE,EAGE+C,EAAA,CAFA,KAAK,WACL,MAAM,0CAGV5C,EAEI,IAFJ+D,GAEItB,EADCC,KAAE,uCAIOlB,EAAA,MAAe,SAAM,GAArCW,IAAAC,EAaM,MAbN4B,GAaM,CAZJhE,EAIM,MAJNiE,GAIM,CADJpE,EAAyD+C,EAAA,CAAhD,KAAK,WAAW,MAAM,4BAEjC5C,EAMI,IANJkE,GAMIzB,EAJA7B,EAAA,MAA8B8B,KAAE,8BAAkDA,KAAE,0CAO1FP,EAAA,EAAAC,EAsDM,MAtDN+B,GAsDM,QArDJ/B,EAoDMkB,EAAA,KAAAC,EAnDY/B,EAAA,MAATG,GAAK,wBADdS,EAoDM,OAlDH,IAAKT,EAAM,KACX,QAAKmB,IAAEf,EAAYJ,CAAK,EACzB,SAAM,6DACiByC,EAAAvD,EAAA,oBAAAuD,EAAe,QAASzC,EAAM,mFAMrD3B,EAwCM,MAxCNqE,GAwCM,CAvCJrE,EA6BM,MA7BNsE,GA6BM,CA5BJtE,EAWM,MAXNuE,GAWM,CAVJvE,EASO,QARJ,MAAKC,EAAA,kCAAgFuE,EAAA3D,EAAA,oBAAA2D,EAAe,QAAS7C,EAAM,2EAOjHc,EAAAd,EAAM,IAAI,OAGjB3B,EAeM,OAdH,MAAKC,EAAA,sCAA+EwE,EAAA5D,EAAA,oBAAA4D,EAAe,QAAS9C,EAAM,6CAOnH3B,EAGC,YAAAyC,EAFKd,EAAM,UAAU,gBAAc,EAAK,IACvCc,EAAGC,KAAE,uBAEKf,EAAM,QAAO,GAAzBQ,EAAA,EAAAC,EAEO,YADFT,EAAM,QAAQ,YAAa,OAChC,mBAGJ9B,EAQE+C,EAAA,CAPA,KAAK,gBACJ,MAAK3C,EAAA,gDAAsFyE,EAAA7D,EAAA,oBAAA6D,EAAe,QAAS/C,EAAM,iJActI3B,EAiDM,MAjDN2E,GAiDM,CA9CJ9E,EA6CaQ,EAAA,CA7CD,IAAI,oBAAkB,CAChC,QAAAuE,EAAA,CAyBM,CA1BqC,UAAAC,KAAS,CACQA,EA6B/CA,GAAa9D,EAAA,MAAW,MAFrCoB,IAAAzC,EAGEC,EAFKkF,CAAS,YAKHA,GAAa9D,EAAA,OAAW,UADrCrB,EAWSoF,GAAA,kBATEhE,EAAA,2CAAAA,EAAU,MAAAgC,GACnB,KAAK,OACJ,cAAa,GACb,oBAAmB,GACnB,yBAAwB,GACxB,kBAAiB,GACjB,QAAKlD,EAAA,KAAAA,EAAA,GAAAkD,GAAEhD,EAAAQ,CAAA,EAAO,KAAI,kBAEnB,IAA6B,EAA7B6B,IAAAzC,EAA6BC,EAAbkF,CAAS,2CA1C3B1C,EAAA,EAAAC,EAyBM,MAzBN2C,GAyBM,CAxBJ/E,EAuBM,MAvBNgF,GAuBM,CAtBJhF,EAIM,MAJNiF,GAIM,CADJpF,EAA0D+C,EAAA,CAAjD,KAAK,WAAW,MAAM,6BAEjC5C,EAIK,KAJLkF,GAIKzC,EADAC,KAAE,gCAEP1C,EAOI,IAPJmF,GAOI1C,EALAC,oFAMJ7C,EAGY8C,EAAA,CAHA,QAAOX,EAAiB,KAAK,UAAU,MAAM,sBACvD,IAA8C,CAA9CnC,EAA8C+C,EAAA,CAArC,KAAK,OAAO,MAAM,mBAAmBa,EAAA,MAC3Cf,KAAE,yGCvZb0C,EAAMC,GAAUC,EAAU,EAG1BC,GAAQC,GAAA,EACdJ,EAAI,IAAIG,EAAK,EAGb,MAAME,GAAWrG,EAAA,EACjBsG,GAAoBD,EAAQ,EAG5BE,GAAuBP,CAAG,EAG1B,MAAMQ,GAAS,CACb,CACE,KAAM,IACN,UAAWC,GACX,KAAM,oBACN,KAAM,CAAE,QAAM,mBAAG,oBAAqB,UAAU,GAChD,SAAU,CACR,CACE,KAAM,oBACN,UAAW,IAAAC,EAAA,IAAM,OAAO,iCAAqC,oDAC7D,KAAM,aACN,KAAM,CAAE,QAAM,mBAAG,aAAc,UAAU,EAAE,EAE7C,CACE,KAAM,SACN,UAAW,IAAAA,EAAA,IAAM,OAAO,mCAAuC,gDAC/D,KAAM,eACN,KAAM,CAAE,QAAM,mBAAG,mBAAoB,UAAU,EAAE,CACnD,CACF,CAEJ,EACMxF,GAASyF,GAAa,CAC1B,QAASC,GAAA,EACT,OAAAJ,EACF,CAAC,EAEDR,EAAI,IAAI9E,EAAM,EAEd8E,EAAI,MAAM,oBAAoB","names":["useDarkMode","isDark","ref","observer","checkDarkMode","onMounted","mutations","mutation","onUnmounted","useAppStore","adoptedStyleSheets","setStyles","appStyleNode","appStyles","rule","_createBlock","_resolveDynamicComponent","_cache","_createVNode","_unref","ShadowRoot","_createElementVNode","_normalizeClass","Notifications","_hoisted_1","LoadingIndicator","_component_RouterView","router","useRouter","route","useRoute","loading","tables","searchQuery","selectedTable","drawerOpen","windowWidth","sortBy","sortOrder","filtersExpanded","showNonWpOnly","fetchTables","data","lmnFetch","error","filteredTables","computed","filtered","table","query","aValue","bValue","selectTable","openQueryEditor","updateWindowWidth","watch","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","__","AppButton","AppIcon","_hoisted_6","$event","_hoisted_8","_hoisted_9","_Transition","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_Fragment","_renderList","option","_createTextVNode","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_a","_hoisted_27","_hoisted_28","_hoisted_29","_b","_c","_d","_hoisted_31","_withCtx","Component","Drawer","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","app","createApp","AppWrapper","pinia","createPinia","appStore","setGlobalProperties","setVueGlobalProperties","routes","DatabaseLayout","__vitePreload","createRouter","createWebHashHistory"],"ignoreList":[],"sources":["../src/pages/database/useDarkMode.js","../src/pages/database/index.vue","../src/pages/database/src/layout.vue","../src/apps/js/uixpressDatabase.js"],"sourcesContent":["import { ref, onMounted, onUnmounted } from 'vue';\n\nexport function useDarkMode() {\n  const isDark = ref(false);\n\n  let observer = null;\n\n  const checkDarkMode = () => {\n    isDark.value = document.body.classList.contains('dark');\n  };\n\n  onMounted(() => {\n    // Initial check\n    checkDarkMode();\n\n    // Set up the mutation observer\n    observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'class'\n        ) {\n          checkDarkMode();\n        }\n      });\n    });\n\n    // Start observing\n    observer.observe(document.body, {\n      attributes: true,\n      attributeFilter: ['class'],\n    });\n  });\n\n  onUnmounted(() => {\n    if (observer) {\n      observer.disconnect();\n    }\n  });\n\n  return { isDark };\n}\n","<script setup>\nimport { ref, watch, nextTick } from 'vue';\nimport { ShadowRoot } from 'vue-shadow-dom';\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Funcs\nimport { useDarkMode } from './useDarkMode.js';\nconst { isDark } = useDarkMode();\n\n// Comps\nimport Notifications from '@/components/utility/notifications/index.vue';\nimport LoadingIndicator from '@/components/utility/loading-indicator/index.ts';\n\n// Refs\nconst adoptedStyleSheets = ref(new CSSStyleSheet());\n\n/**\n * Injects styles into shadow root\n */\nconst setStyles = () => {\n  const appStyleNode = document.querySelector('#uixpress-database-css');\n  if (!appStyleNode || !appStyleNode.sheet) {\n    // Retry after a short delay if stylesheet not loaded yet\n    setTimeout(setStyles, 100);\n    return;\n  }\n  const appStyles = appStyleNode.sheet;\n  for (const rule of [...appStyles.cssRules].reverse()) {\n    adoptedStyleSheets.value.insertRule(rule.cssText);\n  }\n};\n\nsetStyles();\n</script>\n\n<template>\n  <!--Menu -->\n  <component is=\"style\"> html{font-size:14px;}#wpcontent{padding:0}</component>\n  <ShadowRoot\n    tag=\"div\"\n    :adopted-style-sheets=\"[adoptedStyleSheets]\"\n    class=\"uipx-normalize\"\n  >\n    <component is=\"style\">\n      :root{font-size:14px}#wpcontent{padding:0}</component\n    >\n    <div\n      class=\"overflow-hidden uipx-normalize font-sans h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]\"\n      :class=\"isDark ? 'dark' : ''\"\n    >\n      <Notifications />\n      <div class=\"translate-x-0\">\n        <LoadingIndicator :height=\"3\" />\n      </div>\n      <RouterView />\n    </div>\n  </ShadowRoot>\n</template>\n\n<style>\nhtml {\n  --uixp-body-height: calc(100vh - var(--uixp-toolbar-height) - 1rem);\n}\n#wpbody-content {\n  padding: 0;\n}\n#wpcontent {\n  padding: 0 !important;\n}\n</style>\n\n","<script setup>\nimport { ref, computed, watch, onMounted } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Funcs\nimport { lmnFetch } from '@/assets/js/functions/lmnFetch.js';\n\n// Comps\nimport AppIcon from '@/components/utility/icons/index.vue';\nimport AppButton from '@/components/utility/app-button/index.vue';\nimport Drawer from '@/components/utility/drawer/index.vue';\n\nconst router = useRouter();\nconst route = useRoute();\n\n// Refs\nconst loading = ref(false);\nconst tables = ref([]);\nconst searchQuery = ref('');\nconst selectedTable = ref(null);\nconst drawerOpen = ref(false);\nconst windowWidth = ref(typeof window !== 'undefined' ? window.innerWidth : 0);\nconst sortBy = ref('name'); // 'name', 'rows', 'size', 'type'\nconst sortOrder = ref('asc'); // 'asc' or 'desc'\nconst filtersExpanded = ref(false);\nconst showNonWpOnly = ref(false); // Filter to show only non-WordPress tables\n\n/**\n * Fetches list of all database tables\n */\nconst fetchTables = async () => {\n  loading.value = true;\n  try {\n    const args = {\n      endpoint: 'uixpress/v1/database/tables',\n    };\n    const data = await lmnFetch(args);\n    if (data && data.data) {\n      tables.value = data.data;\n    }\n  } catch (error) {\n    console.error('Error fetching tables:', error);\n  } finally {\n    loading.value = false;\n  }\n};\n\n/**\n * Filters and sorts tables based on search query and sort options\n */\nconst filteredTables = computed(() => {\n  let filtered = [...tables.value];\n\n  // Filter by non-WordPress tables only\n  if (showNonWpOnly.value) {\n    filtered = filtered.filter((table) => !table.is_wp_table);\n  }\n\n  // Filter by search query\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    filtered = filtered.filter((table) =>\n      table.name.toLowerCase().includes(query)\n    );\n  }\n\n  // Sort tables\n  filtered.sort((a, b) => {\n    let aValue, bValue;\n\n    switch (sortBy.value) {\n      case 'rows':\n        aValue = a.row_count || 0;\n        bValue = b.row_count || 0;\n        break;\n      case 'size':\n        aValue = a.size_mb || 0;\n        bValue = b.size_mb || 0;\n        break;\n      case 'type':\n        // Sort by WordPress tables first, then custom tables\n        aValue = a.is_wp_table ? 0 : 1;\n        bValue = b.is_wp_table ? 0 : 1;\n        break;\n      case 'name':\n      default:\n        aValue = a.name.toLowerCase();\n        bValue = b.name.toLowerCase();\n        break;\n    }\n\n    if (sortOrder.value === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n\n  return filtered;\n});\n\n/**\n * Handles table selection\n * @param {Object} table - The selected table object\n */\nconst selectTable = (table) => {\n  selectedTable.value = table;\n  router.push(`/table/${table.name}`);\n\n  // Open drawer on mobile\n  if (windowWidth.value <= 1024) {\n    drawerOpen.value = true;\n  }\n};\n\n/**\n * Navigates to query editor\n */\nconst openQueryEditor = () => {\n  router.push('/query');\n};\n\n/**\n * Updates window width on resize\n */\nconst updateWindowWidth = () => {\n  windowWidth.value = window.innerWidth;\n};\n\nonMounted(() => {\n  fetchTables();\n  windowWidth.value = window.innerWidth;\n  window.addEventListener('resize', updateWindowWidth);\n});\n\n// Watch route changes to close drawer on mobile when navigating away\nwatch(\n  () => route.path,\n  () => {\n    if (windowWidth.value <= 1024 && route.path === '/') {\n      drawerOpen.value = false;\n    }\n    // Refresh table list when returning to main view (e.g., after deletion)\n    if (route.path === '/') {\n      fetchTables();\n    }\n  }\n);\n</script>\n\n<template>\n  <div\n    class=\"flex h-full text-zinc-900 dark:text-zinc-100 font-sans max-h-full overflow-hidden gap-6 max-md:gap-0 uipx-normalize\"\n  >\n    <!-- Database Tables Sidebar -->\n    <div\n      class=\"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden\"\n    >\n      <!-- Header -->\n      <div class=\"px-6 pt-6 pb-4\">\n        <div class=\"flex items-center justify-between mb-4\">\n          <h1 class=\"text-xl font-medium text-zinc-900 dark:text-zinc-100\">\n            {{ __('Database Explorer', 'uixpress') }}\n          </h1>\n          <AppButton type=\"primary\" @click=\"openQueryEditor\" class=\"text-sm\">\n            <AppIcon icon=\"code\" class=\"text-base\" />\n          </AppButton>\n        </div>\n\n        <!-- Search Bar -->\n        <div class=\"relative\">\n          <AppIcon\n            icon=\"search\"\n            class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 dark:text-zinc-500 text-base pointer-events-none\"\n          />\n          <input\n            v-model=\"searchQuery\"\n            type=\"text\"\n            :placeholder=\"__('Search tables...', 'uixpress')\"\n            class=\"w-full bg-zinc-50 dark:bg-zinc-900 border-0 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100 transition-shadow\"\n          />\n        </div>\n      </div>\n\n      <!-- Compact Filter Bar -->\n      <div class=\"px-6 py-3\">\n        <div class=\"flex items-center gap-2\">\n          <!-- Sort Order Toggle -->\n          <button\n            @click=\"sortOrder = sortOrder === 'asc' ? 'desc' : 'asc'\"\n            class=\"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors\"\n            :title=\"\n              sortOrder === 'asc'\n                ? __('Ascending', 'uixpress')\n                : __('Descending', 'uixpress')\n            \"\n          >\n            <AppIcon\n              :icon=\"sortOrder === 'asc' ? 'arrow_upward' : 'arrow_downward'\"\n              class=\"text-sm text-zinc-600 dark:text-zinc-400\"\n            />\n          </button>\n\n          <!-- Sort & Filter Button -->\n          <button\n            @click=\"filtersExpanded = !filtersExpanded\"\n            :class=\"[\n              'relative p-2 rounded-md transition-colors',\n              filtersExpanded\n                ? 'bg-zinc-900 dark:bg-zinc-100'\n                : 'bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n            ]\"\n          >\n            <AppIcon\n              icon=\"tune\"\n              :class=\"[\n                'text-sm',\n                filtersExpanded\n                  ? 'text-white dark:text-zinc-900'\n                  : 'text-zinc-600 dark:text-zinc-400',\n              ]\"\n            />\n          </button>\n        </div>\n\n        <!-- Expanded Filters Panel -->\n        <transition\n          enter-active-class=\"transition-all duration-200 ease-out\"\n          enter-from-class=\"opacity-0 max-h-0\"\n          enter-to-class=\"opacity-100 max-h-96\"\n          leave-active-class=\"transition-all duration-150 ease-in\"\n          leave-from-class=\"opacity-100 max-h-96\"\n          leave-to-class=\"opacity-0 max-h-0\"\n        >\n          <div v-if=\"filtersExpanded\" class=\"mt-3 pt-3 space-y-3\">\n            <!-- Filter: Non-WP Tables Only -->\n            <div>\n              <label\n                class=\"flex items-center gap-2 cursor-pointer group\"\n                @click=\"showNonWpOnly = !showNonWpOnly\"\n              >\n                <input\n                  type=\"checkbox\"\n                  v-model=\"showNonWpOnly\"\n                  class=\"w-4 h-4 rounded border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100\"\n                />\n                <span\n                  class=\"text-xs font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 transition-colors\"\n                >\n                  {{ __('Show non-WordPress tables only', 'uixpress') }}\n                </span>\n              </label>\n            </div>\n\n            <!-- Sort By -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Sort By', 'uixpress') }}\n              </label>\n              <div class=\"grid grid-cols-2 gap-1.5\">\n                <button\n                  v-for=\"option in [\n                    { value: 'name', label: 'Name', icon: 'sort_by_alpha' },\n                    { value: 'rows', label: 'Rows', icon: 'table' },\n                    { value: 'size', label: 'Size', icon: 'data_usage' },\n                    { value: 'type', label: 'Type', icon: 'category' },\n                  ]\"\n                  :key=\"option.value\"\n                  @click=\"sortBy = option.value\"\n                  :class=\"[\n                    'flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-md transition-colors',\n                    sortBy === option.value\n                      ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                      : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n                  ]\"\n                >\n                  <AppIcon :icon=\"option.icon\" class=\"text-sm\" />\n                  {{ __(option.label, 'uixpress') }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </transition>\n      </div>\n\n      <!-- Results Count -->\n      <div class=\"flex flex-row place-content-between items-center px-6 pr-4\">\n        <div\n          class=\"py-2 text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500\"\n        >\n          {{ filteredTables.length }}\n          {{\n            filteredTables.length === 1\n              ? __('table', 'uixpress')\n              : __('tables', 'uixpress')\n          }}\n        </div>\n      </div>\n\n      <!-- Tables List -->\n      <div class=\"flex-1 overflow-auto px-6 pb-6 custom-scrollbar\">\n        <div v-if=\"loading && !tables.length\" class=\"p-8 text-center\">\n          <div\n            class=\"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3\"\n          >\n            <AppIcon\n              icon=\"database\"\n              class=\"text-zinc-400 text-xl animate-pulse\"\n            />\n          </div>\n          <p class=\"text-sm text-zinc-500 dark:text-zinc-400\">\n            {{ __('Loading tables...', 'uixpress') }}\n          </p>\n        </div>\n\n        <div v-else-if=\"filteredTables.length === 0\" class=\"p-8 text-center\">\n          <div\n            class=\"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3\"\n          >\n            <AppIcon icon=\"database\" class=\"text-zinc-400 text-xl\" />\n          </div>\n          <p class=\"text-sm text-zinc-500 dark:text-zinc-400 mb-2\">\n            {{\n              searchQuery\n                ? __('No tables found', 'uixpress')\n                : __('No tables available', 'uixpress')\n            }}\n          </p>\n        </div>\n\n        <div v-else class=\"space-y-1.5\">\n          <div\n            v-for=\"table in filteredTables\"\n            :key=\"table.name\"\n            @click=\"selectTable(table)\"\n            class=\"p-3 rounded-xl cursor-pointer transition-all group -mx-3\"\n            :class=\"\n              selectedTable?.name === table.name\n                ? 'bg-zinc-200 dark:bg-zinc-800'\n                : 'hover:bg-zinc-100 dark:hover:bg-zinc-800'\n            \"\n          >\n            <div class=\"flex items-start justify-between\">\n              <div class=\"flex-1 min-w-0\">\n                <div class=\"flex items-center gap-2 mb-1.5\">\n                  <span\n                    :class=\"[\n                      'text-sm font-medium truncate',\n                      selectedTable?.name === table.name\n                        ? 'text-zinc-900 dark:text-white'\n                        : 'text-zinc-500 dark:text-zinc-400',\n                    ]\"\n                  >\n                    {{ table.name }}\n                  </span>\n                </div>\n                <div\n                  :class=\"[\n                    'flex items-center gap-3 text-xs',\n                    selectedTable?.name === table.name\n                      ? 'text-zinc-500 dark:text-zinc-400'\n                      : 'text-zinc-500 dark:text-zinc-400',\n                  ]\"\n                >\n                  <span\n                    >{{ table.row_count.toLocaleString() }}\n                    {{ __('rows', 'uixpress') }}</span\n                  >\n                  <span v-if=\"table.size_mb > 0\">\n                    {{ table.size_mb.toFixed(2) }} MB\n                  </span>\n                </div>\n              </div>\n              <AppIcon\n                icon=\"chevron_right\"\n                :class=\"[\n                  'text-base flex-shrink-0 transition-opacity',\n                  selectedTable?.name === table.name\n                    ? 'text-zinc-900 dark:text-white opacity-100'\n                    : 'text-zinc-400 opacity-0 group-hover:opacity-100',\n                ]\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Right Content Area -->\n    <div\n      class=\"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto\"\n    >\n      <RouterView key=\"database-content\" v-slot=\"{ Component }\">\n        <div class=\"flex-1 flex items-center justify-center\" v-if=\"!Component\">\n          <div class=\"text-center\">\n            <div\n              class=\"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4\"\n            >\n              <AppIcon icon=\"database\" class=\"text-2xl text-zinc-400\" />\n            </div>\n            <h3\n              class=\"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2\"\n            >\n              {{ __('Table Details', 'uixpress') }}\n            </h3>\n            <p class=\"text-sm text-zinc-500 dark:text-zinc-400 mb-4\">\n              {{\n                __(\n                  'Select a table from the list to view its structure and data.',\n                  'uixpress'\n                )\n              }}\n            </p>\n            <AppButton @click=\"openQueryEditor\" type=\"primary\" class=\"text-sm\">\n              <AppIcon icon=\"code\" class=\"text-base mr-2\" />\n              {{ __('Open SQL Editor', 'uixpress') }}\n            </AppButton>\n          </div>\n        </div>\n\n        <component\n          :is=\"Component\"\n          v-else-if=\"Component && windowWidth > 1024\"\n        />\n\n        <Drawer\n          v-else-if=\"Component && windowWidth <= 1024\"\n          v-model=\"drawerOpen\"\n          size=\"full\"\n          :show-header=\"false\"\n          :show-close-button=\"false\"\n          :close-on-overlay-click=\"true\"\n          :close-on-escape=\"true\"\n          @close=\"router.push('/')\"\n        >\n          <component :is=\"Component\" />\n        </Drawer>\n      </RouterView>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* Custom scrollbar */\n.custom-scrollbar::-webkit-scrollbar {\n  width: 6px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-track {\n  @apply bg-transparent;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb {\n  @apply bg-zinc-300 dark:bg-zinc-700 rounded-full;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb:hover {\n  @apply bg-zinc-400 dark:bg-zinc-600;\n}\n</style>\n","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport { createWebHashHistory, createRouter } from 'vue-router';\nimport '@/apps/css/database.css';\n\n// Import store\nimport { useAppStore } from '@/store/app/app.js';\nimport { setGlobalProperties, setVueGlobalProperties } from '@/setup/setGlobalProperties.js';\n\n// Import comps\nimport AppWrapper from '@/pages/database/index.vue';\nimport DatabaseLayout from '@/pages/database/src/layout.vue';\n\n// Build app\nconst app = createApp(AppWrapper);\n\n// Use pinia\nconst pinia = createPinia();\napp.use(pinia);\n\n// Update app store\nconst appStore = useAppStore();\nsetGlobalProperties(appStore);\n\n// Declare translation functions\nsetVueGlobalProperties(app);\n\n// Routes\nconst routes = [\n  {\n    path: '/',\n    component: DatabaseLayout,\n    name: 'database-explorer',\n    meta: { name: __('Database Explorer', 'uixpress') },\n    children: [\n      {\n        path: '/table/:tableName',\n        component: () => import('@/pages/database/src/table-view.vue'),\n        name: 'table-view',\n        meta: { name: __('Table View', 'uixpress') },\n      },\n      {\n        path: '/query',\n        component: () => import('@/pages/database/src/query-editor.vue'),\n        name: 'query-editor',\n        meta: { name: __('SQL Query Editor', 'uixpress') },\n      },\n    ],\n  },\n];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\napp.use(router);\n\napp.mount('#uix-database-page');\n\n"],"file":"database.build.CMkNIFH4.js"}