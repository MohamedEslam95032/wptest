import{G as Ae,Q as fe,e as E,d as i,r as T,o as xe,y as Fe,u as ce,c as Z,a as _e,w as Oe,b as o,f as $,g as O,h as se,i as Pe,j as e,l as G,W as $e,k as M,_ as V,t as s,n as ge,D as re,I as Be,J as Ve,F as Q,m as ee,S as Qe,E as oe,O as B,M as Ge,C as ae,Y as Ke,R as Xe,H as et,A as tt,s as st,v as nt,x as it,P as lt}from"./assets/_plugin-vue_export-helper-y4Xv5kKr.js";import{a as be,u as we,D as je,c as at,b as rt}from"./assets/vue-router-mJSwnJkd.js";import{i as ot}from"./assets/inSearch-uRPV3sBV.js";import{_ as ct,L as ut}from"./assets/index-C_FNz6s0.js";import{_ as qe}from"./assets/index-DghDHKPv.js";import{g as Ee}from"./assets/_commonjsHelpers-CqkleIqs.js";import"./assets/index-64rmHcpw.js";import{_ as dt}from"./assets/index-B-3JnImM.js";const pt={};function gt(p,k){const r=fe("RouterView");return i(),E(r)}const ft=Ae(pt,[["render",gt]]);function vt(){const p=T(!1);let k=null;const r=()=>{p.value=document.body.classList.contains("dark")};return xe(()=>{r(),k=new MutationObserver(l=>{l.forEach(n=>{n.type==="attributes"&&n.attributeName==="class"&&r()})}),k.observe(document.body,{attributes:!0,attributeFilter:["class"]})}),Fe(()=>{k&&k.disconnect()}),{isDark:p}}const _t={key:0,class:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full px-6"},ht={class:"bg-zinc-900/95 backdrop-blur-sm border border-zinc-800/50 rounded-xl p-4 shadow-xl"},mt={class:"flex items-center gap-3 mb-3"},xt={class:"flex-shrink-0"},bt={class:"w-8 h-8 rounded-lg bg-zinc-800 flex items-center justify-center"},wt={class:"flex-1 min-w-0"},kt={class:"text-sm font-medium text-white mb-0.5"},yt=["title"],zt={class:"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden"},$t={class:"p-6"},St={class:"flex items-center gap-4 mb-6"},Mt={class:"text-xl font-medium grow"},Pt={class:"flex items-center gap-"},Lt={class:"relative"},Tt=["placeholder"],Dt={class:"flex-1 overflow-auto"},Rt={key:0,class:"p-8 text-center"},Ct={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},It={class:"text-sm text-zinc-500"},Ht={key:1,class:"p-8 text-center"},Ut={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},At={class:"text-sm text-zinc-500"},Ft={key:2,class:"py-2 px-6 flex flex-col gap-1"},Ot=["onClick"],Bt={class:"flex-shrink-0"},Vt={class:"flex-1 min-w-0"},jt={class:"flex items-center gap-2 mb-0.5"},qt={class:"font-medium text-sm text-zinc-900 dark:text-zinc-100 truncate"},Et={key:0,class:"w-1 h-1 bg-orange-500 rounded-full flex-shrink-0"},Nt={class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},Wt={class:"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto"},Yt={key:0,class:"flex-1 flex items-center justify-center"},Zt={class:"text-center"},Jt={class:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4"},Qt={class:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2"},Gt={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-4"},Kt={__name:"index",emits:["update"],setup(p,{emit:k}){const r=ce(),{isDark:l}=vt(),n=be(),x=we(),D=T(new CSSStyleSheet),L=T(""),b=T(null),h=T(null),H=T(!1),U=T(""),Y=T(!1),j=T(typeof window<"u"?window.innerWidth:0),q=T(!1),R=Z(()=>{let c=[];for(let m in r.state.pluginsList){const w=r.state.pluginsList[m];w.deleted||ot(L.value,w.Name,w.Author,w.Version)&&(w.slug=m,c.push(w))}return c.sort((m,w)=>m.active&&!w.active?-1:!m.active&&w.active?1:m.Name.localeCompare(w.Name))}),u=Z(()=>j.value),W=Z(()=>x.params.slug),A=c=>{const m=encodeURIComponent(c);n.push(`/${m}`),j.value<=1024&&(Y.value=!0)},_=()=>{j.value=window.innerWidth};_e(()=>x.params.slug,c=>{!c&&Y.value&&(Y.value=!1)});const t=()=>{let c=document.querySelector("#uixpress-plugins-css");if(!c)c=g(),c.onload=()=>{const m=c.sheet;for(const w of[...m.cssRules].reverse())D.value.insertRule(w.cssText)};else{const m=c.sheet;for(const w of[...m.cssRules].reverse())D.value.insertRule(w.cssText)}},g=()=>{var c=document.createElement("link");return c.rel="stylesheet",c.href=`${r.state.pluginBase}app/dist/assets/styles/plugins.css`,document.head.appendChild(c),c},P=async c=>{const m=c.target.files;if(!m||!m[0])return;const w=m[0];if(!w.name.endsWith(".zip")){B({title:"Invalid File",message:"Please select a valid ZIP file",type:"error"});return}if(w.size>50*1024*1024){B({title:"File Too Large",message:"File size must be less than 50MB",type:"error"});return}H.value=!0,U.value=w.name;try{const z=new FormData;z.append("plugin_zip",w);const ie=await oe({endpoint:"uixpress/v1/plugin/install",params:{},type:"POST",data:z,isFormData:!0});if(!ie||!ie.data||!ie.data.plugin)throw new Error("Upload failed. Please try again.");const S=ie.data.plugin;B({title:"Success",message:"Plugin uploaded successfully",type:"success"}),r.state.pluginsList[S.slug]={...S,active:!1,has_update:!1,deleted:!1,auto_update_enabled:!1,splitSlug:S.slug.split("/")[0]},setTimeout(()=>{H.value=!1,U.value="",b.value&&(b.value.value="")},500)}catch(z){console.error("Plugin upload error:",z),B({title:"Upload Failed",message:z.message||"An unexpected error occurred during upload",type:"error"}),setTimeout(()=>{H.value=!1,U.value="",b.value&&(b.value.value="")},500)}},a=async()=>{q.value=!0,r.updateState("loading",!0);try{const m=await oe({endpoint:"uixpress/v1/plugins",type:"GET",params:{}});m&&m.data&&m.data.success&&m.data.plugins?r.updateState("pluginsList",m.data.plugins):B({title:(0,window.wp.i18n.__)("Error","uixpress"),message:(0,window.wp.i18n.__)("Failed to load plugins","uixpress"),type:"error"})}catch(c){console.error("Error fetching plugins:",c),B({title:(0,window.wp.i18n.__)("Error","uixpress"),message:(0,window.wp.i18n.__)("Failed to load plugins","uixpress"),type:"error"})}finally{q.value=!1,r.updateState("loading",!1)}};return xe(async()=>{r.state.pluginsList||(r.state.pluginsList={}),await a(),_(),window.addEventListener("resize",_)}),Fe(()=>{window.removeEventListener("resize",_)}),Oe(()=>{!W.value||!r.state.pluginsList[W.value]||r.state.pluginsList[W.value].deleted&&n.push("/")}),t(),(c,m)=>{const w=fe("RouterLink"),z=fe("RouterView");return i(),o(Q,null,[(i(),E(Pe("style"),null,{default:O(()=>[...m[5]||(m[5]=[se(" html{font-size:14px;}#wpcontent{padding:0}",-1)])]),_:1})),$(G(Qe),{tag:"div","adopted-style-sheets":[D.value],class:"uipx-normalize"},{default:O(()=>[$(ct),$(G(ut),{height:3}),$($e,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:O(()=>[H.value?(i(),o("div",_t,[e("div",ht,[e("div",mt,[e("div",xt,[e("div",bt,[$(V,{icon:"upload",class:"text-zinc-400 text-sm animate-pulse"})])]),e("div",wt,[e("p",kt,s(c.__("Uploading Plugin","uixpress")),1),e("p",{class:"text-xs text-zinc-400 truncate",title:U.value},s(U.value),9,yt)])]),m[6]||(m[6]=e("div",{class:"relative h-1 bg-zinc-800 rounded-full overflow-hidden"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-zinc-700 via-zinc-600 to-zinc-700 rounded-full",style:{"background-size":"200% 100%",animation:"progress-shimmer 1.5s ease-in-out infinite"}})],-1))])])):M("",!0)]),_:1}),e("div",{class:ge(["flex text-zinc-900 dark:text-zinc-100 font-sans overflow-hidden gap-6 max-md:gap-0 uipx-normalize h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]",G(l)?"dark":""])},[e("div",zt,[e("div",$t,[e("div",St,[e("h1",Mt,s(c.__("Installed Plugins","uixpress")),1),e("div",Pt,[$(re,{type:"transparent",onClick:m[1]||(m[1]=F=>b.value.click(F)),disabled:H.value,loading:H.value},{default:O(()=>[$(V,{icon:"upload",class:"text-xl text-zinc-600 dark:text-zinc-400"}),e("input",{type:"file",ref_key:"pluginupload",ref:b,accept:".zip",onChange:m[0]||(m[0]=F=>P(F)),class:"hidden"},null,544)]),_:1},8,["disabled","loading"]),$(w,{to:"/plugin-search",class:"ml-auto p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors"},{default:O(()=>[$(V,{icon:"category_search",class:"text-xl text-zinc-600 dark:text-zinc-400"})]),_:1})])]),e("div",Lt,[$(V,{icon:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 text-sm"}),Be(e("input",{"onUpdate:modelValue":m[2]||(m[2]=F=>L.value=F),type:"text",placeholder:c.__("Search plugins...","uixpress"),class:"w-full bg-transparent border border-zinc-200 dark:border-zinc-700 rounded-lg pl-9 pr-3 py-2.5 text-sm placeholder-zinc-500 focus:outline-none focus:border-zinc-400 dark:focus:border-zinc-600 transition-colors"},null,8,Tt),[[Ve,L.value]])])]),e("div",Dt,[q.value?(i(),o("div",Rt,[e("div",Ct,[$(V,{icon:"extension",class:"text-zinc-400 text-xl animate-pulse"})]),e("p",It,s(c.__("Loading plugins...","uixpress")),1)])):R.value.length?(i(),o("div",Ft,[(i(!0),o(Q,null,ee(R.value,F=>(i(),o("div",{key:F.slug,onClick:ie=>A(F.slug),class:ge(["flex items-center gap-3 px-3 py-3 cursor-pointer transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-all",W.value===F.slug?"bg-zinc-100 dark:bg-zinc-800":""])},[e("div",Bt,[e("div",{class:ge(["w-2 h-2 rounded-full",F.active?"bg-green-500":"bg-zinc-300 dark:bg-zinc-600"])},null,2)]),e("div",Vt,[e("div",jt,[e("span",qt,s(F.Name),1),F.has_update?(i(),o("span",Et)):M("",!0)]),e("div",Nt,s(F.Author?`${F.Author} â€¢ `:"")+"v"+s(F.Version),1)])],10,Ot))),128))])):(i(),o("div",Ht,[e("div",Ut,[$(V,{icon:"folder_open",class:"text-zinc-400 text-xl"})]),e("p",At,s(c.__("No plugins found","uixpress")),1)]))])]),e("div",Wt,[$(z,{key:"plugin-details-content"},{default:O(({Component:F})=>[F?F&&u.value>1024?(i(),E(Pe(F),{key:1})):F&&u.value<=1024?(i(),E(je,{key:2,modelValue:Y.value,"onUpdate:modelValue":m[3]||(m[3]=ie=>Y.value=ie),size:"full","show-header":!1,"show-close-button":!1,"close-on-overlay-click":!0,"close-on-escape":!0,onClose:m[4]||(m[4]=ie=>G(n).push("/"))},{default:O(()=>[(i(),E(Pe(F)))]),_:2},1032,["modelValue"])):M("",!0):(i(),o("div",Yt,[e("div",Zt,[e("div",Jt,[$(V,{icon:"extension",class:"text-2xl text-zinc-400"})]),e("h3",Qt,s(c.__("Plugin Details","uixpress")),1),e("p",Gt,s(c.__("Select a plugin from the list to view its details and manage settings.","uixpress")),1)])]))]),_:1})])],2),$(qe,{ref_key:"confirm",ref:h},null,512)]),_:1},8,["adopted-style-sheets"])],64)}}};var ye={exports:{}},Xt=ye.exports,Ie;function es(){return Ie||(Ie=1,(function(p,k){(function(r,l){p.exports=l()})(Xt,(function(){var r=1e3,l=6e4,n=36e5,x="millisecond",D="second",L="minute",b="hour",h="day",H="week",U="month",Y="quarter",j="year",q="date",R="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,W=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var v=["th","st","nd","rd"],d=S%100;return"["+S+(v[(d-20)%10]||v[d]||v[0])+"]"}},_=function(S,v,d){var y=String(S);return!y||y.length>=v?S:""+Array(v+1-y.length).join(d)+S},t={s:_,z:function(S){var v=-S.utcOffset(),d=Math.abs(v),y=Math.floor(d/60),f=d%60;return(v<=0?"+":"-")+_(y,2,"0")+":"+_(f,2,"0")},m:function S(v,d){if(v.date()<d.date())return-S(d,v);var y=12*(d.year()-v.year())+(d.month()-v.month()),f=v.clone().add(y,U),C=d-f<0,I=v.clone().add(y+(C?-1:1),U);return+(-(y+(d-f)/(C?f-I:I-f))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:U,y:j,w:H,d:h,D:q,h:b,m:L,s:D,ms:x,Q:Y}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},g="en",P={};P[g]=A;var a="$isDayjsObject",c=function(S){return S instanceof F||!(!S||!S[a])},m=function S(v,d,y){var f;if(!v)return g;if(typeof v=="string"){var C=v.toLowerCase();P[C]&&(f=C),d&&(P[C]=d,f=C);var I=v.split("-");if(!f&&I.length>1)return S(I[0])}else{var N=v.name;P[N]=v,f=N}return!y&&f&&(g=f),f||!y&&g},w=function(S,v){if(c(S))return S.clone();var d=typeof v=="object"?v:{};return d.date=S,d.args=arguments,new F(d)},z=t;z.l=m,z.i=c,z.w=function(S,v){return w(S,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var F=(function(){function S(d){this.$L=m(d.locale,null,!0),this.parse(d),this.$x=this.$x||d.x||{},this[a]=!0}var v=S.prototype;return v.parse=function(d){this.$d=(function(y){var f=y.date,C=y.utc;if(f===null)return new Date(NaN);if(z.u(f))return new Date;if(f instanceof Date)return new Date(f);if(typeof f=="string"&&!/Z$/i.test(f)){var I=f.match(u);if(I){var N=I[2]-1||0,J=(I[7]||"0").substring(0,3);return C?new Date(Date.UTC(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,J)):new Date(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,J)}}return new Date(f)})(d),this.init()},v.init=function(){var d=this.$d;this.$y=d.getFullYear(),this.$M=d.getMonth(),this.$D=d.getDate(),this.$W=d.getDay(),this.$H=d.getHours(),this.$m=d.getMinutes(),this.$s=d.getSeconds(),this.$ms=d.getMilliseconds()},v.$utils=function(){return z},v.isValid=function(){return this.$d.toString()!==R},v.isSame=function(d,y){var f=w(d);return this.startOf(y)<=f&&f<=this.endOf(y)},v.isAfter=function(d,y){return w(d)<this.startOf(y)},v.isBefore=function(d,y){return this.endOf(y)<w(d)},v.$g=function(d,y,f){return z.u(d)?this[y]:this.set(f,d)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(d,y){var f=this,C=!!z.u(y)||y,I=z.p(d),N=function(pe,te){var ue=z.w(f.$u?Date.UTC(f.$y,te,pe):new Date(f.$y,te,pe),f);return C?ue:ue.endOf(h)},J=function(pe,te){return z.w(f.toDate()[pe].apply(f.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(te)),f)},K=this.$W,X=this.$M,le=this.$D,ve="set"+(this.$u?"UTC":"");switch(I){case j:return C?N(1,0):N(31,11);case U:return C?N(1,X):N(0,X+1);case H:var de=this.$locale().weekStart||0,he=(K<de?K+7:K)-de;return N(C?le-he:le+(6-he),X);case h:case q:return J(ve+"Hours",0);case b:return J(ve+"Minutes",1);case L:return J(ve+"Seconds",2);case D:return J(ve+"Milliseconds",3);default:return this.clone()}},v.endOf=function(d){return this.startOf(d,!1)},v.$set=function(d,y){var f,C=z.p(d),I="set"+(this.$u?"UTC":""),N=(f={},f[h]=I+"Date",f[q]=I+"Date",f[U]=I+"Month",f[j]=I+"FullYear",f[b]=I+"Hours",f[L]=I+"Minutes",f[D]=I+"Seconds",f[x]=I+"Milliseconds",f)[C],J=C===h?this.$D+(y-this.$W):y;if(C===U||C===j){var K=this.clone().set(q,1);K.$d[N](J),K.init(),this.$d=K.set(q,Math.min(this.$D,K.daysInMonth())).$d}else N&&this.$d[N](J);return this.init(),this},v.set=function(d,y){return this.clone().$set(d,y)},v.get=function(d){return this[z.p(d)]()},v.add=function(d,y){var f,C=this;d=Number(d);var I=z.p(y),N=function(X){var le=w(C);return z.w(le.date(le.date()+Math.round(X*d)),C)};if(I===U)return this.set(U,this.$M+d);if(I===j)return this.set(j,this.$y+d);if(I===h)return N(1);if(I===H)return N(7);var J=(f={},f[L]=l,f[b]=n,f[D]=r,f)[I]||1,K=this.$d.getTime()+d*J;return z.w(K,this)},v.subtract=function(d,y){return this.add(-1*d,y)},v.format=function(d){var y=this,f=this.$locale();if(!this.isValid())return f.invalidDate||R;var C=d||"YYYY-MM-DDTHH:mm:ssZ",I=z.z(this),N=this.$H,J=this.$m,K=this.$M,X=f.weekdays,le=f.months,ve=f.meridiem,de=function(te,ue,me,ke){return te&&(te[ue]||te(y,C))||me[ue].slice(0,ke)},he=function(te){return z.s(N%12||12,te,"0")},pe=ve||function(te,ue,me){var ke=te<12?"AM":"PM";return me?ke.toLowerCase():ke};return C.replace(W,(function(te,ue){return ue||(function(me){switch(me){case"YY":return String(y.$y).slice(-2);case"YYYY":return z.s(y.$y,4,"0");case"M":return K+1;case"MM":return z.s(K+1,2,"0");case"MMM":return de(f.monthsShort,K,le,3);case"MMMM":return de(le,K);case"D":return y.$D;case"DD":return z.s(y.$D,2,"0");case"d":return String(y.$W);case"dd":return de(f.weekdaysMin,y.$W,X,2);case"ddd":return de(f.weekdaysShort,y.$W,X,3);case"dddd":return X[y.$W];case"H":return String(N);case"HH":return z.s(N,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return pe(N,J,!0);case"A":return pe(N,J,!1);case"m":return String(J);case"mm":return z.s(J,2,"0");case"s":return String(y.$s);case"ss":return z.s(y.$s,2,"0");case"SSS":return z.s(y.$ms,3,"0");case"Z":return I}return null})(te)||I.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(d,y,f){var C,I=this,N=z.p(y),J=w(d),K=(J.utcOffset()-this.utcOffset())*l,X=this-J,le=function(){return z.m(I,J)};switch(N){case j:C=le()/12;break;case U:C=le();break;case Y:C=le()/3;break;case H:C=(X-K)/6048e5;break;case h:C=(X-K)/864e5;break;case b:C=X/n;break;case L:C=X/l;break;case D:C=X/r;break;default:C=X}return f?C:z.a(C)},v.daysInMonth=function(){return this.endOf(U).$D},v.$locale=function(){return P[this.$L]},v.locale=function(d,y){if(!d)return this.$L;var f=this.clone(),C=m(d,y,!0);return C&&(f.$L=C),f},v.clone=function(){return z.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},S})(),ie=F.prototype;return w.prototype=ie,[["$ms",x],["$s",D],["$m",L],["$H",b],["$W",h],["$M",U],["$y",j],["$D",q]].forEach((function(S){ie[S[1]]=function(v){return this.$g(v,S[0],S[1])}})),w.extend=function(S,v){return S.$i||(S(v,F,w),S.$i=!0),w},w.locale=m,w.isDayjs=c,w.unix=function(S){return w(1e3*S)},w.en=P[g],w.Ls=P,w.p={},w}))})(ye)),ye.exports}var ts=es();const Le=Ee(ts);var ze={exports:{}},ss=ze.exports,He;function ns(){return He||(He=1,(function(p,k){(function(r,l){p.exports=l()})(ss,(function(){return function(r,l,n){r=r||{};var x=l.prototype,D={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function L(h,H,U,Y){return x.fromToBase(h,H,U,Y)}n.en.relativeTime=D,x.fromToBase=function(h,H,U,Y,j){for(var q,R,u,W=U.$locale().relativeTime||D,A=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=A.length,t=0;t<_;t+=1){var g=A[t];g.d&&(q=Y?n(h).diff(U,g.d,!0):U.diff(h,g.d,!0));var P=(r.rounding||Math.round)(Math.abs(q));if(u=q>0,P<=g.r||!g.r){P<=1&&t>0&&(g=A[t-1]);var a=W[g.l];j&&(P=j(""+P)),R=typeof a=="string"?a.replace("%d",P):a(P,H,g.l,u);break}}if(H)return R;var c=u?W.future:W.past;return typeof c=="function"?c(R):c.replace("%s",R)},x.to=function(h,H){return L(h,H,this,!0)},x.from=function(h,H){return L(h,H,this)};var b=function(h){return h.$u?n.utc():n()};x.toNow=function(h){return this.to(b(this),h)},x.fromNow=function(h){return this.from(b(this),h)}}}))})(ze)),ze.exports}var is=ns();const Ne=Ee(is),ls={},as={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 800 400"};function rs(p,k){return i(),o("svg",as,[...k[0]||(k[0]=[Ge('<rect width="800" height="400" class="fill-zinc-100 dark:fill-zinc-800" rx="12" ry="12"></rect><pattern id="grid" x="0" y="0" width="120" height="60" patternUnits="userSpaceOnUse"><path d="M 0 60 L 60 30 L 120 60" class="stroke-zinc-300 dark:stroke-zinc-600" stroke-width="0.75" fill="none"></path><path d="M 0 0 L 60 30 L 120 0" class="stroke-zinc-300 dark:stroke-zinc-600" stroke-width="0.75" fill="none"></path></pattern><rect width="800" height="400" fill="url(#grid)"></rect><g transform="translate(200, 160)"><path d="M 0 -60 L 120 0 L 0 60 L -120 0 Z" class="fill-white dark:fill-zinc-900 stroke-zinc-300 dark:stroke-zinc-600"></path><path d="M 0 60 L 120 0 L 120 120 L 0 180 Z" class="fill-zinc-50 dark:fill-zinc-900 stroke-zinc-300 dark:stroke-zinc-600"></path><path d="M 0 60 L 0 180 L -120 120 L -120 0 Z" class="fill-zinc-100 dark:fill-zinc-800 stroke-zinc-300 dark:stroke-zinc-600"></path></g><g transform="translate(600, 58)"><path d="M 0 -60 L 120 0 L 0 60 L -120 0 Z" class="fill-white dark:fill-zinc-900 stroke-zinc-300 dark:stroke-zinc-600"></path><path d="M 0 60 L 120 0 L 120 120 L 0 180 Z" class="fill-zinc-50 dark:fill-zinc-900 stroke-zinc-300 dark:stroke-zinc-600"></path><path d="M 0 60 L 0 180 L -120 120 L -120 0 Z" class="fill-zinc-100 dark:fill-zinc-800 stroke-zinc-300 dark:stroke-zinc-600"></path></g>',5)])])}const Ce=Ae(ls,[["render",rs]]),We=p=>{const k=p/100*5,r=Math.max(0,Math.min(5,k)),l=[],n=Math.floor(r),x=r%1>=.5;for(let D=0;D<5;D++)D<n?l.push("star_full"):D===n&&x?l.push("star_half"):l.push("star_empty");return l},Se=(p,k)=>{try{const r=ce();return!r||!r.state||!r.state.pluginsList?(console.error("App store not available for plugin update"),!1):!p||!p.slug?(console.error("Invalid plugin object for update"),!1):(r.state.pluginsList[p.slug]||(console.warn(`Plugin ${p.slug} not found in store, adding it`),r.state.pluginsList[p.slug]={...p}),r.state.pluginsList[p.slug]={...r.state.pluginsList[p.slug],...k},!0)}catch(r){return console.error("Error updating plugin data:",r),!1}},Ue=T(!1),os=async(p,k)=>{if(!p||!p.slug)return B({title:"Error",message:"Invalid plugin data",type:"error"}),!1;if(!p.has_update)return B({title:"No Update Available",message:"This plugin is already up to date",type:"info"}),!1;Ue.value=!0;try{const l={endpoint:`uixpress/v1/plugin/update/${p.slug.split("/")[0]}`,params:{},type:"POST"},n=await oe(l);return n?n.data&&n.data.success===!1?(B({title:"Update Failed",message:n.data.message||"Plugin update failed",type:"error"}),!1):(B({title:"Plugin updated",message:p.Title||p.Name||"Plugin updated successfully",type:"success"}),Se(p,{has_update:!1,Version:p.new_version||p.Version})||console.warn("Failed to update plugin data in store"),!0):(B({title:"Update Failed",message:"Unable to update plugin. Please try again.",type:"error"}),!1)}catch(r){return console.error("Plugin update error:",r),B({title:"Update Failed",message:"An unexpected error occurred during update",type:"error"}),!1}finally{Ue.value=!1}},Te=T(!1),Ye=async(p,k)=>{Te.value=!0;const r=p.slug.split("/")[0],l={endpoint:`uixpress/v1/plugin/deactivate/${r}`,params:{},type:"POST"},n=await oe(l);if(Te.value=!1,!n)return!1;B({title:(0,window.wp.i18n.__)("Plugin deactivated","uixpress"),message:p.Title,type:"success"}),Se(p,{active:!1});const x=new CustomEvent("uipx-plugin-deactivated",{detail:r});return document.dispatchEvent(x),!0},De=T(!1),Ze=async(p,k)=>{var r;if(!p||!p.slug)return B({title:"Error",message:"Invalid plugin data",type:"error"}),!1;De.value=!0;try{const l=p.slug.split("/")[0],n={endpoint:`uixpress/v1/plugin/activate/${l}`,params:{},type:"POST"},x=await oe(n);if(!x)return B({title:"Activation Failed",message:"Unable to activate plugin. Please try again.",type:"error"}),!1;if(x.data&&x.data.success===!1)return B({title:"Activation Failed",message:x.data.message||"Plugin activation failed",type:"error"}),!1;B({title:"Plugin activated",message:p.Title||p.Name||"Plugin activated successfully",type:"success"}),Se(p,{active:!0,action_links:((r=x.data)==null?void 0:r.action_links)||[]})||console.warn("Failed to update plugin data in store");const L=new CustomEvent("uipx-plugin-activated",{detail:l});return document.dispatchEvent(L),!0}catch(l){return console.error("Plugin activation error:",l),B({title:"Activation Failed",message:"An unexpected error occurred during activation",type:"error"}),!1}finally{De.value=!1}},Re=T(!1),Je=async(p,k)=>{if(!p||!p.slug)return B({title:"Error",message:"Invalid plugin data",type:"error"}),!1;Re.value=!0;try{const l={endpoint:`uixpress/v1/plugin/delete/${p.slug.split("/")[0]}`,params:{},type:"DELETE"},n=await oe(l);return n?n.data&&n.data.success===!1?(B({title:"Deletion Failed",message:n.data.message||"Plugin deletion failed",type:"error"}),!1):(B({title:"Plugin deleted",message:p.Title||p.Name||"Plugin deleted successfully",type:"success"}),Se(p,{deleted:!0})||console.warn("Failed to update plugin data in store"),!0):(B({title:"Deletion Failed",message:"Unable to delete plugin. Please try again.",type:"error"}),!1)}catch(r){return console.error("Plugin deletion error:",r),B({title:"Deletion Failed",message:"An unexpected error occurred during deletion",type:"error"}),!1}finally{Re.value=!1}},cs=async(p,k)=>{const l={endpoint:`uixpress/v1/plugin/toggle-auto-update/${p.slug.split("/")[0]}`,params:{},type:"POST"},n=await oe(l);if(!n)return!1;const x=n.data.auto_update_enabled;return x?B({title:(0,window.wp.i18n.__)("Auto update enabled","uixpress"),message:p.Title,type:"success"}):B({title:(0,window.wp.i18n.__)("Auto update disabled","uixpress"),message:p.Title,type:"success"}),k("update",{auto_update_enabled:x}),!0},us={class:"rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 flex flex-col overflow-hidden shadow relative group cursor-pointer"},ds={class:"w-full aspect-[3.089] bg-zinc-100 border-b border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 overflow-hidden relative"},ps=["src"],gs={class:"p-4 pt-0 -mt-3 flex flex-col gap-2 items-start grow z-[1]"},fs={class:"rounded-lg bg-white dark:bg-zinc-900 p-1 -ml-1 -mt-1"},vs={class:"rounded-md bg-indigo-600 aspect-square h-10 overflow-hidden"},_s=["src"],hs=["innerHTML"],ms=["innerHTML"],xs={key:1,class:"px-3 py-2 bg-green-50 text-green-700 dark:bg-green-950/50 dark:text-green-400 rounded-lg text-sm font-medium"},bs={class:"flex flex-col items-end"},ws={class:"flex flex-row items-center text-orange-600 dark:text-orange-400 text-sm"},ks={class:"text-zinc-500 text-xs"},ys={key:0,class:"absolute top-0 left-0 right-0 bottom-0 bg-zinc-900/50 flex flex-col items-center place-content-center justify-center z-[100]"},zs={__name:"plugin-repo-card",props:{plugin:{type:Object,required:!0},isInstalled:{type:Boolean,default:!1}},emits:["update"],setup(p,{emit:k}){const r=ce(),l=p;T({});const n=T(!1),x=Z(()=>{var b;if((b=l.plugin)!=null&&b.icons){const h=l.plugin.icons;return h["2x"]||h["1x"]||h.default}return`https://www.google.com/s2/favicons?domain=${l.plugin.PluginURI||l.plugin.AuthorURI}&sz=400`}),D=Z(()=>{var b;if((b=l.plugin)!=null&&b.banners){const h=l.plugin.banners;return h.low||h.high||null}return null});Z(()=>{let b=[];for(let h in r.state.pluginsList){const H=r.state.pluginsList[h];!H.active||H.deleted||(H.slug=h,H.splitSlug=H.slug?H.slug.split("/")[0]:h,b.push(H))}return b});const L=async()=>{n.value=!0;const b={endpoint:`uixpress/v1/plugin/install-repo/${l.plugin.slug}`,params:{},type:"POST"},h=await oe(b);if(n.value=!1,!h)return!1;B({title:(0,window.wp.i18n.__)("Plugin installed","uixpress"),message:l.plugin.name,type:"success"}),h.data.plugin.icons=l.plugin.icons,h.data.plugin.banners=l.plugin.banners,r.state.pluginsList[h.data.plugin.slug]=h.data.plugin};return(b,h)=>(i(),o("div",us,[e("div",ds,[D.value?(i(),o("img",{key:0,src:D.value,class:"w-full h-full object-cover object-center"},null,8,ps)):(i(),E(Ce,{key:1})),h[1]||(h[1]=e("div",{class:"absolute bottom-0 right-0 left-0 h-2/3 bg-gradient-to-t from-zinc-900/20 to-transparent"},null,-1))]),e("div",gs,[e("div",fs,[e("div",vs,[e("img",{src:x.value,class:"w-full h-full object-cover"},null,8,_s)])]),e("div",{class:"text-zinc-900 dark:text-zinc-100 font-semibold",innerHTML:p.plugin.name},null,8,hs),e("div",{class:"text-zinc-500 dark:text-zinc-400 grow line-clamp-3",innerHTML:p.plugin.short_description},null,8,ms)]),e("div",{class:"border-t border-zinc-200 dark:border-zinc-700 p-4 flex flex-row place-content-between items-center",onClick:h[0]||(h[0]=ae(()=>{},["prevent","stop"]))},[e("div",null,[p.isInstalled?(i(),o("div",xs,s(b.__("Installed","uixpress")),1)):(i(),E(re,{key:0,type:"default",class:"text-sm",loading:n.value,onClick:L},{default:O(()=>[se(s(b.__("Install","uixpress")),1)]),_:1},8,["loading"]))]),e("div",bs,[e("div",ws,[(i(!0),o(Q,null,ee(G(We)(p.plugin.rating),H=>(i(),E(V,{icon:H,class:ge(H=="star_empty"?"opacity-50":"")},null,8,["icon","class"]))),256))]),e("div",ks,[e("strong",null,s(Intl.NumberFormat().format(p.plugin.active_installs)),1),se(" "+s(b.__("Active installs","uixpress")),1)])])]),b.deleting||b.autoUpdating?(i(),o("div",ys,[...h[2]||(h[2]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):M("",!0)]))}},$s={class:"text-xl flex-shrink-0"},Ss={class:"flex flex-row gap-2 flex-shrink-0"},Ms={class:"relative flex grow"},Ps=["placeholder"],Ls={class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1"},Ts={key:0,class:"absolute top-0 right-0 h-full flex flex-col place-content-center p-1"},Ds={class:"p-1 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-400 hover:text-zinc-900 cursor-pointer"},Rs={class:"grid md:grid-cols-2 gap-6 grid-cols-1 overflow-y-auto flex-1 min-h-0",style:{"grid-auto-rows":"max-content"}},Cs={class:"rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 flex flex-col overflow-hidden shadow relative group cursor-pointer gap-3 p-4 animate-pulse"},Is={__name:"plugin-repo",setup(p){Le.extend(Ne);const k=ce(),r=T(""),l=T(null);T([]);const n=T(!0),x=T({page:1,per_page:20,pages:0}),D=T([]);T(null);const L=be(),b=we(),h=T("popularity"),H={name:{label:(0,window.wp.i18n.__)("Name","uixpress"),value:"name"},slug:{label:(0,window.wp.i18n.__)("Slug","uixpress"),value:"Slug"},rating:{label:(0,window.wp.i18n.__)("Rating","uixpress"),value:"rating"},popularity:{label:(0,window.wp.i18n.__)("Popularity","uixpress"),value:"popularity"},downloaded:{label:(0,window.wp.i18n.__)("Downloaded","uixpress"),value:"downloaded"},active_installs:{label:(0,window.wp.i18n.__)("Active installs","uixpress"),value:"active_installs"},last_updated:{label:(0,window.wp.i18n.__)("Last updated","uixpress"),value:"last_updated"}},U=async()=>{n.value=!0;const u=await(await fetch(`https://api.wordpress.org/plugins/info/1.2/?action=query_plugins&page=${x.value.page}&per_page=${x.value.per_page}&search=${r.value}&orderby=${h.value}&fields=icons,banners,short_description,last_updated,description,installation,faq,sections,screenshots`)).json();n.value=!1,D.value=u.plugins;const{pages:W}=u.info;x.value.pages=W},Y=R=>{if(!(R!=null&&R.slug))return!1;const u=R.slug.split("/")[0];for(let W in k.state.pluginsList){const A=k.state.pluginsList[W];if(!A||A.deleted)continue;const _=A.splitSlug||(A.slug?A.slug.split("/")[0]:W.split("/")[0]);if((R.slug==_||u==_||R.slug==A.slug)&&!A.deleted)return A}return!1},j=R=>{R!=null&&R.slug&&L.push({path:`/plugin-search/${R.slug}`,query:{}})},q=Z(()=>b.matched.some(({name:R})=>R=="plugin-inspect"));return _e(()=>x.value.page,U),_e(()=>r.value,(R,u)=>{!R&&u!=""&&U()}),_e(()=>h.value,U),xe(()=>{l.value=!0}),U(),(R,u)=>{const W=fe("RouterView");return i(),E(je,{modelValue:l.value,"onUpdate:modelValue":u[5]||(u[5]=A=>l.value=A),showHeader:!1,size:"large",onClose:u[6]||(u[6]=A=>G(L).push({path:"/",query:{...G(b).query}}))},{default:O(()=>[e("div",{class:ge(["w-full max-w-screen flex flex-col gap-6 p-6 h-full max-h-full overflow-hidden",q.value?"":"p-6"])},[q.value?(i(),E(W,{key:1,id:"plugin-inspect"})):(i(),o(Q,{key:0},[e("div",$s,s(R.__("Add plugin","uixpress")),1),e("div",Ss,[e("div",Ms,[Be(e("input",{"onUpdate:modelValue":u[0]||(u[0]=A=>r.value=A),class:"px-2 py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm bg-transparent px-8",placeholder:R.__("Search plugins","uixpress"),onKeyup:u[1]||(u[1]=Ke(()=>{x.value.page=1,U()},["enter"]))},null,40,Ps),[[Ve,r.value]]),e("div",Ls,[$(V,{icon:"search",class:"text-lg text-zinc-400"})]),r.value?(i(),o("div",Ts,[e("div",Ds,[$(V,{icon:"return",class:"text-base"})])])):M("",!0)]),M("",!0),$(re,{type:"default",disabled:x.value.page<=1,onClick:u[3]||(u[3]=A=>x.value.page--)},{default:O(()=>[$(V,{icon:"chevron_left"})]),_:1},8,["disabled"]),$(re,{type:"default",disabled:x.value.page>=x.value.pages,onClick:u[4]||(u[4]=A=>x.value.page++)},{default:O(()=>[$(V,{icon:"chevron_right"})]),_:1},8,["disabled"])]),e("div",Rs,[n.value?(i(),o(Q,{key:0},ee(20,A=>e("div",Cs,[...u[7]||(u[7]=[e("div",{class:"w-10 h-10 rounded-lg bg-zinc-100 dark:bg-zinc-800"},null,-1),e("div",{class:"w-2/3 h-3 rounded bg-zinc-100 dark:bg-zinc-800"},null,-1),e("div",{class:"w-3/4 h-3 rounded bg-zinc-100 dark:bg-zinc-800"},null,-1),e("div",{class:"w-1/3 h-6 rounded bg-zinc-100 dark:bg-zinc-800"},null,-1)])])),64)):(i(!0),o(Q,{key:1},ee(D.value,A=>(i(),E(zs,{key:A.slug,plugin:A,"is-installed":!!Y(A),onClick:ae(_=>j(A),["stop","prevent"])},null,8,["plugin","is-installed","onClick"]))),128))])],64))],2)]),_:1},8,["modelValue"])}}},Hs={class:"flex flex-col gap-4"},Us={class:"text-zinc-900 dark:text-zinc-100 font-semibold text-sm"},ne={__name:"index",props:{startOpen:{default:()=>!1,type:Boolean},title:{default:()=>"",type:String}},setup(p){const k=p,r=T(!1);return k.startOpen&&(r.value=!0),(l,n)=>(i(),o("div",Hs,[e("div",{class:"flex flex-row place-content-between cursor-pointer",onClick:n[0]||(n[0]=x=>r.value=!r.value)},[e("div",Us,s(p.title),1),$(V,{icon:r.value?"remove":"add"},null,8,["icon"])]),$($e,null,{default:O(()=>[r.value?Xe(l.$slots,"default",{key:0}):M("",!0)]),_:3})]))}},As={key:0,class:"flex flex-col translate-x-0 h-screen min-h-screen max-h-screen overflow-hidden"},Fs={key:1,class:"p-8"},Os={class:"bg-rose-500/30 rounded-lg p-4"},Bs={key:2,class:"flex flex-col translate-x-0 h-screen min-h-screen max-h-screen overflow-hidden"},Vs={class:"w-full aspect-[3.089] bg-zinc-100 border-b border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 overflow-hidden relative shrink-0"},js=["src"],qs={class:"absolute top-0 left-0 p-3 pl-8 z-[99]"},Es={class:"p-8 py-0 -mt-8 flex flex-col gap-2 items-start z-[1] shrink-0"},Ns={class:"rounded-lg bg-white dark:bg-zinc-900 p-1 -ml-1 -mt-1"},Ws={class:"rounded-md bg-indigo-600 aspect-square h-16 overflow-hidden"},Ys=["src"],Zs=["innerHTML"],Js=["innerHTML"],Qs={class:"p-8 py-6 grid grid-cols-5 gap-2 shrink-0"},Gs={class:"flex flex-col items-center h-full bg-zinc-100 dark:bg-zinc-800 rounded-lg p-2"},Ks={class:"flex flex-row items-center text-orange-600 dark:text-orange-400 text-sm grow"},Xs={class:"text-xs text-zinc-500"},en={class:"flex flex-col items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-2"},tn={class:"text-xs text-zinc-500"},sn={class:"flex flex-col items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-2"},nn={class:"text-xs text-zinc-500"},ln={class:"flex flex-col items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-2"},an={class:"text-xs text-zinc-500"},rn={class:"flex flex-col items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-2"},on={class:"text-xs text-zinc-500"},cn={class:"px-8 flex flex-col gap-6 grow overflow-auto"},un=["innerHTML"],dn={class:"grid grid-cols-2 gap-6"},pn=["src","onClick"],gn=["innerHTML"],fn=["innerHTML"],vn=["innerHTML"],_n=["innerHTML"],hn={class:"sticky bottom-0 left-0 right-0 p-8 bg-white dark:bg-zinc-900 border-t border-zinc-200 dark:border-zinc-700 flex flex-row place-content-end gap-2"},mn={key:0,class:"fixed top-0 left-0 right-0 h-screen bg-zinc-900/30 z-99 flex flex-col place-items-center justify-center items-center p-24"},xn=["src"],bn={class:"absolute top-0 right-0 p-6"},wn={key:0,class:"absolute top-1/2 -translate-y-1/2 left-0 p-6"},kn={key:1,class:"absolute top-1/2 -translate-y-1/2 right-0 p-6"},yn={__name:"plugin-inspect",setup(p){Le.extend(Ne);const k=ce();xe(()=>{if(k.state.pluginBase){const _=`${k.state.pluginBase}assets/icons/star_full.svg`,t="uix-plugin-star-mask-style";let g=document.getElementById(t);g||(g=document.createElement("style"),g.id=t,document.head.appendChild(g)),g.textContent=`
      .wporg-ratings .star {
        mask: url("${_}") center center / contain no-repeat;
        -webkit-mask: url("${_}") center center / contain no-repeat;
      }
    `}}),T(""),T([]);const r=T(!0);T([]);const l=T(null),n=T(!1);T(null),be();const x=we(),D=T(!1),L=T(!1),b=T(1),h=async()=>{r.value=!0,D.value=!1;const _=await fetch(`https://api.wordpress.org/plugins/info/1.2/?action=plugin_information&slug=${x.params.slug}&fields=icons,banners,short_description,last_updated,description,installation,faq,sections,screenshots,downloaded,reviews`);if(r.value=!1,!_.ok){D.value=!0;return}const t=await _.json();if(t.error){D.value=!0;return}D.value=!1,l.value=t},H=Z(()=>{var _;if((_=l.value)!=null&&_.icons){const t=l.value.icons;return t["2x"]||t["1x"]||t.default}return`https://www.google.com/s2/favicons?domain=${l.value.homepage}&sz=400`}),U=Z(()=>{var _;if((_=l.value)!=null&&_.banners){const t=l.value.banners;return t.low||t.high||null}return null}),Y=Z(()=>{for(let _ in k.state.pluginsList){const t=k.state.pluginsList[_];if((l.value.slug==t.splitSlug||l.value.slug==t.slug)&&!t.deleted)return t}return!1}),j=Z(()=>{for(let _ in k.state.pluginsList){const t=k.state.pluginsList[_];if((l.value.slug==t.splitSlug||l.value.slug==t.slug)&&!t.deleted&&t.active)return t}return!1}),q=Z(()=>{for(let _ in k.state.pluginsList){const t=k.state.pluginsList[_];if(l.value.slug==t.splitSlug||l.value.slug==t.slug)return t}return l.value}),R=async _=>{n.value=!0;const t={endpoint:`uixpress/v1/plugin/install-repo/${_.slug}`,params:{},type:"POST"},g=await oe(t);if(n.value=!1,!g)return!1;B({title:(0,window.wp.i18n.__)("Plugin installed","uixpress"),message:_.name,type:"success"}),g.data.plugin.icons=_.icons,g.data.plugin.banners=_.banners,l.value.splitSlug=l.value.slug,l.value.slug=g.data.plugin.slug,k.state.pluginsList[g.data.plugin.slug]=g.data.plugin},u=()=>{const _=Object.keys(l.value.screenshots).length;b.value===1?b.value=_:b.value--},W=()=>{const _=Object.keys(l.value.screenshots).length;b.value===_?b.value=1:b.value++},A=Z(()=>Object.keys(l.value.screenshots).length);return Oe(()=>{x.params.slug&&h()}),(_,t)=>{const g=fe("RouterLink");return i(),o(Q,null,[$($e,null,{default:O(()=>[r.value?(i(),o("div",As,[...t[6]||(t[6]=[e("div",{class:"w-full aspect-[3.089] bg-zinc-100 border-b border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 overflow-hidden relative shrink-0 animate-pulse"},null,-1),e("div",{class:"p-8 py-0 -mt-8 flex flex-col gap-2 items-start z-[1] shrink-0 animate-pulse"},[e("div",{class:"rounded-lg bg-white dark:bg-zinc-900 p-1 -ml-1 -mt-1"},[e("div",{class:"rounded-md bg-indigo-600 aspect-square h-16 overflow-hidden"})]),e("div",{class:"rounded-lg h-10 bg-zinc-100 dark:bg-zinc-800 animate-pulse w-2/3"}),e("div",{class:"rounded-lg h-16 bg-zinc-100 dark:bg-zinc-800 animate-pulse w-full"})],-1)])])):!r.value&&D.value?(i(),o("div",Fs,[e("div",Os,s(_.__("There was an error fetching this plugins information","uixpress")),1)])):l.value&&!r.value?(i(),o("div",Bs,[e("div",Vs,[U.value?(i(),o("img",{key:0,src:U.value,class:"w-full h-full object-cover object-center"},null,8,js)):(i(),E(Ce,{key:1})),e("div",qs,[e("button",{class:"p-1 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100",onClick:t[0]||(t[0]=ae(P=>l.value=null,["prevent","stop"]))},[$(g,{to:"/plugin-search",class:"flex flex-row items-center gap-1"},{default:O(()=>[$(V,{icon:"chevron_left",class:"text-xl"}),e("span",null,s(_.__("Back to plugins","uixpress")),1)]),_:1})])]),t[7]||(t[7]=e("div",{class:"absolute bottom-0 right-0 left-0 h-2/3 bg-gradient-to-t from-zinc-900/20 to-transparent"},null,-1))]),e("div",Es,[e("div",Ns,[e("div",Ws,[e("img",{src:H.value,class:"w-full h-full object-cover"},null,8,Ys)])]),e("div",{class:"text-zinc-900 dark:text-zinc-100 font-semibold text-xl",innerHTML:l.value.name},null,8,Zs),e("div",{class:"text-zinc-500 dark:text-zinc-400 grow line-clamp-3",innerHTML:l.value.short_description},null,8,Js)]),e("div",Qs,[e("div",Gs,[e("div",Ks,[(i(!0),o(Q,null,ee(G(We)(l.value.rating),P=>(i(),E(V,{icon:P,class:ge(P=="star_empty"?"opacity-50":"")},null,8,["icon","class"]))),256))]),e("span",Xs,s(_.__("Rating","uixpress")),1)]),e("div",en,[e("span",null,s(Intl.NumberFormat().format(l.value.active_installs)),1),e("span",tn,s(_.__("Installs","uixpress")),1)]),e("div",sn,[e("span",null,s(Intl.NumberFormat().format(l.value.downloaded)),1),e("span",nn,s(_.__("Downloads","uixpress")),1)]),e("div",ln,[e("span",null,s(l.value.version),1),e("span",an,s(_.__("Version","uixpress")),1)]),e("div",rn,[e("span",null,s(G(Le)(l.value.last_updated).fromNow()),1),e("span",on,s(_.__("Last updated","uixpress")),1)])]),e("div",cn,[t[8]||(t[8]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("Description","uixpress")},{default:O(()=>[e("div",{class:"max-w-full uix-plugin-description",innerHTML:l.value.description},null,8,un)]),_:1},8,["title"]),t[9]||(t[9]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("Screenshots","uixpress")},{default:O(()=>[e("div",dn,[(i(!0),o(Q,null,ee(l.value.screenshots,(P,a)=>(i(),o("img",{src:P.src,class:"rounded-xl w-full cursor-pointer",onClick:()=>{b.value=Number(a),L.value=!0}},null,8,pn))),256))])]),_:1},8,["title"]),t[10]||(t[10]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("Installation","uixpress")},{default:O(()=>[e("div",{class:"max-w-full uix-plugin-description",innerHTML:l.value.sections.installation},null,8,gn)]),_:1},8,["title"]),t[11]||(t[11]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("FAQ","uixpress")},{default:O(()=>[e("div",{class:"max-w-full uix-plugin-description",innerHTML:l.value.sections.faq},null,8,fn)]),_:1},8,["title"]),t[12]||(t[12]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("Reviews","uixpress")},{default:O(()=>[e("div",{class:"max-w-full uix-plugin-description flex flex-col gap-3",innerHTML:l.value.sections.reviews},null,8,vn)]),_:1},8,["title"]),t[13]||(t[13]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),$(ne,{title:_.__("Changelog","uixpress")},{default:O(()=>[e("div",{class:"max-w-full uix-plugin-description",innerHTML:l.value.sections.changelog},null,8,_n)]),_:1},8,["title"])]),e("div",hn,[Y.value?M("",!0):(i(),E(re,{key:0,type:"primary",onClick:t[1]||(t[1]=ae(P=>R(l.value),["stop","prevent"])),loading:n.value},{default:O(()=>[se(s(_.__("Install plugin","uixpress")),1)]),_:1},8,["loading"])),Y.value&&!j.value?(i(),E(re,{key:1,type:"danger",onClick:t[2]||(t[2]=ae(P=>G(Je)(q.value),["stop","prevent"])),loading:G(Re)},{default:O(()=>[se(s(_.__("Delete","uixpress")),1)]),_:1},8,["loading"])):M("",!0),Y.value&&j.value?(i(),E(re,{key:2,type:"primary",onClick:t[3]||(t[3]=ae(P=>G(Ye)(q.value),["stop","prevent"])),loading:G(Te)},{default:O(()=>[se(s(_.__("Deactivate","uixpress")),1)]),_:1},8,["loading"])):M("",!0),Y.value&&!j.value?(i(),E(re,{key:3,type:"primary",onClick:t[4]||(t[4]=ae(P=>G(Ze)(q.value),["stop","prevent"])),loading:G(De)},{default:O(()=>[se(s(_.__("Activate","uixpress")),1)]),_:1},8,["loading"])):M("",!0)])])):M("",!0)]),_:1}),l.value&&!r.value&&L.value?(i(),o("div",mn,[$($e,{name:"slide-fade"},{default:O(()=>[e("img",{src:l.value.screenshots[b.value].src,class:"rounded-xl object-contain max-w-full max-h-full"},null,8,xn)]),_:1}),e("div",bn,[e("button",{class:"rounded-full p-2 text-zinc-200 hover:text-white transition-colors bg-zinc-900/50 hover:bg-zinc-900/80 cursor-pointer",onClick:t[5]||(t[5]=ae(P=>L.value=!1,["stop","prevent"]))},[$(V,{icon:"close",class:"text-2xl"})])]),A.value?(i(),o("div",wn,[e("button",{class:"rounded-full p-2 text-zinc-200 hover:text-white transition-colors bg-zinc-900/50 hover:bg-zinc-900/80 cursor-pointer",onClick:u},[$(V,{icon:"chevron_left",class:"text-2xl"})])])):M("",!0),A.value?(i(),o("div",kn,[e("button",{class:"rounded-full p-2 text-zinc-200 hover:text-white transition-colors bg-zinc-900/50 hover:bg-zinc-900/80 cursor-pointer",onClick:W},[$(V,{icon:"chevron_right",class:"text-2xl"})])])):M("",!0)])):M("",!0)],64)}}},zn={class:"w-[600px] max-w-screen p-6"},$n={class:"flex flex-col gap-6"},Sn={class:"flex flex-row items-center gap-3"},Mn={class:"rounded-md bg-indigo-600 aspect-square h-8 overflow-hidden"},Pn=["src"],Ln=["innerHTML"],Tn={class:"text-sm text-zinc-500 dark:text-zinc-400"},Dn={key:0,class:"grid grid-cols-3 gap-3 animate-pulse"},Rn={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800 h-[66.5px]"},Cn={class:"grid grid-cols-3 gap-3"},In={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},Hn={class:"text-sm whitespace-nowrap"},Un={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},An={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},Fn={class:"text-sm whitespace-nowrap"},On={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},Bn={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},Vn={class:"text-sm whitespace-nowrap"},jn={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},qn={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},En={class:"text-sm whitespace-nowrap"},Nn={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},Wn={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},Yn={class:"text-sm whitespace-nowrap"},Zn={class:""},Jn={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400 mr-1"},Qn={class:"text-zinc-500"},Gn={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},Kn={class:"text-sm whitespace-nowrap"},Xn={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},ei={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},ti={class:"text-sm whitespace-nowrap"},si={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},ni={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},ii={class:"text-sm whitespace-nowrap"},li={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},ai={class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800"},ri={class:"text-sm whitespace-nowrap"},oi={class:"font-semibold text-xl text-indigo-500 dark:text-indigo-400"},ci={class:"flex flex-col gap-2 pl-3"},ui={class:"grid grid-cols-4 max-w-full gap-3 font-semibold mb-3"},di={class:"text-sm text-zinc-500"},pi={class:"text-sm text-zinc-500"},gi={class:"text-sm col-span-2 text-zinc-500"},fi={class:"grid grid-cols-4 max-w-full gap-3"},vi={class:"truncate"},_i={class:""},hi={class:"text-sm truncate col-span-2"},mi={key:1,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},xi={class:"flex flex-col gap-2 pl-3"},bi={class:"grid grid-cols-4 max-w-full gap-3 font-semibold mb-3"},wi={class:"text-sm text-zinc-500"},ki={class:"text-sm text-zinc-500"},yi={class:"text-sm col-span-2 text-zinc-500"},zi={class:"grid grid-cols-4 max-w-full gap-3"},$i={class:"truncate"},Si={class:""},Mi={class:"text-sm truncate col-span-2"},Pi={key:3,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},Li={class:"flex flex-col gap-2 pl-3"},Ti={class:"rounded-lg bg-zinc-100 p-2 overflow-auto"},Di={class:"text-sm text-zinc-500 pl-2 mb-2"},Ri={key:5,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},Ci={class:"flex flex-col gap-2 pl-3"},Ii={class:"grid grid-cols-8 max-w-full gap-3 font-semibold mb-3"},Hi={class:"text-sm truncate col-span-2"},Ui={class:"text-sm truncate col-span-2"},Ai={class:"text-sm truncate col-span-3"},Fi={class:"text-sm truncate text-right"},Oi={class:"grid grid-cols-8 max-w-full gap-3"},Bi={class:"text-sm text-zinc-500 truncate col-span-2"},Vi={class:"text-sm text-zinc-500 truncate col-span-2"},ji={class:"text-sm text-zinc-500 truncate col-span-3"},qi={class:"text-sm text-zinc-500 truncate text-right"},Ei={key:7,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},Ni={class:"flex flex-col gap-2 pl-3"},Wi={class:"grid grid-cols-4 max-w-full gap-3 font-semibold mb-3"},Yi={class:"text-sm text-zinc-500"},Zi={class:"text-sm text-zinc-500"},Ji={class:"text-sm col-span-2 text-zinc-500"},Qi={class:"grid grid-cols-4 max-w-full gap-3"},Gi={class:""},Ki={class:""},Xi={class:"text-sm truncate col-span-2"},el={key:9,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},tl={class:"flex flex-col gap-2 pl-3"},sl={class:"grid grid-cols-4 max-w-full gap-3 font-semibold mb-3"},nl={class:"text-sm text-zinc-500"},il={class:"text-sm text-zinc-500"},ll={class:"text-sm col-span-2 text-zinc-500"},al={class:"grid grid-cols-4 max-w-full gap-3"},rl={class:""},ol={class:""},cl={class:"text-sm truncate col-span-2"},ul={key:11,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},dl={class:"flex flex-col gap-2 pl-3"},pl={class:"grid grid-cols-4 max-w-full gap-3 font-semibold mb-3"},gl={class:"text-sm text-zinc-500"},fl={class:"text-sm col-span-2 text-zinc-500"},vl={class:"text-sm text-zinc-500 text-right"},_l={class:"grid grid-cols-4 max-w-full gap-3"},hl={class:""},ml={class:"col-span-2"},xl={class:"text-sm truncate text-right"},bl={key:13,class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},wl={__name:"plugin-performance",setup(p){const k=ce(),r=T({}),l=T(null),n=T(!0),x=be(),D=we(),L=T("frontend"),b={frontend:{label:(0,window.wp.i18n.__)("Frontend performance","uixpress"),value:"frontend"},backend:{label:(0,window.wp.i18n.__)("Backend performance","uixpress"),value:"backend"}},h=(0,window.wp.i18n.__)("These metrics represent plugin performance during a home page load. While this provides valuable insight into plugin behavior, actual performance may vary across different pages and user interactions.","uixpress"),H=(0,window.wp.i18n.__)("These metrics represent plugin performance during a admin dashboard page load. While this provides valuable insight into plugin behavior, actual performance may vary across different pages and user interactions.","uixpress"),U=t=>{l.value&&(l.value.contains(t.target)||x.push({path:"/",query:{}}))},Y=async()=>{n.value=!0;const g=`${L.value!=="backend"?k.state.siteURL:k.state.adminUrl}?collect_plugin_metrics=1&plugin_slug=${D.params.slug}`,P=await fetch(g);if(n.value=!1,!P.ok)try{const F=await P.json();return B({type:"error",title:"Unable to connect",message:F.message||F.error})}catch{return B({type:"error",title:"Unable to connect",message:"Unable to connect to remote services at this time"})}const a=await P.text(),w=new DOMParser().parseFromString(a,"text/html").getElementById("plugin-metrics-data");if(!w){B({type:"error",title:"No metrics found",message:"Could not find metrics data in the response"});return}const z=JSON.parse(w.textContent);r.value=z},j=t=>{if(t===0||!t)return 0;if(t<1)return`${(t*1e3).toFixed(2)}ms`;if(t<60)return`${t.toFixed(2)}s`;const g=Math.floor(t/60),P=t%60;return`${g}m ${P.toFixed(2)}s`},q=t=>{if(!t||t===0)return"0 B";const g=["B","KB","MB","GB"],P=1024,a=Math.floor(Math.log(t)/Math.log(P)),c=Math.min(a,g.length-1),m=t/Math.pow(P,c),w=c===0?0:c===1?1:2;return`${m.toFixed(w)} ${g[c]}`},R=Z(()=>{for(let t in k.state.pluginsList)if(k.state.pluginsList[t].splitSlug==D.params.slug)return k.state.pluginsList[t]}),u=Z(()=>{for(let t in r.value)if(r.value[t].splitSlug==D.params.slug)return r.value[t]}),W=Z(()=>{const t=u.value;let g=0;for(let P of t.assets.scripts)g+=P.size;for(let P of t.assets.styles)g+=P.size;return q(g)}),A=Z(()=>{var t;if((t=R.value)!=null&&t.icons){const g=R.value.icons;return g["2x"]||g["1x"]||g.default}return`https://www.google.com/s2/favicons?domain=${R.value.PluginURI||R.value.AuthorURI}&sz=400`}),_=Z(()=>{const t=u.value.metrics.total_memory_allocated,g=u.value.metrics.global_peak_memory;return`${(t/g*100).toFixed(2)}%`});return xe(()=>{Y()}),_e(()=>L.value,Y),(t,g)=>{const P=fe("RouterLink");return i(),o("div",{class:"fixed top-0 left-0 right-0 bottom-0 bg-zinc-900/20 dark:bg-zinc-900/60 flex flex-row place-content-end z-[99999]",onClick:U},[e("div",{ref_key:"panel",ref:l,class:"h-screen max-h-screen overflow-auto bg-white dark:bg-zinc-900 border-l border-zinc-200 dark:border-zinc-700 max-w-full relative shadow-lg rounded-tl-lg rounded-bl-lg relative max-w-full dark:shadow-zinc-950"},[e("div",zn,[e("div",$n,[e("div",Sn,[e("div",Mn,[e("img",{src:A.value,class:"w-full h-full object-cover"},null,8,Pn)]),e("div",{class:"text-xl text-zinc-900 dark:text-zinc-100 grow",innerHTML:R.value.Title},null,8,Ln),$(P,{to:"/"},{default:O(()=>[$(re,{type:"transparent"},{default:O(()=>[$(V,{icon:"close",class:"text-lg"})]),_:1})]),_:1})]),$(dt,{options:b,modelValue:L.value,"onUpdate:modelValue":g[0]||(g[0]=a=>L.value=a),onClick:g[1]||(g[1]=ae(()=>{},["stop"]))},null,8,["modelValue"]),e("div",Tn,s(L.value=="frontend"?G(h):G(H)),1),n.value?(i(),o("div",Dn,[(i(),o(Q,null,ee(9,a=>e("div",Rn)),64)),g[2]||(g[2]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3 col-span-3"},null,-1)),g[3]||(g[3]=e("div",{class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800 h-[66.5px] col-span-3"},null,-1)),g[4]||(g[4]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3 col-span-3"},null,-1)),g[5]||(g[5]=e("div",{class:"p-3 rounded-lg flex flex-col gap-1 grow transition-all bg-zinc-100 dark:bg-zinc-800 h-[66.5px] col-span-3"},null,-1))])):R.value&&u.value?(i(),o(Q,{key:1},[e("div",Cn,[e("div",In,[e("div",Hn,s(t.__("Total Queries","uixpress")),1),e("div",Un,s(u.value.metrics.query_count||0),1)]),e("div",An,[e("div",Fn,s(t.__("Query time","uixpress")),1),e("div",On,s(j(u.value.metrics.query_time)),1)]),e("div",Bn,[e("div",Vn,s(t.__("Total hooks","uixpress")),1),e("div",jn,s(u.value.metrics.hook_count||0),1)]),e("div",qn,[e("div",En,s(t.__("Execution time","uixpress")),1),e("div",Nn,s(j(u.value.metrics.execution_time)),1)]),e("div",Wn,[e("div",Yn,s(t.__("Memory usage","uixpress")),1),e("div",Zn,[e("span",Jn,s(q(u.value.metrics.total_memory_allocated)),1),e("span",Qn,"("+s(_.value)+")",1)])]),e("div",Gn,[e("div",Kn,s(t.__("Total scripts","uixpress")),1),e("div",Xn,s(u.value.assets.scripts.length),1)]),e("div",ei,[e("div",ti,s(t.__("Total styles","uixpress")),1),e("div",si,s(u.value.assets.styles.length),1)]),e("div",ni,[e("div",ii,s(t.__("Total asset size","uixpress")),1),e("div",li,s(W.value),1)]),e("div",ai,[e("div",ri,s(t.__("HTTP requests","uixpress")),1),e("div",oi,s(u.value.http_requests.length),1)])]),g[6]||(g[6]=e("div",{class:"w-full border-t border-zinc-200 dark:border-zinc-700 my-3"},null,-1)),u.value.assets.scripts.length?(i(),E(ne,{key:0,title:`${t.__("Scripts","uixpress")} (${u.value.assets.scripts.length})`},{default:O(()=>[e("div",ci,[e("div",ui,[e("div",di,s(t.__("Handle","uixpress")),1),e("div",pi,s(t.__("Size","uixpress")),1),e("div",gi,s(t.__("File","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.assets.scripts,a=>(i(),o("div",fi,[e("div",vi,s(a.handle),1),e("div",_i,s(q(a.size)),1),e("div",hi,s(a.src),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.assets.scripts.length?(i(),o("div",mi)):M("",!0),u.value.assets.styles.length?(i(),E(ne,{key:2,title:`${t.__("Styles","uixpress")} (${u.value.assets.styles.length})`},{default:O(()=>[e("div",xi,[e("div",bi,[e("div",wi,s(t.__("Handle","uixpress")),1),e("div",ki,s(t.__("Size","uixpress")),1),e("div",yi,s(t.__("File","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.assets.styles,a=>(i(),o("div",zi,[e("div",$i,s(a.handle),1),e("div",Si,s(q(a.size)),1),e("div",Mi,s(a.src),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.assets.styles.length?(i(),o("div",Pi)):M("",!0),u.value.queries.length?(i(),E(ne,{key:4,title:`${t.__("Queries","uixpress")} (${u.value.queries.length})`},{default:O(()=>[e("div",Li,[(i(!0),o(Q,null,ee(u.value.queries,a=>(i(),o("div",null,[e("pre",Ti,[e("code",null,s(a.query),1)]),e("div",Di,s(j(a.time)),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.queries.length?(i(),o("div",Ri)):M("",!0),u.value.hooks.length?(i(),E(ne,{key:6,title:`${t.__("Hooks","uixpress")} (${u.value.hooks.length})`},{default:O(()=>[e("div",Ci,[e("div",Ii,[e("div",Hi,s(t.__("Hook","uixpress")),1),e("div",Ui,s(t.__("Callback","uixpress")),1),e("div",Ai,s(t.__("File","uixpress")),1),e("div",Fi,s(t.__("Priority","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.hooks,a=>(i(),o("div",Oi,[e("div",Bi,s(a.name),1),e("div",Vi,s(a.callback),1),e("div",ji,s(a.file),1),e("div",qi,s(a.priority),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.hooks.length?(i(),o("div",Ei)):M("",!0),u.value.http_requests.length?(i(),E(ne,{key:8,title:`${t.__("HTTP requests","uixpress")} (${u.value.http_requests.length})`},{default:O(()=>[e("div",Ni,[e("div",Wi,[e("div",Yi,s(t.__("Hook","uixpress")),1),e("div",Zi,s(t.__("Method","uixpress")),1),e("div",Ji,s(t.__("URL","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.http_requests,a=>(i(),o("div",Qi,[e("div",Gi,s(a.hook),1),e("div",Ki,s(a.method),1),e("div",Xi,s(a.url),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.http_requests.length?(i(),o("div",el)):M("",!0),u.value.deprecated_calls.length?(i(),E(ne,{key:10,title:`${t.__("Depreciated functions","uixpress")} (${u.value.deprecated_calls.length})`},{default:O(()=>[e("div",tl,[e("div",sl,[e("div",nl,s(t.__("Function","uixpress")),1),e("div",il,s(t.__("Line","uixpress")),1),e("div",ll,s(t.__("File","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.deprecated_calls,a=>(i(),o("div",al,[e("div",rl,s(a.function),1),e("div",ol,s(a.line),1),e("div",cl,s(a.file),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.deprecated_calls.length?(i(),o("div",ul)):M("",!0),u.value.errors.length?(i(),E(ne,{key:12,title:`${t.__("Errors","uixpress")} (${u.value.errors.length})`},{default:O(()=>[e("div",dl,[e("div",pl,[e("div",gl,s(t.__("Type","uixpress")),1),e("div",fl,s(t.__("Message","uixpress")),1),e("div",vl,s(t.__("File","uixpress")),1)]),(i(!0),o(Q,null,ee(u.value.errors,a=>(i(),o("div",_l,[e("div",hl,s(a.type),1),e("div",ml,s(a.message),1),e("div",xl,s(a.file),1)]))),256))])]),_:1},8,["title"])):M("",!0),u.value.errors.length?(i(),o("div",bl)):M("",!0)],64)):M("",!0)])])],512)])}}},kl={key:0,class:"flex-1 flex flex-col"},yl={class:"p-8"},zl={class:"relative h-48 bg-zinc-100 dark:bg-zinc-800 overflow-hidden rounded-xl pb-0 border border-zinc-200 dark:border-zinc-700"},$l=["src"],Sl={class:"absolute bottom-6 left-6"},Ml={class:"w-16 h-16 rounded-xl overflow-hidden bg-white dark:bg-zinc-800 border-2 border-white dark:border-zinc-600 shadow-lg"},Pl=["src"],Ll={class:"p-8 pt-6"},Tl={class:"flex items-start justify-between"},Dl={class:"flex-1"},Rl={class:"flex items-center gap-3 mb-3"},Cl={class:"text-2xl font-medium text-zinc-900 dark:text-zinc-100"},Il={class:"flex items-center gap-2 grow"},Hl={key:0,class:"px-2 py-1 bg-orange-50 text-orange-700 dark:bg-orange-950/50 dark:text-orange-400 rounded text-xs font-medium"},Ul={class:"flex items-center gap-2 ml-6"},Al=["disabled"],Fl={key:0,class:"inline-flex items-center gap-2"},Ol={key:1},Bl=["disabled"],Vl={key:0,class:"inline-flex items-center gap-2"},jl={key:1},ql=["disabled"],El={key:0,class:"inline-flex items-center gap-2"},Nl={key:1},Wl=["disabled"],Yl={class:"flex items-center gap-6 text-sm text-zinc-500 dark:text-zinc-400 mb-4"},Zl=["innerHTML"],Jl=["innerHTML"],Ql={key:1,class:"bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6"},Gl={class:"flex items-start gap-3"},Kl={class:"font-medium text-red-700 dark:text-red-400 mb-2"},Xl={class:"text-sm text-red-600 dark:text-red-400 mb-2"},ea={class:"list-disc pl-4 text-sm text-red-600 dark:text-red-400"},ta={class:"flex flex-wrap gap-3"},sa=["href"],na=["innerHTML"],ia=["href"],la=["href"],aa={class:"flex-1 p-8 overflow-auto"},ra={class:"space-y-8"},oa={key:0},ca={class:"text-base font-medium text-zinc-900 dark:text-zinc-100 mb-4"},ua={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6"},da={key:0},pa={class:"text-zinc-500 dark:text-zinc-500 text-xs uppercase tracking-wide font-medium mb-1"},ga={class:"text-zinc-900 dark:text-zinc-100"},fa={key:1},va={class:"text-zinc-500 dark:text-zinc-500 text-xs uppercase tracking-wide font-medium mb-1"},_a={class:"text-zinc-900 dark:text-zinc-100"},ha={key:2},ma={class:"text-zinc-500 dark:text-zinc-500 text-xs uppercase tracking-wide font-medium mb-1"},xa={class:"text-zinc-900 dark:text-zinc-100"},ba={class:"text-zinc-500 dark:text-zinc-500 text-xs uppercase tracking-wide font-medium mb-1"},wa={class:"text-zinc-900 dark:text-zinc-100"},ka={class:"text-base font-medium text-zinc-900 dark:text-zinc-100 mb-4"},ya={class:"bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-4"},za={class:"flex items-center justify-between"},$a={class:"font-medium text-sm text-zinc-900 dark:text-zinc-100"},Sa={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-1"},Ma={class:"relative inline-flex items-center cursor-pointer"},Pa=["checked","disabled"],La={__name:"plugin-card",props:{modelValue:{},modelModifiers:{}},emits:et(["update"],["update:modelValue"]),setup(p,{expose:k,emit:r}){const l=ce(),n=tt(p,"modelValue"),x=r,D=T(!1),L=T(!1),b=T(!1),h=T(!1),H=T(null),U=T(!1),Y=Z(()=>{var a;if((a=n.value)!=null&&a.icons){const c=n.value.icons;return c["2x"]||c["1x"]||c.default}return`https://www.google.com/s2/favicons?domain=${n.value.PluginURI||n.value.AuthorURI}&sz=400`}),j=Z(()=>{var a;if((a=n.value)!=null&&a.banners){const c=n.value.banners;return c.low||c.high||null}return null}),q=Z(()=>{let a=[];for(let c in l.state.pluginsList){const m=l.state.pluginsList[c];!m.active||m.deleted||(m.slug=c,a.push(m))}return a}),R=Z(()=>{var c;if(!((c=n.value)!=null&&c.RequiresPlugins))return!0;const a=n.value.RequiresPlugins.split(",");if(!a.length)return!0;for(let m of a){if(m=m.trim(),!m)continue;if(!q.value.find(z=>z.splitSlug==m))return!1}return!0}),u=async()=>{var w;if(n.value.banners||n.value.icons||!((w=n.value)!=null&&w.slug))return;const c=n.value.slug.split("/")[0],m=localStorage.getItem(`plugin_data_${c}`);if(m)try{const{data:z,timestamp:F}=JSON.parse(m);if(new Date().getTime()-F<864e5){x("update",{banners:z.banners,icons:z.icons,tags:z.tags,notInRepository:z.notInRepository});return}else localStorage.removeItem(`plugin_data_${c}`)}catch(z){localStorage.removeItem(`plugin_data_${c}`),console.error("Error parsing cached plugin data:",z)}try{const z=await fetch(`https://api.wordpress.org/plugins/info/1.2/?action=plugin_information&slug=${c}&fields=icons`);if(!z.ok){x("update",{notInRepository:!0}),W({notInRepository:!0},c);return}const F=await z.json();W(F,c),x("update",{banners:F.banners,icons:F.icons,tags:F.tags})}catch(z){return x("update",{notInRepository:!0}),W({notInRepository:!0},c),console.error(`Error fetching plugin data for ${c}:`,z),null}},W=(a,c)=>{localStorage.setItem(`plugin_data_${c}`,JSON.stringify({data:{banners:a.banners,icons:a.icons,tags:a.tags,notInRepository:a.notInRepository},timestamp:new Date().getTime()}))},A=async()=>{D.value=!0,await os(n.value),D.value=!1},_=async()=>{L.value=!0,await Ye(n.value),L.value=!1},t=async()=>{b.value=!0,await Ze(n.value),b.value=!1},g=async()=>{U.value=!0,await cs(n.value,x),U.value=!1},P=async()=>{await H.value.show({title:(0,window.wp.i18n.__)("Are you sure?","uixpress"),message:(0,window.wp.i18n.__)("Are you sure you want to delete this plugin? This action cannot be undone.","uixpress"),okButton:(0,window.wp.i18n.__)("Yes, delete it","uixpress")})&&(h.value=!0,await Je(n.value),h.value=!1)};return u(),k({updatePluginBySlug:A,activatePluginBySlug:t,deactivatePluginBySlug:_,deletePluginBySlug:P,toggleAutoUpdate:g}),(a,c)=>{const m=fe("RouterLink");return n.value?(i(),o("div",kl,[e("div",yl,[e("div",zl,[j.value?(i(),o("img",{key:0,src:j.value,class:"w-full h-full object-cover filter-sharp"},null,8,$l)):(i(),E(Ce,{key:1})),c[0]||(c[0]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/20 to-transparent"},null,-1)),e("div",Sl,[e("div",Ml,[e("img",{src:Y.value,class:"w-full h-full object-cover"},null,8,Pl)])])])]),e("div",Ll,[e("div",Tl,[e("div",Dl,[e("div",Rl,[e("h2",Cl,s(n.value.Name),1),e("div",Il,[e("div",{class:ge(["px-2 py-1 rounded text-xs font-medium",n.value.active?"bg-green-50 text-green-700 dark:bg-green-950/50 dark:text-green-400":"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"])},s(n.value.active?a.__("Active","uixpress"):a.__("Inactive","uixpress")),3),n.value.has_update?(i(),o("div",Hl,s(a.__("Update Available","uixpress")),1)):M("",!0)]),e("div",Ul,[n.value.active?M("",!0):(i(),o("button",{key:0,onClick:t,disabled:b.value||!R.value,class:"px-4 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-lg text-sm font-medium hover:bg-zinc-800 dark:hover:bg-zinc-100 transition-colors disabled:opacity-50"},[b.value?(i(),o("span",Fl,[c[1]||(c[1]=e("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),se(" "+s(a.__("Activating...","uixpress")),1)])):(i(),o("span",Ol,s(a.__("Activate","uixpress")),1))],8,Al)),n.value.active?(i(),o("button",{key:1,onClick:_,disabled:L.value,class:"px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50"},[L.value?(i(),o("span",Vl,[c[2]||(c[2]=e("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),se(" "+s(a.__("Deactivating...","uixpress")),1)])):(i(),o("span",jl,s(a.__("Deactivate","uixpress")),1))],8,Bl)):M("",!0),n.value.has_update?(i(),o("button",{key:2,onClick:A,disabled:D.value,class:"px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50"},[D.value?(i(),o("span",El,[c[3]||(c[3]=e("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),se(" "+s(a.__("Updating...","uixpress")),1)])):(i(),o("span",Nl,s(a.__("Update","uixpress")),1))],8,ql)):M("",!0),e("button",{onClick:P,disabled:h.value,class:"p-2 text-zinc-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/50 rounded-lg transition-colors disabled:opacity-50"},[$(V,{icon:"delete",class:"text-base"})],8,Wl)])]),e("div",Yl,[e("span",null,s(a.__("Version","uixpress"))+" "+s(n.value.Version),1),n.value.Author?(i(),o("span",{key:0,innerHTML:n.value.Author},null,8,Zl)):M("",!0)]),n.value.Description?(i(),o("p",{key:0,class:"text-zinc-600 dark:text-zinc-400 leading-relaxed mb-6",innerHTML:n.value.Description},null,8,Jl)):M("",!0),R.value?M("",!0):(i(),o("div",Ql,[e("div",Gl,[$(V,{icon:"warning",class:"text-red-500 mt-0.5 flex-shrink-0"}),e("div",null,[e("div",Kl,s(a.__("Missing Required Plugins","uixpress")),1),e("div",Xl,s(a.__("This plugin requires the following plugins to be installed and active:","uixpress")),1),e("ul",ea,[(i(!0),o(Q,null,ee((n.value.RequiresPlugins||"").split(","),w=>(i(),o("li",{key:w},s(w.trim()),1))),128))])])])])),e("div",ta,[n.value.active&&n.value.action_links&&n.value.action_links.length?(i(!0),o(Q,{key:0},ee(n.value.action_links,w=>(i(),o("a",{key:w.url,href:w.url,class:"inline-flex items-center gap-2 px-3 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-lg hover:bg-zinc-800 dark:hover:bg-zinc-100 transition-colors text-sm font-medium"},[$(V,{icon:"link",class:"text-sm"}),e("span",{innerHTML:w.text},null,8,na)],8,sa))),128)):M("",!0),!n.value.notInRepository&&n.value.slug?(i(),E(m,{key:1,to:`/plugin-search/${n.value.slug.split("/")[0]}`,class:"inline-flex items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors text-sm"},{default:O(()=>[$(V,{icon:"info",class:"text-sm"}),se(" "+s(a.__("Plugin Info","uixpress")),1)]),_:1},8,["to"])):M("",!0),n.value.active&&n.value.slug?(i(),E(m,{key:2,to:`/plugin-performance/${n.value.slug.split("/")[0]}`,class:"inline-flex items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors text-sm"},{default:O(()=>[$(V,{icon:"speed",class:"text-sm"}),se(" "+s(a.__("Performance","uixpress")),1)]),_:1},8,["to"])):M("",!0),n.value.PluginURI?(i(),o("a",{key:3,href:n.value.PluginURI,target:"_blank",class:"inline-flex items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors text-sm"},[$(V,{icon:"link",class:"text-sm"}),se(" "+s(a.__("Plugin Page","uixpress"))+" ",1),$(V,{icon:"open_new",class:"text-xs opacity-60"})],8,ia)):M("",!0),n.value.AuthorURI?(i(),o("a",{key:4,href:n.value.AuthorURI,target:"_blank",class:"inline-flex items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors text-sm"},[$(V,{icon:"person",class:"text-sm"}),se(" "+s(a.__("Author","uixpress"))+" ",1),$(V,{icon:"open_new",class:"text-xs opacity-60"})],8,la)):M("",!0)])])])]),e("div",aa,[e("div",ra,[n.value.RequiresWP||n.value.TestedUpTo||n.value.Network?(i(),o("div",oa,[e("h3",ca,s(a.__("Plugin Information","uixpress")),1),e("div",ua,[n.value.RequiresWP?(i(),o("div",da,[e("div",pa,s(a.__("Requires WordPress","uixpress")),1),e("div",ga,s(n.value.RequiresWP)+"+",1)])):M("",!0),n.value.RequiresPHP?(i(),o("div",fa,[e("div",va,s(a.__("Requires PHP","uixpress")),1),e("div",_a,s(n.value.RequiresPHP)+"+",1)])):M("",!0),n.value.TestedUpTo?(i(),o("div",ha,[e("div",ma,s(a.__("Tested up to","uixpress")),1),e("div",xa,s(n.value.TestedUpTo),1)])):M("",!0),e("div",null,[e("div",ba,s(a.__("Network","uixpress")),1),e("div",wa,s(n.value.Network?a.__("Yes","uixpress"):a.__("No","uixpress")),1)])])])):M("",!0),e("div",null,[e("h3",ka,s(a.__("Settings","uixpress")),1),e("div",ya,[e("div",za,[e("div",null,[e("div",$a,s(a.__("Automatic Updates","uixpress")),1),e("div",Sa,s(a.__("Allow WordPress to update this plugin automatically","uixpress")),1)]),e("label",Ma,[e("input",{type:"checkbox",checked:n.value.auto_update_enabled,onChange:g,disabled:U.value,class:"sr-only peer"},null,40,Pa),c[4]||(c[4]=e("div",{class:"w-10 h-5 bg-zinc-200 peer-focus:outline-none rounded-full peer dark:bg-zinc-700 peer-checked:after:translate-x-5 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-zinc-600 peer-disabled:opacity-50"},null,-1))])])])])])]),$(qe,{ref_key:"confirm",ref:H},null,512)])):M("",!0)}}},Ta={class:"flex-1 flex flex-col h-full max-h-full overflow-hidden"},Da={key:0,class:"flex-1 flex items-center justify-center"},Ra={class:"text-center"},Ca={class:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4"},Ia={class:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2"},Ha={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-4"},Ua={__name:"plugin-details-view",setup(p){const k=ce(),r=we(),l=be(),n=Z(()=>r.params.slug),x=Z(()=>!n.value||!k.state.pluginsList?null:k.state.pluginsList[n.value]),D=L=>{x.value&&(k.state.pluginsList[x.value.slug]={...k.state.pluginsList[x.value.slug],...L})};return _e(()=>{var L,b;return(b=(L=k.state.pluginsList)==null?void 0:L[n.value])==null?void 0:b.deleted},L=>{L&&n.value&&l.push("/")}),(L,b)=>(i(),o("div",Ta,[x.value?(i(),E(La,{key:1,modelValue:G(k).state.pluginsList[n.value],"onUpdate:modelValue":b[0]||(b[0]=h=>G(k).state.pluginsList[n.value]=h),onUpdate:D},null,8,["modelValue"])):(i(),o("div",Da,[e("div",Ra,[e("div",Ca,[$(V,{icon:"extension",class:"text-2xl text-zinc-400"})]),e("h3",Ia,s(L.__("Plugin not found","uixpress")),1),e("p",Ha,s(L.__("The plugin you are looking for could not be found.","uixpress")),1)])]))]))}},Me=st(ft),Aa=[{path:"/",component:Kt,meta:{name:(0,window.wp.i18n.__)("Plugins","uixpress")},children:[{name:"plugin-details",path:":slug",component:Ua},{name:"plugin-search",path:"plugin-search",component:Is,children:[{name:"plugin-inspect",path:":slug",component:yn}]},{name:"plugin-performance",path:"plugin-performance/:slug",component:wl}]}],Fa=at({history:rt(),routes:Aa});Me.use(Fa);const Oa=nt();Me.use(Oa);const Ba=ce();it(Ba,"#uipc-script","#uipc-plugins-script");lt(Me);Me.mount("#uix-plugins-page");
//# sourceMappingURL=plugins.build.DQv7hUjs.js.map
