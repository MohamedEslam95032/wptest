import{r as c,o as me,y as ve,u as ie,Q as De,b as x,d,e as q,f as o,g as F,h as K,i as we,j as e,n as y,l as j,S as Ie,F as oe,G as $e,k as B,m as xe,C as ne,_ as b,t as a,K as Pe,c as te,a as pe,W as Ce,D as re,E as R,O as W,I as Ve,J as Le,s as Te,v as Ee,x as Ae,P as Me}from"./assets/_plugin-vue_export-helper-y4Xv5kKr.js";import{a as _e,u as he,D as Ne,c as Ue,b as je}from"./assets/vue-router-mJSwnJkd.js";import{_ as Re,L as Fe}from"./assets/index-C_FNz6s0.js";import{_ as Be}from"./assets/checkbox-OW0WsXcV.js";import{_ as Oe}from"./assets/index-DghDHKPv.js";import{_ as ae}from"./assets/index-BaxaBONX.js";import{_ as We}from"./assets/index-RaYBU-US.js";import"./assets/index-C-cYCD9B.js";import"./assets/index-CeMQa9Zn.js";import"./assets/index-xR3ssTK5.js";import"./assets/index-B-3JnImM.js";import"./assets/formatDateString-CpJBBOOJ.js";import"./assets/useColorScheme-CSURGKQC.js";function Se(){const O=c(!1);let k=null;const S=()=>{O.value=document.body.classList.contains("dark")};return me(()=>{S(),k=new MutationObserver(A=>{A.forEach(z=>{z.type==="attributes"&&z.attributeName==="class"&&S()})}),k.observe(document.body,{attributes:!0,attributeFilter:["class"]})}),ve(()=>{k&&k.disconnect()}),{isDark:O}}const Ge={class:"translate-x-0"},He={__name:"index",setup(O){ie();const{isDark:k}=Se(),S=c(new CSSStyleSheet);return c(!1),c(),(()=>{const l=document.querySelector("#uixpress-comments-css").sheet;for(const w of[...l.cssRules].reverse())S.value.insertRule(w.cssText)})(),(z,l)=>{const w=De("RouterView");return d(),x(oe,null,[(d(),q(we("style"),null,{default:F(()=>[...l[0]||(l[0]=[K(" html{font-size:14px;}#wpcontent{padding:0}",-1)])]),_:1})),o(j(Ie),{tag:"div","adopted-style-sheets":[S.value],class:"uipx-normalize"},{default:F(()=>[(d(),q(we("style"),null,{default:F(()=>[...l[1]||(l[1]=[K(" :root{font-size:14px}#wpcontent{padding:0}",-1)])]),_:1})),e("div",{class:y(["overflow-hidden uipx-normalize font-sans h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]",j(k)?"dark":""])},[o(Re),e("div",Ge,[o(j(Fe),{height:3})]),o(w)],2)]),_:1},8,["adopted-style-sheets"])],64)}}},qe={class:"relative"},Ke={class:"py-2 flex flex-col gap-1"},Qe=["onClick","onContextmenu"],Ye={class:"flex-shrink-0 relative"},Je=["onClick"],Xe={class:"w-10 h-10 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden"},Ze=["src","alt"],et={key:1,class:"w-full h-full flex items-center justify-center"},tt={class:"flex-1 min-w-0"},st={class:"flex items-center gap-2 mb-1"},at=["title"],nt={class:"text-xs text-zinc-500 dark:text-zinc-400 mb-1 line-clamp-2"},ot={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400"},lt={key:0},rt=["href","title"],it=["title"],ct={__name:"comment-list",props:{comments:{type:Array,default:()=>[]},selectedComments:{type:Array,default:()=>[]}},emits:["selectComment","delete","toggleSelection"],setup(O,{emit:k}){_e();const S=he(),A=O,z=k,l=c(!1),w=c({x:0,y:0}),$=c(null),C=(u,r)=>{r.target.closest(".comment-checkbox")||z("selectComment",u)},_=(u,r)=>{r.stopPropagation(),z("toggleSelection",u,r)},V=u=>A.selectedComments.includes(u.id),I=(u,r)=>{u.preventDefault(),$.value=r,w.value={x:u.clientX,y:u.clientY},l.value=!0},L=()=>{l.value=!1,$.value=null},E=u=>{z("delete",[u.id]),L()},h=u=>u?new Date(u).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—",T=u=>{const r={approved:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",spam:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",trash:"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400"};return r[u]||r.approved},G=u=>{if(!u)return"";const r=document.createElement("DIV");return r.innerHTML=u,r.textContent||r.innerText||""},v=(u,r=60)=>u?u.length<=r?u:u.substring(0,r)+"...":"";return document.addEventListener("click",L),(u,r)=>(d(),x("div",qe,[e("div",Ke,[(d(!0),x(oe,null,xe(O.comments,i=>{var X,Z;return d(),x("div",{key:i.id,onClick:P=>C(i,P),onContextmenu:P=>I(P,i),class:y(["flex items-start gap-3 px-4 py-3 cursor-pointer transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-all group -mx-3 relative",j(S).params.commentId==i.id?"bg-zinc-100 dark:bg-zinc-800/60":""])},[e("div",Ye,[e("div",{class:y(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 transition-opacity duration-200 comment-checkbox cursor-pointer",V(i)?"opacity-100":"opacity-0 group-hover:opacity-100"]),onClick:ne(P=>_(i,P),["stop"])},[o(Be,{isactive:V(i)},null,8,["isactive"])],10,Je),e("div",Xe,[(X=i.author_avatar_urls)!=null&&X["96"]?(d(),x("img",{key:0,src:i.author_avatar_urls[96],alt:i.author_name,class:"w-full h-full object-cover"},null,8,Ze)):(d(),x("div",et,[o(b,{icon:"person",class:"text-zinc-500 dark:text-zinc-400"})]))])]),e("div",tt,[e("div",st,[e("span",{class:y(["font-medium text-sm text-zinc-900 dark:text-zinc-200 truncate",j(S).params.commentId==i.id?"text-zinc-900 dark:text-white":"text-zinc-600 dark:text-zinc-400"]),title:i.author_name},a(i.author_name),11,at),e("span",{class:y(["px-2 py-0.5 text-[10px] font-medium rounded uppercase",T(i.status)])},a(i.status),3)]),e("div",nt,a(v(G(i.content))),1),e("div",ot,[e("span",null,a(h(i.date)),1),i.postData||i.post_title?(d(),x("span",lt,"•")):B("",!0),(Z=i.postData)!=null&&Z.edit_link?(d(),x("a",{key:1,href:i.postData.edit_link,onClick:r[0]||(r[0]=ne(()=>{},["stop"])),target:"_blank",class:"truncate hover:text-zinc-900 dark:hover:text-zinc-200 hover:underline transition-colors flex items-center gap-1",title:i.postData.title},[o(b,{icon:"open_in_new",class:"text-[10px]"}),K(" "+a(i.postData.title),1)],8,rt)):i.post_title?(d(),x("span",{key:2,class:"truncate",title:i.post_title},a(i.post_title),9,it)):B("",!0)])])],42,Qe)}),128))]),l.value&&$.value?(d(),x("div",{key:0,style:Pe({left:w.value.x+"px",top:w.value.y+"px"}),class:"fixed z-50 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg py-1 min-w-32",onClick:r[2]||(r[2]=ne(()=>{},["stop"]))},[e("button",{onClick:r[1]||(r[1]=i=>E($.value)),class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2"},[o(b,{icon:"delete",class:"text-sm"}),K(" "+a(u.__("Delete","uixpress")),1)])],4)):B("",!0)]))}},dt=$e(ct,[["__scopeId","data-v-f1e32f38"]]),ut={class:"flex-1 flex flex-col h-full max-h-full overflow-hidden"},pt={key:0,class:"flex-1 flex items-center justify-center"},mt={class:"text-center"},vt={class:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-900 flex items-center justify-center mx-auto mb-3"},xt={class:"text-sm text-zinc-500 dark:text-zinc-400"},_t={class:"flex-shrink-0 px-6 py-4 border-b border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-800/30"},ht={class:"flex items-center gap-4"},ft={class:"w-10 h-10 bg-zinc-200 dark:bg-zinc-800 rounded-full overflow-hidden flex-shrink-0"},gt=["src","alt"],bt={key:1,class:"w-full h-full flex items-center justify-center"},kt={class:"flex-1 min-w-0"},wt={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 truncate"},zt={class:"text-sm text-zinc-500 dark:text-zinc-400 truncate"},yt={class:"flex-shrink-0 text-right text-xs text-zinc-500 dark:text-zinc-400"},$t={class:"mt-1"},Ct={class:"flex-1 overflow-auto"},St={class:"p-6 space-y-6 max-w-2xl"},Dt={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},It={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},Pt={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},Vt={key:0},Lt={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},Tt={class:"flex items-center gap-2"},Et=["href"],At={class:"truncate flex-1"},Mt={class:"relative","data-status-select":""},Nt={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},Ut={class:"relative"},jt=["disabled"],Rt={class:"flex items-center gap-2 flex-1 min-w-0"},Ft={class:"text-sm font-medium truncate"},Bt={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg overflow-hidden"},Ot={class:"py-1"},Wt=["onClick"],Gt={class:"text-sm font-medium flex-1"},Ht={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},qt={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2"},Kt={class:"pt-4 border-t border-zinc-100 dark:border-zinc-800 flex items-center gap-3"},ze={__name:"comment-details-view",setup(O){const k=ie(),S=he(),A=_e(),z=c(!1),l=c(null),w=c(!1),$=c(null),C=c(""),_=c(""),V=c(""),I=c(""),L=c("approved"),E=c(""),h=c(0),T=c(""),G=c(""),v=[{value:"approved",label:(0,window.wp.i18n.__)("Approved","uixpress"),color:"green",classes:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800",dot:"bg-green-500"},{value:"pending",label:(0,window.wp.i18n.__)("Pending","uixpress"),color:"yellow",classes:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",dot:"bg-yellow-500"},{value:"spam",label:(0,window.wp.i18n.__)("Spam","uixpress"),color:"red",classes:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800",dot:"bg-red-500"},{value:"trash",label:(0,window.wp.i18n.__)("Trash","uixpress"),color:"zinc",classes:"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700",dot:"bg-zinc-500"}],u=te(()=>v.find(p=>p.value===L.value)||v[0]),r=c(!1),i=async()=>{var M,Q,g,se,ee;if(!S.params.commentId)return;z.value=!0,k.updateState("loading",!0);const p={endpoint:`wp/v2/comments/${S.params.commentId}`,params:{context:"edit"}},f=await R(p);if(z.value=!1,k.updateState("loading",!1),!(f!=null&&f.data)){W({title:(0,window.wp.i18n.__)("Comment not found","uixpress"),type:"error"}),A.push("/");return}if(l.value=f.data,C.value=l.value.author_name||"",_.value=l.value.author_email||"",V.value=l.value.author_url||"",I.value=((M=l.value.content)==null?void 0:M.raw)||((Q=l.value.content)==null?void 0:Q.rendered)||"",L.value=l.value.status||"approved",E.value=l.value.date||"",h.value=l.value.post||0,T.value=l.value.post_title||"",G.value=l.value.post_type||"",h.value&&G.value)try{const N=await R({endpoint:`wp/v2/types/${G.value}`});if((g=N==null?void 0:N.data)!=null&&g.rest_base){const U=await R({endpoint:`wp/v2/${N.data.rest_base}/${h.value}`,params:{context:"edit"}});U!=null&&U.data&&($.value={id:U.data.id,title:((se=U.data.title)==null?void 0:se.rendered)||((ee=U.data.title)==null?void 0:ee.raw)||"",link:U.data.link||"",edit_link:`${k.state.adminUrl}post.php?post=${U.data.id}&action=edit`,rest_base:N.data.rest_base})}}catch(N){console.error(`Failed to fetch post ${h.value}:`,N)}},X=async()=>{if(!l.value)return;w.value=!0,k.updateState("loading",!0);const p={author_name:C.value,author_email:_.value,author_url:V.value,content:I.value,status:L.value,date:E.value};try{const f={endpoint:`wp/v2/comments/${l.value.id}`,type:"POST",params:{context:"edit"},data:p},M=await R(f);M!=null&&M.data&&(W({title:(0,window.wp.i18n.__)("Comment updated successfully","uixpress"),type:"success"}),await i())}catch{W({title:(0,window.wp.i18n.__)("Failed to update comment","uixpress"),type:"error"})}finally{w.value=!1,k.updateState("loading",!1)}},Z=async()=>{if(!(!l.value||!confirm((0,window.wp.i18n.__)("Are you sure you want to delete this comment? This action cannot be undone.","uixpress")))){w.value=!0,k.updateState("loading",!0);try{await R({endpoint:`wp/v2/comments/${l.value.id}`,type:"DELETE",params:{force:!0}}),W({title:(0,window.wp.i18n.__)("Comment deleted successfully","uixpress"),type:"success"}),A.push("/")}catch{W({title:(0,window.wp.i18n.__)("Failed to delete comment","uixpress"),type:"error"})}finally{w.value=!1,k.updateState("loading",!1)}}},P=p=>p?new Date(p).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—",le=p=>{p.target.closest("[data-status-select]")||(r.value=!1)};return me(async()=>{await i(),setTimeout(()=>{document.addEventListener("click",le)},0)}),ve(()=>{document.removeEventListener("click",le)}),pe(()=>S.params.commentId,async p=>{p&&await i()}),(p,f)=>{var M,Q;return d(),x("div",ut,[z.value?(d(),x("div",pt,[e("div",mt,[e("div",vt,[o(b,{icon:"comment",class:"text-xl text-zinc-400 animate-pulse"})]),e("p",xt,a(p.__("Loading...","uixpress")),1)])])):l.value?(d(),x(oe,{key:1},[e("div",_t,[e("div",ht,[e("div",ft,[(M=l.value.author_avatar_urls)!=null&&M["96"]?(d(),x("img",{key:0,src:l.value.author_avatar_urls[96],alt:C.value,class:"w-full h-full object-cover"},null,8,gt)):(d(),x("div",bt,[o(b,{icon:"person",class:"text-2xl text-zinc-500 dark:text-zinc-400"})]))]),e("div",kt,[e("h2",wt,a(C.value||p.__("Anonymous","uixpress")),1),e("p",zt,a(_.value),1)]),e("div",yt,[e("div",null,a(p.__("Comment ID","uixpress"))+": "+a(l.value.id),1),e("div",$t,a(p.__("Date","uixpress"))+": "+a(P(E.value)),1)])])]),e("div",Ct,[e("div",St,[e("div",null,[e("label",Dt,a(p.__("Author Name","uixpress")),1),o(ae,{modelValue:C.value,"onUpdate:modelValue":f[0]||(f[0]=g=>C.value=g),placeholder:p.__("Author name","uixpress"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),e("div",null,[e("label",It,a(p.__("Author Email","uixpress")),1),o(ae,{modelValue:_.value,"onUpdate:modelValue":f[1]||(f[1]=g=>_.value=g),type:"email",placeholder:p.__("author@example.com","uixpress"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),e("div",null,[e("label",Pt,a(p.__("Author URL","uixpress")),1),o(ae,{modelValue:V.value,"onUpdate:modelValue":f[2]||(f[2]=g=>V.value=g),type:"url",placeholder:p.__("https://example.com","uixpress"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),$.value||T.value?(d(),x("div",Vt,[e("label",Lt,a(p.__("Post","uixpress")),1),e("div",Tt,[(Q=$.value)!=null&&Q.edit_link?(d(),x("a",{key:0,href:$.value.edit_link,target:"_blank",class:"flex-1 px-3 py-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors flex items-center gap-2"},[e("span",At,a($.value.title),1),o(b,{icon:"open_in_new",class:"text-base flex-shrink-0"})],8,Et)):(d(),q(ae,{key:1,"model-value":T.value,disabled:"",class:"flex-1"},null,8,["model-value"]))])])):B("",!0),e("div",Mt,[e("label",Nt,a(p.__("Status","uixpress")),1),e("div",Ut,[e("button",{onClick:f[3]||(f[3]=ne(g=>r.value=!r.value,["stop"])),disabled:w.value,class:y(["w-full px-3 py-2.5 rounded-lg border transition-all text-left flex items-center justify-between gap-2 disabled:opacity-50 disabled:cursor-not-allowed",[u.value.classes,r.value?"ring-2 ring-zinc-900 dark:ring-zinc-100":"hover:opacity-80"]])},[e("div",Rt,[e("span",{class:y(["w-2 h-2 rounded-full flex-shrink-0",u.value.dot])},null,2),e("span",Ft,a(u.value.label),1)]),o(b,{icon:"expand_more",class:y(["text-base flex-shrink-0 transition-transform",r.value?"rotate-180":""])},null,8,["class"])],10,jt),o(Ce,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:F(()=>[r.value?(d(),x("div",Bt,[e("div",Ot,[(d(),x(oe,null,xe(v,g=>e("button",{key:g.value,onClick:ne(se=>{L.value=g.value,r.value=!1},["stop"]),class:y(["w-full px-3 py-2.5 text-left flex items-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",L.value===g.value?"bg-zinc-50 dark:bg-zinc-800":""])},[e("span",{class:y(["w-2 h-2 rounded-full flex-shrink-0",g.dot])},null,2),e("span",Gt,a(g.label),1),L.value===g.value?(d(),q(b,{key:0,icon:"check",class:"text-base text-zinc-600 dark:text-zinc-400 flex-shrink-0"})):B("",!0)],10,Wt)),64))])])):B("",!0)]),_:1})])]),e("div",null,[e("label",Ht,a(p.__("Comment","uixpress")),1),o(We,{modelValue:I.value,"onUpdate:modelValue":f[4]||(f[4]=g=>I.value=g),placeholder:p.__("Comment content...","uixpress")},null,8,["modelValue","placeholder"])]),e("div",null,[e("label",qt,a(p.__("Date","uixpress")),1),o(ae,{modelValue:E.value,"onUpdate:modelValue":f[5]||(f[5]=g=>E.value=g),type:"datetime-local",disabled:w.value},null,8,["modelValue","disabled"])]),e("div",Kt,[o(re,{type:"primary",onClick:X,loading:w.value},{default:F(()=>[K(a(p.__("Update Comment","uixpress")),1)]),_:1},8,["loading"]),o(re,{type:"default",onClick:Z,disabled:w.value,class:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"},{default:F(()=>[K(a(p.__("Delete","uixpress")),1)]),_:1},8,["disabled"])])])])],64)):B("",!0)])}}},Qt={class:"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden"},Yt={class:"px-6 pt-6 pb-4"},Jt={class:"flex items-center justify-between mb-4"},Xt={class:"text-xl font-medium text-zinc-900 dark:text-zinc-100"},Zt={class:"relative"},es=["placeholder"],ts={class:"px-6 py-3"},ss={class:"flex items-center gap-2"},as={class:"flex-1 flex items-center gap-1.5 overflow-x-auto hide-scrollbar"},ns={class:"flex items-center gap-1.5"},os=["title"],ls={class:"mt-3 pt-3 border-t border-zinc-200 dark:border-zinc-800"},rs={class:"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5"},is={class:"grid grid-cols-2 gap-1.5"},cs=["onClick"],ds={class:"flex flex-row place-content-between items-center px-6 pr-4"},us={class:"py-2 text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500"},ps={class:"flex flex-row items-center"},ms={class:"text-xs text-zinc-500 dark:text-zinc-500 mr-2"},vs={key:0},xs={class:"flex-1 overflow-auto px-6 pb-6 custom-scrollbar"},_s={key:0,class:"p-8 text-center"},hs={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},fs={class:"text-sm text-zinc-500 dark:text-zinc-400"},gs={key:1,class:"p-8 text-center"},bs={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},ks={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-2"},ws={class:"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto"},zs={key:0,class:"flex-1 flex items-center justify-center"},ys={class:"text-center"},$s={class:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4"},Cs={class:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2"},Ss={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-4"},Ds={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl shadow-lg px-4 py-3 flex items-center gap-4"},Is={class:"text-sm font-medium text-zinc-700 dark:text-zinc-300 whitespace-nowrap"},Ps={class:"flex items-center gap-2"},Vs=["title"],Ls=["title"],Ts=["title"],Es=["title"],As=["title"],Ms=["title"],Ns={__name:"comment-list-view",setup(O){const k=ie(),{isDark:S}=Se(),A=_e(),z=he(),l=c(!1),w=c([]),$=c([]),C=c(""),_=c("all"),V=c("date"),I=c("desc"),L=c(typeof window<"u"?window.innerWidth:0),E=c(!1),h=c([]),T=c(null),G=c(null),v=c({page:1,per_page:30,total:0,totalPages:0,search:"",order:"desc",orderby:"date"}),u=te(()=>L.value),r=te(()=>v.value.page>1),i=te(()=>v.value.totalPages>0&&v.value.page<v.value.totalPages),X=async()=>{r.value&&(v.value.page-=1,await P())},Z=async()=>{i.value&&(v.value.page+=1,await P())},P=async()=>{l.value=!0,k.updateState("loading",!0);const t={page:v.value.page,per_page:v.value.per_page,search:v.value.search,order:v.value.order,orderby:v.value.orderby,context:"edit"};_.value!=="all"&&(t.status=_.value);const n=await R({endpoint:"wp/v2/comments",params:t});if(l.value=!1,k.updateState("loading",!1),!n)return;const D=await Promise.all(n.data.map(async m=>{var ue,Y,ge,be,ke;const de={id:m.id,author_name:m.author_name||"",author_email:m.author_email||"",author_url:m.author_url||"",author_ip:m.author_ip||"",content:((ue=m.content)==null?void 0:ue.rendered)||((Y=m.content)==null?void 0:Y.raw)||"",date:m.date||"",date_gmt:m.date_gmt||"",status:m.status||"approved",post:m.post||0,post_title:m.post_title||"",post_type:m.post_type||"",link:m.link||"",parent:m.parent||0,type:m.type||"comment",author_avatar_urls:m.author_avatar_urls||{},postData:null};if(m.post&&m.post_type)try{const J=await R({endpoint:`wp/v2/types/${m.post_type}`});if((ge=J==null?void 0:J.data)!=null&&ge.rest_base){const H=await R({endpoint:`wp/v2/${J.data.rest_base}/${m.post}`,params:{context:"edit"}});H!=null&&H.data&&(de.postData={id:H.data.id,title:((be=H.data.title)==null?void 0:be.rendered)||((ke=H.data.title)==null?void 0:ke.raw)||"",link:H.data.link||"",edit_link:`${k.state.adminUrl}post.php?post=${H.data.id}&action=edit`,rest_base:J.data.rest_base})}}catch(J){console.error(`Failed to fetch post ${m.post}:`,J)}return de}));w.value=D,v.value.total=n.totalItems,v.value.totalPages=n.totalPages,U()},le=t=>{A.push({name:"comment-details",params:{commentId:t.id}})},p=(t,s)=>{const n=$.value.findIndex(D=>D.id===t.id);if(s!=null&&s.shiftKey&&T.value!==null){const D=Math.min(T.value,n),m=Math.max(T.value,n);$.value.slice(D,m+1).map(Y=>Y.id).forEach(Y=>{h.value.includes(Y)||h.value.push(Y)}),T.value=n}else{const D=h.value.findIndex(m=>m===t.id);D>-1?h.value.splice(D,1):h.value.push(t.id),T.value=n}},f=te(()=>h.value.length>0),M=te(()=>{const t=h.value.length;return t===1?(0,window.wp.i18n.__)("1 comment selected","uixpress"):(0,window.wp.i18n.__)("%d comments selected","uixpress").replace("%d",t)}),Q=()=>{if(h.value.length===0)return;const t=h.value[0];A.push({name:"comment-details",params:{commentId:t}})},g=()=>{h.value=[],T.value=null},se=async()=>{if(h.value.length===0)return;const t=h.value.length,s=t===1?(0,window.wp.i18n.__)("this comment","uixpress"):(0,window.wp.i18n.__)("these %d comments","uixpress").replace("%d",t);await G.value.show({title:(0,window.wp.i18n.__)("Are you sure?","uixpress"),message:(0,window.wp.i18n.__)("Are you sure you want to delete %s? This action cannot be undone.","uixpress").replace("%s",s),okButton:(0,window.wp.i18n.__)("Yes, delete","uixpress")})&&(await N(h.value),g())},ee=async t=>{if(h.value.length!==0){l.value=!0;try{const s=h.value.map(async n=>{await R({endpoint:`wp/v2/comments/${n}`,type:"POST",data:{status:t}})});await Promise.all(s),await P(),g(),W({title:(0,window.wp.i18n.__)("Comments updated successfully","uixpress"),type:"success"})}catch{W({title:(0,window.wp.i18n.__)("Error updating comments","uixpress"),type:"error"})}finally{l.value=!1}}},N=async t=>{l.value=!0;try{const s=t.map(n=>R({endpoint:`wp/v2/comments/${n}`,type:"DELETE",params:{force:!0}}));await Promise.all(s),h.value=[],T.value=null,W({title:(0,window.wp.i18n.__)("Comment deleted successfully!","uixpress"),type:"success"}),await P()}catch{W({title:(0,window.wp.i18n.__)("Delete failed","uixpress"),type:"error"})}finally{l.value=!1}},U=()=>{let t=[...w.value];if(_.value!=="all"&&(t=t.filter(s=>s.status===_.value)),C.value){const s=C.value.toLowerCase();t=t.filter(n=>n.author_name.toLowerCase().includes(s)||n.author_email.toLowerCase().includes(s)||n.content.toLowerCase().includes(s)||n.post_title.toLowerCase().includes(s))}t.sort((s,n)=>{let D,m;switch(V.value){case"author":D=s.author_name||"",m=n.author_name||"";break;case"post":D=s.post_title||"",m=n.post_title||"";break;case"date":default:D=new Date(s.date),m=new Date(n.date);break}return I.value==="asc"?D>m?1:-1:D<m?1:-1}),$.value=t},fe=()=>{L.value=window.innerWidth};return pe([C,_,V,I],()=>{v.value.search=C.value,v.value.orderby=V.value,v.value.order=I.value,v.value.page=1,P()}),me(()=>{P(),L.value=window.innerWidth,window.addEventListener("resize",fe)}),ve(()=>{window.removeEventListener("resize",fe)}),pe(()=>z.params.commentId,t=>{t?E.value=!0:E.value=!1},{immediate:!0,deep:!0}),(t,s)=>(d(),x("div",{class:y(["flex h-full text-zinc-900 dark:text-zinc-100 font-sans max-h-full overflow-hidden gap-6 max-md:gap-0 uipx-normalize",j(S)?"dark":""])},[e("div",Qt,[e("div",Yt,[e("div",Jt,[e("h1",Xt,a(t.__("Comments","uixpress")),1)]),e("div",Zt,[o(b,{icon:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 dark:text-zinc-500 text-base pointer-events-none"}),Ve(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>C.value=n),type:"text",placeholder:t.__("Search comments...","uixpress"),autocomplete:"off",class:"w-full bg-zinc-50 dark:bg-zinc-900 border-0 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100 transition-shadow"},null,8,es),[[Le,C.value]])])]),e("div",ts,[e("div",ss,[e("div",as,[e("button",{onClick:s[1]||(s[1]=n=>_.value="all"),class:y(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",_.value==="all"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},a(t.__("All","uixpress")),3),e("button",{onClick:s[2]||(s[2]=n=>_.value="approved"),class:y(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",_.value==="approved"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},a(t.__("Approved","uixpress")),3),e("button",{onClick:s[3]||(s[3]=n=>_.value="pending"),class:y(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",_.value==="pending"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},a(t.__("Pending","uixpress")),3),e("button",{onClick:s[4]||(s[4]=n=>_.value="spam"),class:y(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",_.value==="spam"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},a(t.__("Spam","uixpress")),3),e("button",{onClick:s[5]||(s[5]=n=>_.value="trash"),class:y(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",_.value==="trash"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},a(t.__("Trash","uixpress")),3)]),e("div",ns,[e("button",{onClick:s[6]||(s[6]=n=>I.value=I.value==="asc"?"desc":"asc"),class:"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",title:I.value==="asc"?"Ascending":"Descending"},[o(b,{icon:I.value==="asc"?"arrow_upward":"arrow_downward",class:"text-sm text-zinc-600 dark:text-zinc-400"},null,8,["icon"])],8,os)])]),e("div",ls,[e("label",rs,a(t.__("Sort By","uixpress")),1),e("div",is,[(d(),x(oe,null,xe([{value:"date",label:"Date",icon:"schedule"},{value:"post",label:"Post",icon:"article"}],n=>e("button",{key:n.value,onClick:D=>V.value=n.value,class:y(["flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-md transition-colors",V.value===n.value?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},[o(b,{icon:n.icon,class:"text-sm"},null,8,["icon"]),K(" "+a(t.__(n.label,"uixpress")),1)],10,cs)),64))])])]),e("div",ds,[e("div",us,a(v.value.total)+" "+a(v.value.total===1?t.__("comment","uixpress"):t.__("comments","uixpress")),1),e("div",ps,[e("div",ms,[K(a(t.__("Page","uixpress"))+" "+a(v.value.page)+" ",1),v.value.totalPages>0?(d(),x("span",vs," / "+a(v.value.totalPages),1)):B("",!0)]),o(re,{type:"transparent",disabled:!r.value,onClick:X,"aria-disabled":!r.value,title:t.__("Previous","uixpress")},{default:F(()=>[o(b,{icon:"chevron_left"})]),_:1},8,["disabled","aria-disabled","title"]),o(re,{type:"transparent",disabled:!i.value,onClick:Z,"aria-disabled":!i.value,title:t.__("Next","uixpress")},{default:F(()=>[o(b,{icon:"chevron_right"})]),_:1},8,["disabled","aria-disabled","title"])])]),e("div",xs,[l.value&&!w.value.length?(d(),x("div",_s,[e("div",hs,[o(b,{icon:"comment",class:"text-zinc-400 text-xl animate-pulse"})]),e("p",fs,a(t.__("Loading comments...","uixpress")),1)])):$.value.length===0?(d(),x("div",gs,[e("div",bs,[o(b,{icon:"comment",class:"text-zinc-400 text-xl"})]),e("p",ks,a(C.value||_.value!=="all"?t.__("No comments found","uixpress"):t.__("No comments yet","uixpress")),1)])):(d(),q(dt,{key:2,comments:$.value,"selected-comments":h.value,onSelectComment:le,onToggleSelection:p,onDelete:N},null,8,["comments","selected-comments"]))])]),e("div",ws,[j(z).params.commentId?j(z).params.commentId&&u.value>1024?(d(),q(ze,{key:1})):j(z).params.commentId&&u.value<=1024?(d(),q(Ne,{key:2,modelValue:E.value,"onUpdate:modelValue":s[7]||(s[7]=n=>E.value=n),size:"full","show-header":!1,"show-close-button":!1,"close-on-overlay-click":!0,"close-on-escape":!0,onClose:s[8]||(s[8]=n=>j(A).push("/"))},{default:F(()=>[o(ze)]),_:1},8,["modelValue"])):B("",!0):(d(),x("div",zs,[e("div",ys,[e("div",$s,[o(b,{icon:"comment",class:"text-2xl text-zinc-400"})]),e("h3",Cs,a(t.__("Comment Details","uixpress")),1),e("p",Ss,a(t.__("Select a comment from the list to view details and edit properties.","uixpress")),1)])]))]),o(Ce,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:F(()=>[f.value?(d(),x("div",Ds,[e("div",Is,a(M.value),1),s[12]||(s[12]=e("div",{class:"h-6 w-px bg-zinc-200 dark:bg-zinc-700"},null,-1)),e("div",Ps,[e("button",{onClick:Q,class:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100",title:t.__("View","uixpress")},[o(b,{icon:"visibility",class:"text-lg"})],8,Vs),e("button",{onClick:s[9]||(s[9]=n=>ee("approved")),class:"p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300",title:t.__("Approve","uixpress")},[o(b,{icon:"check_circle",class:"text-lg"})],8,Ls),e("button",{onClick:s[10]||(s[10]=n=>ee("spam")),class:"p-2 rounded-lg hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors text-yellow-600 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300",title:t.__("Mark as Spam","uixpress")},[o(b,{icon:"report",class:"text-lg"})],8,Ts),e("button",{onClick:s[11]||(s[11]=n=>ee("trash")),class:"p-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",title:t.__("Trash","uixpress")},[o(b,{icon:"delete",class:"text-lg"})],8,Es),e("button",{onClick:se,class:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",title:t.__("Delete Permanently","uixpress")},[o(b,{icon:"delete_forever",class:"text-lg"})],8,As),e("button",{onClick:g,class:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300",title:t.__("Clear selection","uixpress")},[o(b,{icon:"close",class:"text-lg"})],8,Ms)])])):B("",!0)]),_:1}),o(Oe,{ref_key:"confirmDialog",ref:G},null,512)],2))}},Us=$e(Ns,[["__scopeId","data-v-0b44fdba"]]),ye={__name:"layout",setup(O){return(k,S)=>(d(),q(Us))}},ce=Te(He),js=Ee();ce.use(js);const Rs=ie();Ae(Rs,"#uipc-comments-script");Me(ce);const Fs=[{path:"/",component:ye,name:"comments-library",meta:{name:(0,window.wp.i18n.__)("Comments","uixpress")}},{path:"/details/:commentId",component:ye,name:"comment-details",meta:{name:(0,window.wp.i18n.__)("Comment Details","uixpress")},props:!0}],Bs=Ue({history:je(),routes:Fs});ce.use(Bs);ce.mount("#uix-comments-page");
//# sourceMappingURL=comments.build.SPIjR750.js.map
