const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./assets/edit-BKDaa7DG.js","./assets/_plugin-vue_export-helper-y4Xv5kKr.js","./assets/vue-router-mJSwnJkd.js","./assets/styles/vue-router.css","./assets/vue-draggable-next.esm-bundler-BRtBwvW6.js","./assets/index-DghDHKPv.js","./assets/styles/index3.css","./assets/index-BaxaBONX.js","./assets/index-B-3JnImM.js","./assets/index-DQSO8XBg.js","./assets/index-C-cYCD9B.js","./assets/index-9hv1rT8S.js","./assets/index-BaSe7vMO.js","./assets/inSearch-uRPV3sBV.js","./assets/isObject-CInHxCpH.js","./assets/styles/edit.css"])))=>i.map(i=>d[i]);
import{_ as le}from"./assets/preload-helper-Dp1pzeXC.js";import{r as u,o as X,y as Y,u as q,Q as A,b,d as r,e as z,f as i,g as w,h as E,i as F,j as s,n as k,l as S,S as ue,F as H,k as j,m as de,t as o,C as ce,K as pe,_ as y,G as me,c as B,a as G,D as T,I as xe,J as ve,E as O,O as U,s as fe,v as _e,x as he,P as ge}from"./assets/_plugin-vue_export-helper-y4Xv5kKr.js";import{a as Z,u as ee,D as we,c as be,b as ye}from"./assets/vue-router-mJSwnJkd.js";import{_ as ze,L as ke}from"./assets/index-C_FNz6s0.js";import{f as Se}from"./assets/formatDateString-CpJBBOOJ.js";function te(){const C=u(!1);let d=null;const x=()=>{C.value=document.body.classList.contains("dark")};return X(()=>{x(),d=new MutationObserver(_=>{_.forEach(h=>{h.type==="attributes"&&h.attributeName==="class"&&x()})}),d.observe(document.body,{attributes:!0,attributeFilter:["class"]})}),Y(()=>{d&&d.disconnect()}),{isDark:C}}const Ce={class:"translate-x-0"},Pe={__name:"index",setup(C){q();const{isDark:d}=te(),x=u(new CSSStyleSheet);return u(!1),u(),(()=>{const m=document.querySelector("#uixpress-menu-creator-css").sheet;for(const c of[...m.cssRules].reverse())x.value.insertRule(c.cssText)})(),(h,m)=>{const c=A("RouterView");return r(),b(H,null,[(r(),z(F("style"),null,{default:w(()=>[...m[0]||(m[0]=[E(" html{font-size:14px;}#wpcontent{padding:0}",-1)])]),_:1})),i(S(ue),{tag:"div","adopted-style-sheets":[x.value],class:"uipx-normalize"},{default:w(()=>[(r(),z(F("style"),null,{default:w(()=>[...m[1]||(m[1]=[E(" :root{font-size:14px}#wpcontent{padding:0}",-1)])]),_:1})),s("div",{class:k(["overflow-hidden uipx-normalize font-sans h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]",S(d)?"dark":""])},[i(ze),s("div",Ce,[i(S(ke),{height:3})]),i(c)],2)]),_:1},8,["adopted-style-sheets"])],64)}}},Me={class:"relative"},De={class:"py-2 flex flex-col gap-1"},$e={class:"flex-shrink-0 mr-2"},Re={class:"flex-1 min-w-0"},Ve={class:"flex items-center gap-2 mb-0.5"},Le=["title"],Ne={class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},Ee={__name:"menu-list",props:{menus:{type:Array,default:()=>[]}},emits:["selectMenu","delete"],setup(C,{emit:d}){Z();const x=ee(),_=d,h=u(!1),m=u({x:0,y:0}),c=u(null),L=(l,v)=>{l.preventDefault(),c.value=v,m.value={x:l.clientX,y:l.clientY},h.value=!0},$=()=>{h.value=!1,c.value=null},g=l=>{_("delete",[l.id]),$()},p=l=>l=="publish"?(0,window.wp.i18n.__)("Published","uixpress"):l=="draft"?(0,window.wp.i18n.__)("Draft","uixpress"):l;return document.addEventListener("click",$),(l,v)=>{const P=A("RouterLink");return r(),b("div",Me,[s("div",De,[(r(!0),b(H,null,de(C.menus,t=>(r(),z(P,{key:t.id,to:`/edit/${t.id}`,onContextmenu:M=>L(M,t),class:k(["flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-all group -mx-3",S(x).params.menuid==t.id?"bg-zinc-100 dark:bg-zinc-800/60":""])},{default:w(()=>{var M,R,V,I;return[s("div",$e,[s("div",{class:k(["w-2 h-2 flex items-center justify-center rounded-full",t.status=="publish"?"bg-green-500":"bg-orange-500"])},null,2)]),s("div",Re,[s("div",Ve,[s("span",{class:k(["font-medium text-sm text-zinc-900 dark:text-zinc-200 truncate",S(x).params.menuid==t.id?"text-zinc-900 dark:text-white":"text-zinc-600 dark:text-zinc-400"]),title:((M=t.title)==null?void 0:M.rendered)||((R=t.title)==null?void 0:R.raw)||l.__("Untitled","uixpress")},o(((V=t.title)==null?void 0:V.rendered)||((I=t.title)==null?void 0:I.raw)||l.__("Untitled","uixpress")),11,Le)]),s("div",Ne,o(p(t.status))+" â€¢ "+o(S(Se)(t.modified)),1)])]}),_:2},1032,["to","onContextmenu","class"]))),128))]),h.value&&c.value?(r(),b("div",{key:0,style:pe({left:m.value.x+"px",top:m.value.y+"px"}),class:"fixed z-50 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg py-1 min-w-32",onClick:v[1]||(v[1]=ce(()=>{},["stop"]))},[s("button",{onClick:v[0]||(v[0]=t=>g(c.value)),class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2"},[i(y,{icon:"delete",class:"text-sm"}),E(" "+o(l.__("Delete","uixpress")),1)])],4)):j("",!0)])}}},Ie={class:"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden"},Te={class:"px-6 pt-6 pb-4"},je={class:"flex items-center justify-between mb-4"},Fe={class:"text-xl font-medium text-zinc-900 dark:text-zinc-100"},Ae={class:"relative"},We=["placeholder"],Be={class:"px-6 py-3"},Ge={class:"flex items-center gap-1.5"},Oe={class:"flex flex-row place-content-between items-center px-6 pr-4"},Ue={class:"py-2 text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500"},qe={class:"flex flex-row items-center"},He={class:"text-xs text-zinc-500 dark:text-zinc-500 mr-2"},Qe={key:0},Je={class:"flex-1 overflow-auto px-6 pb-6 custom-scrollbar"},Ke={key:0,class:"p-8 text-center"},Xe={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},Ye={class:"text-sm text-zinc-500 dark:text-zinc-400"},Ze={key:1,class:"p-8 text-center"},et={class:"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3"},tt={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-2"},st={class:"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto"},at={key:0,class:"flex-1 flex items-center justify-center"},nt={class:"text-center"},ot={class:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4"},it={class:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2"},rt={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-4"},lt={__name:"menu-list-view",setup(C){const d=q(),{isDark:x}=te(),_=Z(),h=ee(),m=u(new CSSStyleSheet),c=u(!1),L=u([]),$=u([]),g=u(""),p=u("any"),l=u(typeof window<"u"?window.innerWidth:0),v=u(!1),P=u(!1),t=u({page:1,per_page:30,total:0,totalPages:0,search:"",order:"desc",orderby:"date",status:"any",context:"edit"}),M=B(()=>l.value),R=B(()=>t.value.page>1),V=B(()=>t.value.totalPages>0&&t.value.page<t.value.totalPages),I=async()=>{R.value&&(t.value.page-=1,await D())},se=async()=>{V.value&&(t.value.page+=1,await D())},D=async()=>{c.value=!0,d.updateState("loading",!0);const e={endpoint:"wp/v2/uipxmenus",params:{page:t.value.page,per_page:t.value.per_page,search:t.value.search,order:t.value.order,orderby:t.value.orderby,status:t.value.status,context:t.value.context}},a=await O(e);c.value=!1,d.updateState("loading",!1),a&&(L.value=a.data.map(n=>({id:n.id,title:n.title,status:n.status,modified:n.modified,date:n.date})),t.value.total=a.totalItems,t.value.totalPages=a.totalPages,oe())},ae=e=>{_.push({name:"menu-editor",params:{menuid:e.id}})},ne=async e=>{c.value=!0;try{const a=e.map(n=>O({endpoint:`wp/v2/uipxmenus/${n}`,type:"DELETE",params:{force:!0}}));await Promise.all(a),U({title:(0,window.wp.i18n.__)("Menu deleted successfully!","uixpress"),type:"success"}),await D()}catch{U({title:(0,window.wp.i18n.__)("Delete failed","uixpress"),type:"error"})}finally{c.value=!1}},Q=async()=>{d.updateState("loading",!0),P.value=!0;const e=(0,window.wp.i18n.__)("Draft menu","uixpress")+` (${t.value.total+1})`,n=await O({endpoint:"wp/v2/uipxmenus",params:{},data:{title:e,meta:{menu_items:[],menu_settings:{}}},type:"POST"});d.updateState("loading",!1),P.value=!1,n&&(D(),U({type:"success",title:(0,window.wp.i18n.__)("Menu created","uixpress")}),_.push({name:"menu-editor",params:{menuid:n.data.id}}))},oe=()=>{let e=[...L.value];if(p.value!=="any"&&(e=e.filter(a=>a.status===p.value)),g.value){const a=g.value.toLowerCase();e=e.filter(n=>{var N,K;return(((N=n.title)==null?void 0:N.rendered)||((K=n.title)==null?void 0:K.raw)||"").toLowerCase().includes(a)})}$.value=e},ie=()=>{let e=document.querySelector("#uixpress-menu-creator-css");if(!e)e=re(),e.onload=()=>{const a=e.sheet;for(const n of[...a.cssRules].reverse())m.value.insertRule(n.cssText)};else{const a=e.sheet;for(const n of[...a.cssRules].reverse())m.value.insertRule(n.cssText)}},re=()=>{var e=document.createElement("link");return e.rel="stylesheet",e.href=`${d.state.pluginBase}app/dist/assets/styles/menu-creator.css`,document.head.appendChild(e),e};G(g,()=>{t.value.search=g.value,t.value.page=1,D()}),G(p,()=>{t.value.status=p.value,t.value.page=1,D()});const J=()=>{l.value=window.innerWidth};return X(()=>{D(),ie(),l.value=window.innerWidth,window.addEventListener("resize",J)}),Y(()=>{window.removeEventListener("resize",J)}),G(()=>h.params.menuid,e=>{e?v.value=!0:v.value=!1},{immediate:!0,deep:!0}),(e,a)=>{const n=A("RouterView");return r(),b("div",{class:k(["flex h-full text-zinc-900 dark:text-zinc-100 font-sans max-h-full overflow-hidden gap-6 max-md:gap-0 uipx-normalize",S(x)?"dark":""])},[s("div",Ie,[s("div",Te,[s("div",je,[s("h1",Fe,o(e.__("Menu Creator","uixpress")),1),i(T,{type:"primary",onClick:Q,disabled:P.value,loading:P.value,class:"text-sm"},{default:w(()=>[i(y,{icon:"add",class:"text-base"})]),_:1},8,["disabled","loading"])]),s("div",Ae,[i(y,{icon:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 dark:text-zinc-500 text-base pointer-events-none"}),xe(s("input",{"onUpdate:modelValue":a[0]||(a[0]=f=>g.value=f),type:"text",placeholder:e.__("Search menus...","uixpress"),class:"w-full bg-zinc-50 dark:bg-zinc-900 border-0 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100 transition-shadow"},null,8,We),[[ve,g.value]])])]),s("div",Be,[s("div",Ge,[s("button",{onClick:a[1]||(a[1]=f=>p.value="any"),class:k(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",p.value==="any"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},o(e.__("All","uixpress")),3),s("button",{onClick:a[2]||(a[2]=f=>p.value="publish"),class:k(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",p.value==="publish"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},o(e.__("Published","uixpress")),3),s("button",{onClick:a[3]||(a[3]=f=>p.value="draft"),class:k(["px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors",p.value==="draft"?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"])},o(e.__("Draft","uixpress")),3)])]),s("div",Oe,[s("div",Ue,o(t.value.total)+" "+o(t.value.total===1?e.__("menu","uixpress"):e.__("menus","uixpress")),1),s("div",qe,[s("div",He,[E(o(e.__("Page","uixpress"))+" "+o(t.value.page)+" ",1),t.value.totalPages>0?(r(),b("span",Qe," / "+o(t.value.totalPages),1)):j("",!0)]),i(T,{type:"transparent",disabled:!R.value,onClick:I,"aria-disabled":!R.value,title:e.__("Previous","uixpress")},{default:w(()=>[i(y,{icon:"chevron_left"})]),_:1},8,["disabled","aria-disabled","title"]),i(T,{type:"transparent",disabled:!V.value,onClick:se,"aria-disabled":!V.value,title:e.__("Next","uixpress")},{default:w(()=>[i(y,{icon:"chevron_right"})]),_:1},8,["disabled","aria-disabled","title"])])]),s("div",Je,[c.value&&!L.value.length?(r(),b("div",Ke,[s("div",Xe,[i(y,{icon:"menu",class:"text-zinc-400 text-xl animate-pulse"})]),s("p",Ye,o(e.__("Loading menus...","uixpress")),1)])):$.value.length===0?(r(),b("div",Ze,[s("div",et,[i(y,{icon:"menu",class:"text-zinc-400 text-xl"})]),s("p",tt,o(g.value||p.value!=="any"?e.__("No menus found","uixpress"):e.__("No menus yet","uixpress")),1),!g.value&&p.value==="any"?(r(),z(T,{key:0,type:"primary",class:"mt-4",onClick:Q,loading:P.value},{default:w(()=>[E(o(e.__("New menu","uixpress")),1)]),_:1},8,["loading"])):j("",!0)])):(r(),z(Ee,{key:2,menus:$.value,onSelectMenu:ae,onDelete:ne},null,8,["menus"]))])]),s("div",st,[i(n,{key:"menu-editor-content"},{default:w(({Component:f})=>[f?f&&M.value>1024?(r(),z(F(f),{key:1})):f&&M.value<=1024?(r(),z(we,{key:2,modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=N=>v.value=N),size:"full","show-header":!1,"show-close-button":!1,"close-on-overlay-click":!0,"close-on-escape":!0,onClose:a[5]||(a[5]=N=>S(_).push("/"))},{default:w(()=>[(r(),z(F(f)))]),_:2},1032,["modelValue"])):j("",!0):(r(),b("div",at,[s("div",nt,[s("div",ot,[i(y,{icon:"menu",class:"text-2xl text-zinc-400"})]),s("h3",it,o(e.__("Menu Editor","uixpress")),1),s("p",rt,o(e.__("Select a menu from the list to edit its structure and settings.","uixpress")),1)])]))]),_:1})])],2)}}},ut=me(lt,[["__scopeId","data-v-4e447b09"]]),dt={__name:"layout",setup(C){return(d,x)=>{const _=A("RouterView");return r(),b(H,null,[i(ut),i(_,{key:"menu-editor"})],64)}}},W=fe(Pe),ct=_e();W.use(ct);const pt=q();he(pt);ge(W);const mt=[{path:"/",component:dt,name:"menu-creator",meta:{name:(0,window.wp.i18n.__)("Menu Creator","uixpress")},children:[{path:"/edit/:menuid",component:()=>le(()=>import("./assets/edit-BKDaa7DG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url),name:"menu-editor",meta:{name:(0,window.wp.i18n.__)("Menu editor","uixpress")}}]}],xt=be({history:ye(),routes:mt});W.use(xt);W.mount("#uipc-menu-creator-app");
//# sourceMappingURL=menu-creator.build.m-TipJNG.js.map
