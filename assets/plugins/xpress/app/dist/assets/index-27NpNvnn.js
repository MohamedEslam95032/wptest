import{c as B,r as C,b as n,d as t,C as ee,n as V,w as Ae,e as Q,j as e,R as yt,K as Ge,T as It,p as ze,l as x,_ as N,G as je,k as b,t as g,U as Et,u as $e,o as Le,f as m,g as q,D as ye,V as ot,F as j,m as Z,i as Re,h as ke,E as Ne,W as he,a as Me,X as Nt,q as Rt,y as Tt,I as qt,Y as Ze,J as Ut,O as Be,Z as Ft}from"./_plugin-vue_export-helper-y4Xv5kKr.js";import{a as Dt,s as wt,c as kt,b as Ve,d as Pt}from"./HooksSystem-DXZs27Nq.js";import{D as zt,a as Ot}from"./vue-router-mJSwnJkd.js";import{i as at}from"./inSearch-uRPV3sBV.js";import{u as Je}from"./useColorScheme-CSURGKQC.js";import{_ as Vt,M as jt}from"./index-DghDHKPv.js";import{O as we,d as Ht,m as ie,r as Qt,l as et,_ as Bt,i as mt,p as Kt}from"./index-BaSe7vMO.js";import{V as Wt}from"./vue-draggable-next.esm-bundler-BRtBwvW6.js";import{_ as Ke}from"./index-BaxaBONX.js";import{_ as Gt}from"./index-C-cYCD9B.js";import{_ as tt}from"./index-BKyH2sbb.js";import{i as Jt}from"./isObject-CInHxCpH.js";const Yt=B(()=>we.value.reduce((o,i)=>(Array.isArray(i.submenu)&&o.push(...i.submenu),o),[])),Te=(o,i,l)=>{const S=o.id,$=we.value.find(_=>_.id==S);if($)return $[i]||l;const k=Yt.value.find(_=>_.id==S);if(k)return k[i]||l},Xt=B(()=>Ht.value.map(o=>(o.before&&o.before.includes("url(")&&(o.backGroundImage=o.before,o.before=""),`
	${o.class}:before {
	  content: '${o.before||""}';
	  height: 1.2rem;
	  width: 1.2rem;
	  min-height: 1.2rem;
	  min-width: 1.2rem;
	  color: currentColor;
	  font-size: 1.2rem;
	  background-size: contain;
	  background-repeat: no-repeat;
	  background-position: center center;
	  ${o.font?`font-family: '${o.font}' !important;`:""}
	  ${o.backGroundImage?`background-image: ${o.backGroundImage} !important;`:""}
	  ${o.backGroundImage?"filter: contrast(0.3);":""}
	}
  `)).join(`
`)),Zt={__name:"index",props:{minWidth:{type:Number,default:200},maxWidth:{type:Number,default:window.innerWidth},tolerance:{type:Number,default:30},storageKey:{type:String,default:"uipc_panel_width"},position:{type:String,default:"right"}},emits:["resize"],setup(o,{emit:i}){const l=o,S=i,$=C(null),k=C(!1),_=C(!1),A=B(()=>document.documentElement.dir=="rtl"),z=()=>{_.value=!0},U=()=>{_.value=!1},O=B(()=>{var d;return(d=$==null?void 0:$.value)==null?void 0:d.parentElement}),F=d=>{d.preventDefault(),k.value=!0,window.addEventListener("mousemove",R),window.addEventListener("mouseup",E)},R=d=>{d.stopPropagation();const f=O.value.getBoundingClientRect();let L;!A.value&&l.position!="left"?L=Math.max(l.minWidth,Math.min(d.clientX-f.left,l.maxWidth)):L=Math.max(l.minWidth,Math.min(f.right-d.clientX,l.maxWidth)),S("resize",L)},y=()=>{const d=localStorage.getItem(l.storageKey);if(d){const f=parseInt(d);return f>window.innerWidth?void 0:(S("resize",f),f)}return null},E=()=>{event.stopPropagation(),k.value=!1,window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",E),a()},a=()=>{O.value&&localStorage.setItem(l.storageKey,O.value.offsetWidth.toString())};return y(),(d,f)=>(t(),n("div",{ref_key:"handleRef",ref:$,class:V(["absolute top-0 h-full w-1 cursor-ew-resize transition-opacity duration-300 ease-in-out bg-indigo-500/20",[{"opacity-100":_.value||k.value,"opacity-0":!_.value&&!k.value},A.value||o.position=="left"?"left-0":"right-0"]]),onMousedown:ee(F,["stop"]),onClick:f[0]||(f[0]=ee(()=>{},["stop"])),onMouseenter:z,onMouseleave:U},null,34))}},st={__name:"submenu",props:["parent","mouseenter","mouseleave"],setup(o){const i=C(null),l=C({}),S=C(null),$=()=>{const k=i.value.getBoundingClientRect();l.value={left:`${k.left}px`,top:`${k.top}px`},ze(()=>{if(!S.value)return;const _=S.value.getBoundingClientRect();_.bottom>window.innerHeight&&(l.value={left:`${k.left}px`,top:`${window.innerHeight-_.height}px`})})};return Ae(()=>{i.value&&$()}),(k,_)=>(t(),n("div",{ref_key:"anchor",ref:i},[(t(),Q(It,{to:"body"},[e("div",{class:"uix-submenu fixed bg-white dark:bg-zinc-900 z-[9999] shadow-sm rounded-xl border border-zinc-600/10 dark:border-zinc-800 p-3 text-sm translate-x-0 uix-normalize",style:Ge(l.value),onMouseenter:_[0]||(_[0]=A=>o.mouseenter()),onMouseleave:_[1]||(_[1]=A=>o.mouseleave()),ref_key:"submenu",ref:S},[yt(k.$slots,"default")],36)]))],512))}},nt={__name:"menu-icon",props:["link"],setup(o){return(i,l)=>{var S;return(S=o.link.settings)!=null&&S.icon?(t(),Q(N,{key:1,icon:o.link.settings.icon,class:"text-xl text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 group-[.active]:text-zinc-900 dark:group-[.active]:text-zinc-100"},null,8,["icon"])):(t(),n("div",{key:0,class:V(["icon text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 group-[.active]:text-zinc-900 dark:group-[.active]:text-zinc-100 w-[1.2rem] h-[1.2rem] bg-contain bg-center bg-no-repeat contrast-50 group-[.active]:contrast-[1]",x(Te)(o.link,"imageClasses",o.link.imageClasses)]),style:Ge(x(Te)(o.link,"iconStyles",o.link.iconStyles))},null,6))}}},es={class:"pl-12 flex-grow flex items-center justify-between gap-3 min-w-0"},ts=["innerHTML"],ss={__name:"menu-item-name",props:["link","active"],setup(o){const i=o,l=B(()=>{const $=Te(i.link,"notifications",i.link.notifications);if(!$)return null;const k=parseInt($);return isNaN(k)||k<=0?null:k>99?"99+":k.toString()}),S=B(()=>{var $;return(($=i.link.settings)==null?void 0:$.name)||Te(i.link,"name",i.link.name)||""});return($,k)=>(t(),n("div",es,[e("div",{class:V(["flex-1 min-w-0 font-medium group-hover:text-zinc-900 dark:group-hover:text-zinc-50 transition-colors duration-200 leading-relaxed",o.active?"text-zinc-950 dark:text-white":"text-zinc-700 dark:text-zinc-500"]),innerHTML:S.value},null,10,ts),l.value?(t(),n("div",{key:0,class:V(["flex-shrink-0 inline-flex items-center justify-center min-w-[1.25rem] h-5 px-1.5 text-xs font-semibold leading-none bg-gradient-to-r from-indigo-500 to-indigo-600 dark:from-indigo-400 dark:to-indigo-500 text-white rounded-full shadow-sm ring-2 ring-white dark:ring-zinc-800 transition-all duration-200 group-hover:shadow-md group-hover:scale-105",l.value.length>2?"px-2":""])},g(l.value),3)):b("",!0)]))}},ft=je(ss,[["__scopeId","data-v-36bbccb8"]]),ns=["href","id","target"],rt={__name:"menu-item-link",props:["link","isActive","isFocused"],setup(o){const i=o,l=B(()=>{var $;if(!(($=i.link)!=null&&$.url))return"";const S=i.link.url;if(S.includes("%"))try{return decodeURIComponent(S)}catch{return S}return S});return(S,$)=>{var k;return t(),n("a",{href:l.value,id:o.link.id,class:V(["flex flex-row rounded-lg items-center cursor-pointer gap-1 group transition-all relative border border-transparent",o.isActive||o.isFocused?"text-zinc-900 dark:text-zinc-100 active bg-zinc-100 dark:bg-zinc-800/40 active":"hover:bg-zinc-100 hover:dark:bg-zinc-800/60"]),target:(k=o.link.settings)!=null&&k.open_new?"_BLANK":""},[yt(S.$slots,"default")],10,ns)}}},rs=["href","id"],is={class:"group-hover:text-zinc-950 dark:group-hover:text-zinc-100 transition-color flex-grow text-base grow truncate flex flex-row items-center gap-4"},os=["innerHTML"],as={__name:"submenu-item",props:["sublink","isFocused","isActive","isFavorite","hideFavorite"],setup(o){const i=o,l=Et("addFavorite",null),S=_=>{if(!i.sublink.og_node)return;const A=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window});i.sublink.og_node.dispatchEvent(A)},$=B(()=>{const _=Te(i.sublink,"notifications",i.sublink.notifications);if(!_)return null;const A=parseInt(_);return isNaN(A)||A<=0?null:A>99?"99+":A.toString()}),k=B(()=>{var A;if(!((A=i.sublink)!=null&&A.url))return"";const _=i.sublink.url;if(_.includes("%"))try{return decodeURIComponent(_)}catch{return _}return _});return(_,A)=>{var z,U;return t(),n("a",{href:k.value,id:o.sublink.sub_id,class:V(["unset-all flex flex-row p-1 px-4 rounded-lg items-center cursor-pointer gap-1 group transition-all",o.isActive||o.isFocused?"text-zinc-900 dark:text-white active":" hover:bg-zinc-100 hover:dark:bg-zinc-800 dark:text-zinc-500"]),onClick:A[1]||(A[1]=O=>S())},[e("div",is,[e("div",{innerHTML:((z=o.sublink.settings)==null?void 0:z.name)||x(Te)(o.sublink,"name",o.sublink.name),class:"truncate"},null,8,os),$.value?(t(),n("div",{key:0,class:V(["flex-shrink-0 inline-flex items-center justify-center min-w-[1.125rem] h-4 px-1 text-xs font-semibold leading-none bg-gradient-to-r from-indigo-500 to-indigo-600 dark:from-indigo-400 dark:to-indigo-500 text-white rounded-full shadow-sm ring-1 ring-white dark:ring-zinc-800 transition-all duration-200 group-hover:scale-105",$.value.length>2?"px-1.5":""])},g($.value),3)):b("",!0)]),!o.isFavorite&&!o.hideFavorite&&x(l)?(t(),Q(N,{key:0,icon:"star",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:A[0]||(A[0]=ee(O=>x(l)(o.sublink),["prevent","stop"]))})):b("",!0),(U=o.sublink.settings)!=null&&U.open_new?(t(),Q(N,{key:1,icon:"open_new",class:V([o.isActive||o.isFocused?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"])},null,8,["class"])):b("",!0)],10,rs)}}},Oe=je(as,[["__scopeId","data-v-c17c5401"]]),ls={key:0,class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},cs={class:"h-full flex flex-col bg-zinc-50 dark:bg-zinc-900"},us={class:"px-6 py-5 border-b border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900"},ds={class:"flex items-center justify-between"},ps={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100"},ms={key:0,class:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5"},fs={class:"flex-1 overflow-auto"},vs={key:0,class:"flex items-center justify-center py-12"},gs={key:1,class:"flex flex-col items-center justify-center py-16 px-6 text-center"},xs={class:"w-12 h-12 bg-zinc-200 dark:bg-zinc-700 rounded-lg flex items-center justify-center mb-3"},hs={class:"text-sm text-zinc-600 dark:text-zinc-400 font-medium mb-1"},_s={class:"text-xs text-zinc-500 dark:text-zinc-500"},bs={key:2,class:"divide-y divide-zinc-200 dark:divide-zinc-800"},ys={class:"px-6 py-4"},ws={class:"flex gap-3"},ks={class:"flex-shrink-0 pt-1.5"},zs={class:"flex-1 min-w-0"},$s=["innerHTML"],Ss={class:"text-sm text-zinc-600 dark:text-zinc-400 leading-5"},Cs=["innerHTML"],As={key:1},Ms=["innerHTML"],Ls=["innerHTML"],Is=["onClick"],Es={class:"flex-shrink-0 flex items-start pt-0.5"},Ns=["onClick","disabled"],Rs={__name:"index",setup(o){const i=$e(),l=C([]),S=C(!1),$=C({}),k=C(!1),_=C(new Set),A=a=>{const d=new Set(_.value);d.has(a)?d.delete(a):d.add(a),_.value=d},z=a=>a.replace(/<[^>]*>/g,"").length>180,U=a=>{const d=a.replace(/<[^>]*>/g,"");if(d.length<=180)return a;const f=d.substring(0,180),L=f.lastIndexOf(" "),D=L>140?L:180;return f.substring(0,D)+"..."},O=async()=>{S.value=!0;const d=await Ne({endpoint:"wp/v2/uixpress-notices",params:{status:"publish",per_page:100}});S.value=!1,d&&d.data&&(l.value=d.data)},F=a=>{var ce,te;const d=i.state.userID,f=i.state.userRoles||[],L=((ce=a.meta)==null?void 0:ce.roles)||[],D=((te=a.meta)==null?void 0:te.seen_by)||[];return D.includes(Number(d))||D.includes(d)?!1:!!(!L.length||L.some(M=>M.type==="user"&&M.id==d)||L.some(M=>M.type==="role"&&f.includes(M.value)))},R={info:{dotColor:"bg-indigo-500"},success:{dotColor:"bg-green-500"},warning:{dotColor:"bg-amber-500"},error:{dotColor:"bg-red-500"}},y=B(()=>l.value.filter(F)),E=async a=>{var L;const d=i.state.userID;if(!d)return;$.value[a.id]=!0;const f=await Ne({endpoint:"uixpress/v1/notices/seen",type:"POST",data:{notice_id:a.id}});if(f&&f.seen_by)a.meta.seen_by=f.seen_by;else{let D=Array.isArray((L=a.meta)==null?void 0:L.seen_by)?[...a.meta.seen_by]:[];!D.includes(Number(d))&&!D.includes(d)&&D.push(Number(d)),a.meta.seen_by=D}$.value[a.id]=!1};return Le(O),(a,d)=>(t(),n(j,null,[m(ye,{type:"transparent",title:a.__("Notifications","uixpress"),onClick:d[0]||(d[0]=f=>k.value=!0),class:"relative"},{default:q(()=>[m(N,{icon:"bolt_fill",class:"text-xl"}),y.value.length>0?(t(),n("div",ls)):b("",!0)]),_:1},8,["title"]),m(zt,{modelValue:k.value,"onUpdate:modelValue":d[2]||(d[2]=f=>k.value=f),title:"Notifications","show-close-button":!1,"show-header":!1},{default:q(()=>[e("div",cs,[e("div",us,[e("div",ds,[e("div",null,[e("h1",ps,g(a.__("Notifications","uixpress")),1),y.value.length>0?(t(),n("p",ms,g(y.value.length)+" unread ",1)):b("",!0)]),e("button",{onClick:d[1]||(d[1]=f=>k.value=!1),class:"p-2 text-zinc-400 hover:text-zinc-500 dark:hover:text-zinc-300 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"},[m(N,{icon:"close",class:"text-lg"})])])]),e("div",fs,[S.value?(t(),n("div",vs,[...d[3]||(d[3]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-zinc-300 dark:border-zinc-600 border-t-zinc-900 dark:border-t-zinc-100"},null,-1)])])):y.value.length===0?(t(),n("div",gs,[e("div",xs,[m(N,{icon:"notifications",class:"text-xl text-zinc-400"})]),e("p",hs,g(a.__("You're all caught up","uixpress")),1),e("p",_s,g(a.__("No new notifications","uixpress")),1)])):(t(),n("div",bs,[m(ot,{name:"notice"},{default:q(()=>[(t(!0),n(j,null,Z(y.value,f=>{var L,D;return t(),n("div",{key:f.id,class:"group relative bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},[e("div",ys,[e("div",ws,[e("div",ks,[e("div",{class:V(["w-1.5 h-1.5 rounded-full",R[((L=f.meta)==null?void 0:L.notice_type)||"info"].dotColor])},null,2)]),e("div",zs,[e("div",{class:"text-sm font-medium text-zinc-900 dark:text-zinc-100 leading-5 mb-1",innerHTML:f.title.rendered},null,8,$s),e("div",Ss,[z(f.content.rendered)?(t(),n("div",As,[_.value.has(f.id)?(t(),n("div",{key:1,innerHTML:f.content.rendered,class:"prose-notice"},null,8,Ls)):(t(),n("div",{key:0,innerHTML:U(f.content.rendered),class:"prose-notice"},null,8,Ms)),e("button",{onClick:ce=>A(f.id),class:"inline-flex items-center text-xs text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300 mt-1 font-medium transition-colors"},g(_.value.has(f.id)?"Show less":"Show more"),9,Is)])):(t(),n("div",{key:0,innerHTML:f.content.rendered,class:"prose-notice"},null,8,Cs))])]),e("div",Es,[(D=f.meta)!=null&&D.dismissible?(t(),n("button",{key:0,onClick:ce=>E(f),disabled:$.value[f.id],class:"p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100"},[m(N,{icon:$.value[f.id]?"hourglass_empty":"close",class:V(["text-sm",{"animate-pulse":$.value[f.id]}])},null,8,["icon","class"])],8,Ns)):b("",!0)])])])])}),128))]),_:1})]))])]),(t(),Q(Re("style"),null,{default:q(()=>[...d[4]||(d[4]=[ke(" /* Notice transitions */ .notice-enter-active { transition: all 0.2s ease; } .notice-leave-active { transition: all 0.2s ease; } .notice-enter-from { opacity: 0; transform: translateY(-8px); } .notice-leave-to { opacity: 0; transform: translateY(8px); } /* Prose styling for notice content */ .prose-notice :deep(p) { margin: 0; display: inline; } .prose-notice :deep(p + p) { margin-top: 0.5rem; display: block; } .prose-notice :deep(strong) { font-weight: 600; color: inherit; } .prose-notice :deep(a) { color: rgb(59 130 246); text-decoration: none; } .prose-notice :deep(a:hover) { text-decoration: underline; } .prose-notice :deep(ul), .prose-notice :deep(ol) { margin: 0.5rem 0 0 0; padding-left: 1rem; } .prose-notice :deep(li) { margin: 0.25rem 0; } .dark .prose-notice :deep(a) { color: rgb(96 165 250); } ",-1)])]),_:1}))]),_:1},8,["modelValue"])],64))}},$t=async o=>{if(!o)return o;const i=new TextEncoder().encode(o),l=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(l)).map(k=>k.toString(16).padStart(2,"0")).join("")},Ts={key:0,class:"pb-2 absolute bottom-full left-0 z-50"},qs={class:"px-4 py-3 border-b border-zinc-100 dark:border-zinc-800"},Us={class:"flex items-center gap-3"},Fs={class:"w-8 h-8 bg-zinc-700 dark:bg-zinc-600 text-white rounded-full font-medium flex items-center justify-center relative overflow-hidden"},Ds={class:"lowercase text-sm",style:{top:"calc(((-1em / 1.5) + 1ex) / 2)"}},Ps=["src"],Os={class:"flex flex-col leading-tight grow min-w-0"},Vs={class:"font-medium text-zinc-900 dark:text-zinc-100 truncate text-sm"},js={class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},Hs={class:"py-1"},Qs=["onClick"],Bs={class:"text-sm"},Ks={key:0,class:"h-px bg-zinc-100 dark:bg-zinc-800 my-1 mx-4"},Ws={class:"px-4 py-3 border-t border-zinc-100 dark:border-zinc-800"},Gs={class:"space-y-3"},Js={class:"flex items-center justify-between"},Ys={class:"text-xs font-medium text-zinc-600 dark:text-zinc-300"},Xs={class:"flex bg-zinc-100 dark:bg-zinc-800 rounded-lg p-0.5"},Zs=["title"],en=["title"],tn=["title"],sn={class:"flex items-center justify-between"},nn={class:"text-xs text-zinc-500 dark:text-zinc-400"},rn=["title"],on={class:"p-2 bg-white dark:bg-zinc-800/40 rounded-xl flex flex-row items-center gap-3 w-full border border-zinc-200/40 dark:border-zinc-700/30"},an={class:"lowercase relative text-sm",style:{top:"calc(((-1em / 1.5) + 1ex) / 2)"}},ln=["src"],cn={class:"flex flex-col leading-tight grow min-w-0 cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-800/50 rounded-lg p-2 -m-2 transition-colors"},un={class:"flex items-center justify-between"},dn={class:"truncate font-medium text-zinc-900 dark:text-zinc-100 text-sm"},pn={class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},mn={__name:"user-details",props:{openSearch:{type:Function,required:!0}},setup(o){const i=$e(),{setColorScheme:l,userPreference:S}=Je(),$=C(!1),k=C(!1),_=C(null),A=C(null),z=B(()=>{const R=[{id:"profile",name:(0,window.wp.i18n.__)("Edit Profile","uixpress"),icon:"person",url:`${i.state.adminUrl}profile.php`,divider:!1},{id:"view-site",name:(0,window.wp.i18n.__)("Visit site","uixpress"),icon:"home",url:`${i.state.siteURL}`,divider:!1},{id:"site-settings",name:(0,window.wp.i18n.__)("Site Settings","uixpress"),icon:"settings",url:`${i.state.adminUrl}options-general.php`,divider:!1},{id:"logout",name:(0,window.wp.i18n.__)("Sign Out","uixpress"),icon:"logout",url:"",action:O,divider:!1,destructive:!0}];return i.state.userRoles.includes("administrator")||R.splice(2,1),R}),U=R=>{R.action?R.action():R.url&&(window.location.href=R.url),k.value=!1},O=async()=>{const y=await Ne({endpoint:"uixpress/v1/logout",type:"POST",params:{}});y&&(window.location.href=y.data.redirect_url)},F=async()=>{const R=await $t(i.state.userEmail);$.value=`https://gravatar.com/avatar/${R}?d=blank`};return Le(()=>{F()}),(R,y)=>(t(),n("div",{class:"flex flex-row items-center gap-3 shrink relative",onMouseenter:y[4]||(y[4]=E=>k.value=!0),onMouseleave:y[5]||(y[5]=E=>k.value=!1)},[m(he,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:q(()=>[k.value?(t(),n("div",Ts,[e("div",{ref_key:"userDropdownRef",ref:_,class:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg border border-zinc-200 dark:border-zinc-800 min-w-[240px]"},[e("div",qs,[e("div",Us,[e("div",Fs,[e("span",Ds,g(x(i).state.userName.charAt(0)),1),$.value?(t(),n("img",{key:0,src:$.value,class:"absolute w-full h-full object-cover"},null,8,Ps)):b("",!0)]),e("div",Os,[e("span",Vs,g(x(i).state.userName),1),e("span",js,g(x(i).state.userEmail),1)])])]),e("div",Hs,[(t(!0),n(j,null,Z(z.value,E=>(t(),n(j,{key:E.id},[e("button",{onClick:a=>U(E),class:V(["w-full px-4 py-2.5 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",E.destructive?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20":"text-zinc-700 dark:text-zinc-300"])},[m(N,{icon:E.icon,class:"text-sm opacity-70"},null,8,["icon"]),e("span",Bs,g(E.name),1)],10,Qs),E.divider?(t(),n("div",Ks)):b("",!0)],64))),128))]),e("div",Ws,[e("div",Gs,[e("div",Js,[e("span",Ys,g(R.__("Theme","uixpress")),1),e("div",Xs,[e("button",{onClick:y[0]||(y[0]=E=>x(l)("light")),class:V(["px-2 py-1 text-xs rounded-md transition-colors",x(S)==="light"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"]),title:R.__("Light Mode","uixpress")},[m(N,{icon:"light_mode",class:"text-sm"})],10,Zs),e("button",{onClick:y[1]||(y[1]=E=>x(l)("dark")),class:V(["px-2 py-1 text-xs rounded-md transition-colors",x(S)==="dark"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"]),title:R.__("Dark Mode","uixpress")},[m(N,{icon:"dark_mode",class:"text-sm"})],10,en),e("button",{onClick:y[2]||(y[2]=E=>x(l)("system")),class:V(["px-2 py-1 text-xs rounded-md transition-colors",x(S)==="system"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"]),title:R.__("System","uixpress")},[m(N,{icon:"settings",class:"text-sm"})],10,tn)])]),e("div",sn,[e("span",nn,g(R.__("Quick Actions","uixpress")),1),e("button",{onClick:y[3]||(y[3]=()=>{o.openSearch(),k.value=!1}),class:"p-1.5 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:R.__("Focus Search","uixpress")},[m(N,{icon:"search",class:"text-sm text-zinc-500 dark:text-zinc-400"})],8,rn)])])])],512)])):b("",!0)]),_:1}),e("div",on,[e("div",{ref_key:"userSectionRef",ref:A,class:"w-8 aspect-square bg-zinc-700 dark:bg-zinc-600 text-white rounded-full font-medium flex items-center justify-center shrink-0 relative overflow-hidden cursor-pointer hover:bg-zinc-600 dark:hover:bg-zinc-500 transition-colors"},[e("span",an,g(x(i).state.userName.charAt(0)),1),$.value?(t(),n("img",{key:0,src:$.value,class:"absolute w-full h-full object-cover"},null,8,ln)):b("",!0)],512),e("div",cn,[e("div",un,[e("span",dn,g(x(i).state.userName),1),m(N,{icon:k.value?"keyboard_arrow_up":"expand_more",class:V(["text-sm text-zinc-400 transition-transform",(k.value,"rotate-0")])},null,8,["icon","class"])]),e("span",pn,g(x(i).state.userEmail),1)])])],32))}},We={__name:"component-render",props:{item:{type:Object,required:!0}},setup(o){const i=$e(),l=o,S=_=>{if(!_||!Array.isArray(_))return!0;if(!i.state.currentUser||!i.state.currentUser.allcaps)return!1;for(let A of _)if(i.state.currentUser.allcaps[A])return!0;return!1},$=B(()=>{var A,z;return(((z=(A=l.item)==null?void 0:A.metadata)==null?void 0:z.language)||"vue")==="react"&&l.item.component?Dt(l.item.component):l.item.component}),k=B(()=>{var _,A;return((A=(_=l.item)==null?void 0:_.metadata)==null?void 0:A.language)==="react"});return(_,A)=>{var z,U,O,F,R,y;return S((U=(z=o.item)==null?void 0:z.metadata)==null?void 0:U.requires_capabilities)?(t(),n(j,{key:0},[k.value?(t(),Q(Re($.value),{key:1,appData:x(i),id:(R=o.item.metadata)==null?void 0:R.id,className:(y=o.item.metadata)==null?void 0:y.className},null,8,["appData","id","className"])):(t(),Q(Re($.value),{key:0,"app-data":x(i),id:(O=o.item.metadata)==null?void 0:O.id,class:V((F=o.item.metadata)==null?void 0:F.className)},null,8,["app-data","id","class"]))],64)):b("",!0)}}},fn={class:"w-5 h-5 flex items-center justify-center shrink-0"},vn=["src","alt"],gn={class:"max-w-[120px] truncate"},xn={class:"p-3 border-b border-zinc-200 dark:border-zinc-800"},hn={class:"max-h-64 overflow-y-auto"},_n=["onClick"],bn={class:"w-5 h-5 flex items-center justify-center shrink-0"},yn=["src","alt"],wn={class:"flex-1 min-w-0"},kn={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100 truncate"},zn={key:0,class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},$n={key:0,class:"px-3 py-6 text-center text-sm text-zinc-500 dark:text-zinc-500"},Sn={__name:"index",props:{modelValue:{type:String,default:"local"}},emits:["update:modelValue"],setup(o,{emit:i}){const l=o,S=i,$=$e(),k=C(!1),_=C(""),A=C(null),z=C(null),U=()=>{const M=localStorage.getItem("uixpress_selected_site");M&&M!==l.modelValue?S("update:modelValue",M):!M&&l.modelValue!=="local"&&localStorage.setItem("uixpress_selected_site",l.modelValue)},O=M=>{localStorage.setItem("uixpress_selected_site",M)};Le(()=>{U()});const F=M=>{if(!M||M==="local")return null;try{return`https://www.google.com/s2/favicons?domain=${new URL(M.startsWith("http")?M:`https://${M}`).hostname}&sz=32`}catch{return null}},R=M=>{if(M==="local")return(0,window.wp.i18n.__)("Local","uixpress");try{return new URL(M.url.startsWith("http")?M.url:`https://${M.url}`).hostname.replace("www.","")}catch{return M.url}},y=B(()=>{var H;if(l.modelValue==="local")return{id:"local",url:"local",name:(0,window.wp.i18n.__)("Local","uixpress")};const M=(H=$.state)==null?void 0:H.uixpress_settings,se=(M&&Array.isArray(M.remote_sites)?M.remote_sites:[]).find(me=>me&&me.url===l.modelValue);return se?{id:se.url,url:se.url,name:R(se)}:null}),E=B(()=>{var se;const M=[{id:"local",url:"local",name:(0,window.wp.i18n.__)("Local","uixpress"),username:null,app_password:null}],P=(se=$.state)==null?void 0:se.uixpress_settings;return P&&Array.isArray(P.remote_sites)&&P.remote_sites.forEach(H=>{H&&H.url&&M.push({id:H.url,url:H.url,name:R(H),username:H.username||null,app_password:H.app_password||null})}),M}),a=B(()=>{if(!_.value.trim())return E.value;const M=_.value.toLowerCase();return E.value.filter(P=>P.name.toLowerCase().includes(M)||P.url.toLowerCase().includes(M))}),d=()=>localStorage.getItem("uixpress_remote_site_explanation_seen")==="true",f=()=>{localStorage.setItem("uixpress_remote_site_explanation_seen","true")},L=async()=>{if(d())return!0;const M=`
    <div class="flex flex-col gap-4">
      <p class="text-zinc-700 dark:text-zinc-300">
        ${(0,window.wp.i18n.__)("When you switch to a remote site, all API requests will be sent to that site instead of the local site.","uixpress")}
      </p>
      <div class="bg-zinc-100 dark:bg-zinc-800 rounded-lg p-4">
        <p class="font-semibold text-sm text-zinc-900 dark:text-zinc-100 mb-2">
          ${(0,window.wp.i18n.__)("Remote site switching works on:","uixpress")}
        </p>
        <ul class="text-sm text-zinc-700 dark:text-zinc-300 space-y-1 list-disc list-inside">
          <li>${(0,window.wp.i18n.__)("Modern Media Page","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Modern Plugins Page","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Menu Creator","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Modern Dashboard","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Activity Log","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Database Explorer","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Admin Notices","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Role Editor","uixpress")}</li>
          <li>${(0,window.wp.i18n.__)("Modern Users Page","uixpress")}</li>
        </ul>
      </div>
      <p class="text-zinc-700 dark:text-zinc-300">
        ${(0,window.wp.i18n.__)("All default WordPress pages (Posts, Pages, Comments, etc.) will continue to show local content.","uixpress")}
      </p>
    </div>
  `,P=await z.value.show({title:(0,window.wp.i18n.__)("Remote Site Switching","uixpress"),message:M,okButton:(0,window.wp.i18n.__)("I Understand","uixpress"),cancelButton:(0,window.wp.i18n.__)("Cancel","uixpress")});return P&&f(),P},D=async M=>{if(M.id==="local"){S("update:modelValue",M.id),O(M.id),k.value=!1,_.value="",window.location.reload();return}await L()&&(S("update:modelValue",M.id),O(M.id),k.value=!1,_.value="",window.location.reload())},ce=M=>{A.value&&!A.value.contains(M.target)&&(k.value=!1,_.value="")},te=M=>{M.stopPropagation(),k.value=!k.value,k.value||(_.value="")};return Me(k,async M=>{M?(await ze(),setTimeout(()=>{document.addEventListener("click",ce,!0)},0)):document.removeEventListener("click",ce,!0)}),Nt(()=>{document.removeEventListener("click",ce,!0)}),(M,P)=>{var se;return t(),n("div",{class:"relative w-full",ref_key:"dropdownRef",ref:A},[e("button",{onClick:ee(te,["stop"]),type:"button",class:"w-full flex items-center gap-2 px-4 py-2.5 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors text-sm font-medium text-zinc-900 dark:text-zinc-100"},[e("div",fn,[y.value&&y.value.url!=="local"&&F(y.value.url)?(t(),n("img",{key:0,src:F(y.value.url),alt:y.value.name,class:"w-5 h-5 rounded",onError:P[0]||(P[0]=H=>H.target.style.display="none")},null,40,vn)):(t(),Q(N,{key:1,icon:"computer",class:"w-5 h-5 text-zinc-600 dark:text-zinc-300"}))]),e("span",gn,g(((se=y.value)==null?void 0:se.name)||M.__("Local","uixpress")),1),m(N,{icon:"unfold",class:V(["w-4 h-4 text-zinc-600 dark:text-zinc-300 transition-transform ml-auto",{"rotate-180":k.value}])},null,8,["class"])]),m(he,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-[-8px]","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 translate-y-[-8px]"},{default:q(()=>[k.value?(t(),n("div",{key:0,onClick:P[4]||(P[4]=ee(()=>{},["stop"])),class:"absolute top-full left-0 mt-2 w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-lg z-50 overflow-hidden"},[e("div",xn,[m(Ke,{modelValue:_.value,"onUpdate:modelValue":P[1]||(P[1]=H=>_.value=H),placeholder:M.__("Search sites...","uixpress"),icon:"search",class:"w-full",autocomplete:"off","data-form-type":"other",onClick:P[2]||(P[2]=ee(()=>{},["stop"]))},null,8,["modelValue","placeholder"])]),e("div",hn,[(t(!0),n(j,null,Z(a.value,H=>(t(),n("button",{key:H.id,onClick:me=>D(H),type:"button",class:V(["w-full flex items-center gap-3 px-3 py-2.5 text-left hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors",{"bg-zinc-100 dark:bg-zinc-900":o.modelValue===H.id}])},[e("div",bn,[H.url!=="local"&&F(H.url)?(t(),n("img",{key:0,src:F(H.url),alt:H.name,class:"w-5 h-5 rounded",onError:P[3]||(P[3]=me=>me.target.style.display="none")},null,40,yn)):(t(),Q(N,{key:1,icon:"computer",class:"w-5 h-5 text-zinc-600 dark:text-zinc-300"}))]),e("div",wn,[e("div",kn,g(H.name),1),H.url!=="local"?(t(),n("div",zn,g(H.url),1)):b("",!0)]),o.modelValue===H.id?(t(),Q(N,{key:0,icon:"check",class:"w-4 h-4 text-indigo-500 shrink-0"})):b("",!0)],10,_n))),128)),a.value.length===0?(t(),n("div",$n,g(M.__("No sites found","uixpress")),1)):b("",!0)])])):b("",!0)]),_:1}),m(Vt,{ref_key:"confirm",ref:z},null,512)],512)}}};function Cn(){const o=C([]),i="uipc-menu-favorites",l=()=>{const z=localStorage.getItem(i);z&&(o.value=JSON.parse(z))},S=()=>{localStorage.setItem(i,JSON.stringify(o.value))},$=z=>{var U,O;z&&z.url&&!o.value.some(F=>F.url===z.url)&&(z.settings||(z.settings={}),z.settings.name||(z.settings.name=z.name||((U=z.settings)==null?void 0:U.name)||""),z.settings.icon||(z.settings.icon=((O=z.settings)==null?void 0:O.icon)||"link"),o.value.push(z))},k=z=>{const U=o.value.findIndex(O=>O.url===z.url);U>-1&&o.value.splice(U,1)},_=(z,U)=>{const O=o.value.findIndex(F=>F.url===z.url);O>-1&&(o.value[O]={...o.value[O],...U},o.value[O].settings||(o.value[O].settings={}),U.settings&&(o.value[O].settings={...o.value[O].settings,...U.settings}))},A=z=>o.value.some(U=>U.url===z);return Le(()=>{l()}),Me(o,()=>{S()},{deep:!0}),{favorites:o,addFavorite:$,removeFavorite:k,updateFavorite:_,isFavorite:A}}const An=["href"],Mn=["href"],Ln=["src"],In={key:0,class:"mt-4"},En={class:"flex flex-col gap-3"},Nn=["onMouseenter","onMouseleave"],Rn={key:0,class:"absolute top-0 right-[-2px] text-xs bg-indigo-500 dark:bg-indigo-600/30 rounded border border-indigo-600 px-1 text-zinc-100"},Tn=["target"],qn={key:1,class:"w-full my-2"},Un={key:0,class:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-zinc-50 to-transparent dark:from-zinc-950 pointer-events-none",id:"uixp-menu-overlay"},Fn={class:"flex flex-row items-center gap-3 place-content-center relative"},Dn={key:0,ref:"userDropdownRef",class:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white dark:bg-zinc-800 rounded-xl shadow-xl border border-zinc-200 dark:border-zinc-800 py-2 z-50 min-w-[200px]"},Pn={class:"px-4 py-3 border-b border-zinc-100 dark:border-zinc-800"},On={class:"flex items-center gap-3"},Vn={class:"w-8 h-8 bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex items-center justify-center relative overflow-hidden border border-zinc-200 dark:border-zinc-600"},jn={class:"text-sm lowercase"},Hn=["src"],Qn={class:"flex flex-col min-w-0"},Bn={class:"text-sm font-medium dark:text-zinc-100 truncate"},Kn={class:"text-xs text-zinc-500 dark:text-zinc-400 truncate"},Wn={class:"py-1"},Gn=["onClick"],Jn={key:0,class:"h-px bg-zinc-100 dark:bg-zinc-700 my-1 mx-2"},Yn={class:"uppercase"},Xn=["src"],Zn={key:0,class:"text-sm py-3 font-medium mt-2 text-zinc-500 dark:text-zinc-400"},er={key:1,class:"flex flex-col gap-1"},tr={key:0,class:"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-1"},sr={class:"flex flex-col gap-3"},nr={class:"flex flex-col gap-1"},rr={class:"text-xs font-medium text-zinc-700 dark:text-zinc-300"},ir={class:"flex flex-col gap-1"},or={class:"text-xs font-medium text-zinc-700 dark:text-zinc-300"},ar={class:"flex flex-col gap-1"},lr={class:"text-xs font-medium text-zinc-700 dark:text-zinc-300"},cr={class:"flex flex-row gap-2"},ur={class:"flex flex-row gap-2 pt-1"},dr=["onMouseenter","onMouseleave"],pr={class:"absolute px-4 left-0"},mr={class:"mt-2 mb-4 pl-1"},fr=["target"],vr={key:1,class:"border-t border-zinc-200 dark:border-zinc-800 my-6"},gr={class:"relative grow overflow-hidden flex min-h-0"},xr=["onMouseenter","onMouseleave"],hr={class:"absolute px-4 left-0"},_r={class:"mt-2 mb-4 pl-1"},br=["target"],yr=["id"],wr=["innerHTML","id"],kr={key:0,class:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-zinc-50 to-transparent dark:from-zinc-950 pointer-events-none",id:"uixp-menu-overlay"},zr={__name:"index",props:["mobile"],setup(o){wt({react:{createRoot:kt.createRoot}});const{prefersDark:i}=Je(),l=$e(),S=C(null),$=C(240),k=C([]),_=o,A=C(localStorage.getItem("uixpress_selected_site")||"local"),{favorites:z,addFavorite:U,removeFavorite:O,updateFavorite:F,isFavorite:R}=Cn();Rt("addFavorite",U);const y=C(null),E=C(""),a=C(""),d=C(""),f=B(()=>{var T;const u=(T=l.state)==null?void 0:T.uixpress_settings,w=(u==null?void 0:u.remote_sites)||[];return!Array.isArray(w)||w.length===0?!1:(((u==null?void 0:u.remote_site_switcher_capability)||"manage_options")==="manage_options",l.state.canManageOptions===!0)}),L=C([]),D=C([]),ce=u=>{var w,I;y.value=u,E.value=((w=u.settings)==null?void 0:w.name)||u.name||"",a.value=u.url||"",d.value=((I=u.settings)==null?void 0:I.icon)||"link"},te=()=>{y.value&&(F(y.value,{url:a.value,name:E.value,settings:{...y.value.settings,name:E.value,icon:d.value}}),y.value=null,E.value="",a.value="",d.value="")},M=()=>{y.value=null,E.value="",a.value="",d.value=""},P=B(()=>A.value&&A.value!=="local"),se=()=>{var T;const u=((T=l.state)==null?void 0:T.uixpress_settings)||{},w=[],I=[];return w.push("uipx-settings"),I.push("uipx-menucreator"),u.enable_activity_logger===!0&&I.push("uixpress-activity-log"),u.enable_database_explorer===!0&&I.push("uixpress-database-explorer"),I.push("uixpress-admin-notices"),u.enable_role_editor===!0&&I.push("uipx-role-editor"),I.push("uipx-settings"),u.use_modern_media_page===!0&&(w.push("menu-media"),w.push("upload")),u.use_modern_plugin_page===!0&&(w.push("plugin-manager"),w.push("toplevel_page_plugin-manager")),u.use_custom_dashboard===!0&&(w.push("menu-dashboard"),w.push("dashboard")),u.use_modern_users_page===!0&&(w.push("menu-users"),w.push("users")),{topLevelIds:w,submenuIds:I}},H=(u,w)=>{if(!u)return!1;if(w.includes(u))return!0;const I=u.split("_"),T=I[I.length-1];if(w.includes(T))return!0;for(const pe of I)if(w.includes(pe))return!0;for(const pe of w)if(u.includes(pe))return!0;return!1},me=u=>u?u==="uipx-settings"||u.includes("uipx-settings"):!1,_e=B(()=>{if(!Array.isArray(ie.value))return[];let u=ie.value.filter(w=>{var I;return!((I=w.settings)!=null&&I.hidden)});if(P.value){const{topLevelIds:w,submenuIds:I}=se();u=u.filter(T=>H(T.id,w)).map(T=>{if(me(T.id)){const pe=Array.isArray(T.submenu)?T.submenu.filter(X=>{if(X.url){for(const c of I)if(X.url.includes(`page=${c}`)||X.url.includes(`&page=${c}`))return!0}if(X.sub_id&&H(X.sub_id,I))return!0;if(X.id){if(H(X.id,I))return!0;if(X.url){for(const c of I)if(X.id.includes(c))return!0}}return!1}):[];return{...T,submenu:pe,active:T.active}}return{...T,submenu:[]}})}return u}),ue=B(()=>_.mobile?!1:l.state.menu_minimised),De=async()=>{await qe();const u=Ce();if(Array.isArray(u)){ie.value=u,be();return}else if(u=="no_menus"){ie.value=[...we.value];return}setTimeout(Ue,1)},Ie=B(()=>{var u;return(u=l.state.uixpress_settings)==null?void 0:u.layout}),Ue=async()=>{await qe();const u=Ce();if(Array.isArray(u)){ie.value=u,be();return}else if(u=="no_menus"){ie.value=[...we.value];return}et.value=!0;const I=await Ne({endpoint:"wp/v2/uipxmenus",params:{per_page:100,status:"publish"}});if(et.value=!1,!I){ie.value=[...we.value];return}k.value=I.data,G()},G=()=>{var u,w,I,T,pe,X,c,ae,re,J,Se,K,r,s,p,h,v,W,fe,ve,Y,le,lt,ct;if(!k.value.length){ie.value=[...we.value],ne("no_menus");return}for(let ge of k.value){if(((w=(u=ge.meta)==null?void 0:u.menu_settings)==null?void 0:w.applies_to_everyone)&&Array.isArray((I=ge.meta)==null?void 0:I.menu_items)){if(!((T=ge.meta)!=null&&T.menu_items.length))continue;ie.value=[...(pe=ge.meta)==null?void 0:pe.menu_items],ne((X=ge.meta)==null?void 0:X.menu_items),be();return}const ut=l.state.userRoles,St=(ae=(c=ge.meta)==null?void 0:c.menu_settings)!=null&&ae.includes?(J=(re=ge.meta)==null?void 0:re.menu_settings)==null?void 0:J.includes.filter(xe=>xe.type=="role"):[],Ct=((K=(Se=ge.meta)==null?void 0:Se.menu_settings)!=null&&K.includes?(s=(r=ge.meta)==null?void 0:r.menu_settings)==null?void 0:s.includes.filter(xe=>xe.type=="user"):[]).find(xe=>xe.id==l.state.userID);let dt=!1;for(let xe of ut)if(St.find(Xe=>Xe.value==xe)){dt=!0;break}const At=(h=(p=ge.meta)==null?void 0:p.menu_settings)!=null&&h.excludes?(W=(v=ge.meta)==null?void 0:v.menu_settings)==null?void 0:W.excludes.filter(xe=>xe.type=="role"):[],Mt=((ve=(fe=ge.meta)==null?void 0:fe.menu_settings)!=null&&ve.excludes?(le=(Y=ge.meta)==null?void 0:Y.menu_settings)==null?void 0:le.excludes.filter(xe=>xe.type=="user"):[]).find(xe=>xe.id==l.state.userID);let pt=!1;for(let xe of ut)if(At.find(Xe=>Xe.value==xe)){pt=!0;break}if((Ct||dt)&&!Mt&&!pt){ie.value=[...(lt=ge.meta)==null?void 0:lt.menu_items],ne((ct=ge.meta)==null?void 0:ct.menu_items),be();return}}ie.value=[...we.value],ne("no_menus")},ne=u=>{const w=`uixpress_menu_${l.state.userID}`,I={value:u,timestamp:new Date().getTime()};localStorage.setItem(w,JSON.stringify(I))};function Ce(){const u=`uixpress_menu_${l.state.userID}`,w=localStorage.getItem(u);if(!w)return null;const I=JSON.parse(w),T=new Date().getTime(),pe=3600*1e3;return T-I.timestamp>pe?(localStorage.removeItem(u),null):I.value}const be=()=>{let u=document.querySelector("#adminmenu a.current")||document.querySelector("#adminmenu .wp-menu-open a")||document.querySelector("#adminmenu a[aria-current='page']"),w="";u&&u.tagName&&u.tagName.toLowerCase()==="a"&&(w=u.getAttribute("href")),ie.value=ie.value.filter(I=>Ee(I.id)||I.custom).map(I=>({...I,active:w==I.url}));for(let I of ie.value)I.type=="separator"||!Array.isArray(I.submenu)||(I.submenu=I.submenu.filter(T=>Ee(T.id)||T.custom).map(T=>({...T,active:w==T.url})));for(let[I,T]of we.value.entries())if(de(T.id)||ie.value.splice(I,0,T),!!T.submenu)for(let[pe,X]of T.submenu.entries()){if(de(X.id))continue;const c=ie.value.find(ae=>ae.id==T.id);c?c.submenu.splice(pe,0,X):(T.submenu=[X],ie.value.splice(I,0,T))}},de=u=>{const w=ie.value.find(T=>T.id==u),I=Ye.value.find(T=>T.id==u);return w||I},Ee=u=>{const w=we.value.find(T=>T.id==u),I=Pe.value.find(T=>T.id==u);return w||I},oe=u=>{if(u!=null&&u.url&&mt(u.url)||u.active)return!0;if(u.submenu)return u.submenu.find(w=>w!=null&&w.url&&mt(w.url)?!0:w.active)},Fe=u=>{$.value=u},qe=async()=>{const u=document.querySelector("#adminmenumain"),{processedMenu:w}=await Kt(u);we.value=w},Ye=B(()=>ie.value.reduce((u,w)=>(Array.isArray(w.submenu)&&u.push(...w.submenu),u),[])),Pe=B(()=>we.value.reduce((u,w)=>(Array.isArray(w.submenu)&&u.push(...w.submenu),u),[])),He=u=>!Array.isArray(u.submenu)||!u.submenu.length?!1:!!(oe(u)||u.active);Ae(()=>{let u="1px";if(Ie.value=="bubble"&&(u="1rem"),ue.value&&S.value)setTimeout(()=>{const I=S.value.getBoundingClientRect().width;document.documentElement.style.setProperty("--uixp-menu-width",`calc(${I}px + ${u})`)},0);else{let w=240;w=$.value,document.documentElement.style.setProperty("--uixp-menu-width",`calc(${w}px + ${u})`)}}),Me(()=>ie.value,()=>{l.state.adminMenu=ie.value},{deep:!0}),Me(()=>A.value,()=>{}),Le(async()=>{const u=new CustomEvent("uixpress/sidebar/ready");document.dispatchEvent(u),await ze(),L.value=await Ve("uixpress/sidebar/render/premenu",L.value),D.value=await Ve("uixpress/sidebar/render/postmenu",D.value)});const Qe=async()=>{try{await ze();const u=`${l.state.adminUrl}/admin.php?page=plugin-manager`,w=await fetch(u);if(!w.ok)return;const I=await w.text(),X=new DOMParser().parseFromString(I,"text/html").getElementById("adminmenumain");if(!X)return;const c=X.querySelectorAll("a");for(let J of c)J.classList.remove("current"),J.classList.remove("wp-menu-open"),J.getAttribute("aria-current")=="page"&&J.removeAttribute("aria-current"),J.classList.contains("toplevel_page_plugin-manager")&&J.classList.add("current");const ae=X.querySelectorAll("li");for(let J of ae)J.classList.remove("current"),J.classList.remove("wp-menu-open");document.getElementById("adminmenumain").replaceWith(X),await ze(),await qe(),be()}catch{}};return document.addEventListener("uipx-plugin-activated",Qe),document.addEventListener("uipx-plugin-deactivated",Qe),De(),(u,w)=>{var I,T,pe,X;return x(we)?(t(),n("div",{key:0,class:V(["flex flex-col gap-1 w-full h-full relative max-h-full overflow-hidden bg-zinc-50 dark:bg-zinc-950",ue.value?"py-4":"p-4 px-6 pt-2"]),ref_key:"menupanel",ref:S,style:Ge(ue.value?"width:auto":`width:${$.value}px`)},[e("div",{class:V(["flex flex-row items-center",ue.value?"place-content-center mb-3":"place-content-between"])},[ue.value?b("",!0):(t(),n(j,{key:0},[(T=(I=x(l).state)==null?void 0:I.uixpress_settings)!=null&&T.logo?(t(),n("a",{key:1,href:x(l).state.adminUrl,class:"h-10"},[e("img",{src:x(i)&&((X=(pe=x(l).state)==null?void 0:pe.uixpress_settings)!=null&&X.dark_logo)?x(l).state.uixpress_settings.dark_logo:x(l).state.uixpress_settings.logo,class:"h-full"},null,8,Ln)],8,Mn)):(t(),n("a",{key:0,href:x(l).state.adminUrl,class:"pl-3 place-self-start"},[m(N,{icon:"uixpress",class:"text-5xl dark:text-white"})],8,An))],64)),e("div",{class:V(["flex items-center -mr-2",ue.value?"flex-col flex-col-reverse":"flex-row"])},[m(Rs),o.mobile?b("",!0):(t(),Q(ye,{key:0,type:"transparent",title:u.__("Minify menu","uixpress"),onClick:w[0]||(w[0]=c=>x(l).state.menu_minimised=!x(l).state.menu_minimised),class:"hidden md:block"},{default:q(()=>[m(N,{icon:x(l).state.menu_minimised?"right_panel_close":"left_panel_close",class:"text-xl text-zinc-500 dark:text-zinc-400"},null,8,["icon"])]),_:1},8,["title"]))],2)],2),(t(),Q(Re("style"),null,{default:q(()=>[ke(g(x(Qt)),1)]),_:1})),(t(),Q(Re("style"),null,{default:q(()=>[ke(g(x(Xt)),1)]),_:1})),!ue.value&&f.value?(t(),n("div",In,[m(Sn,{modelValue:A.value,"onUpdate:modelValue":w[1]||(w[1]=c=>A.value=c)},null,8,["modelValue"])])):b("",!0),x(et)?(t(),n("div",{key:1,class:V(["flex flex-col gap-6 mt-6",ue.value?"":"p-3"])},[(t(),n(j,null,Z(4,c=>e("div",En,[w[7]||(w[7]=e("div",{class:"h-6 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse"},null,-1)),e("div",{class:V(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",ue.value?"w-full":"ml-8 w-2/3"])},null,2),e("div",{class:V(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",ue.value?"w-full":"ml-8 w-1/4"])},null,2),e("div",{class:V(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",ue.value?"w-full":"ml-8 w-1/3"])},null,2)])),64))],2)):b("",!0),ue.value?(t(),n(j,{key:2},[e("div",{class:V(["relative grow flex overflow-hidden min-h-0",ue.value?"px-4":""])},[e("div",{class:V(["flex flex-col grow gap-1 custom-scrollbar pb-16 min-h-0 overflow-auto",x(z).length?"":"mt-6"])},[(t(!0),n(j,null,Z(_e.value,(c,ae)=>{var re;return t(),n(j,null,[c.type!="separator"?(t(),n("div",{key:0,class:"relative group-parent",onMouseenter:J=>c.hover=!0,onMouseleave:J=>c.hover=!1},[m(rt,{link:c,isActive:oe(c),class:"p-2"},{default:q(()=>[m(nt,{link:c},null,8,["link"]),x(Te)(c,"notifications",c.notifications)?(t(),n("div",Rn,g(x(Te)(c,"notifications",c.notifications)),1)):b("",!0)]),_:2},1032,["link","isActive"]),c.submenu&&c.submenu.length&&c.hover?(t(),n("div",{key:0,class:"absolute right-0 top-0 translate-x-full transition-opacity translate-x-0",target:(re=c.settings)!=null&&re.open_new?"_BLANK":""},[m(he,null,{default:q(()=>[m(st,{parent:S.value,mouseenter:()=>c.hover=!0,mouseleave:()=>c.hover=!1},{default:q(()=>[(t(!0),n(j,null,Z(c.submenu,J=>(t(),Q(Oe,{isActive:oe(J),sublink:J,isFavorite:x(R)(J.url),hideFavorite:!0},null,8,["isActive","sublink","isFavorite"]))),256))]),_:2},1032,["parent","mouseenter","mouseleave"])]),_:2},1024)],8,Tn)):b("",!0)],40,Nn)):(t(),n("div",qn))],64)}),256))],2),Ie.value!="bubble"?(t(),n("div",Un)):b("",!0)],2),e("div",Fn,[m(he,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:q(()=>[u.showUserDropdown?(t(),n("div",Dn,[e("div",Pn,[e("div",On,[e("div",Vn,[e("span",jn,g(x(l).state.userName.charAt(0)),1),u.gravatar?(t(),n("img",{key:0,src:u.gravatar,class:"absolute w-full h-full"},null,8,Hn)):b("",!0)]),e("div",Qn,[e("span",Bn,g(x(l).state.userName),1),e("span",Kn,g(x(l).state.userEmail),1)])])]),e("div",Wn,[(t(!0),n(j,null,Z(u.userMenuItems,c=>(t(),n(j,{key:c.id},[e("button",{onClick:ae=>u.handleUserMenuAction(c),class:V(["w-full px-4 py-2 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors text-sm",c.destructive?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20":"text-zinc-700 dark:text-zinc-200"])},[m(N,{icon:c.icon,class:"text-base opacity-70"},null,8,["icon"]),e("span",null,g(c.name),1)],10,Gn),c.divider?(t(),n("div",Jn)):b("",!0)],64))),128))])],512)):b("",!0)]),_:1}),e("div",{ref:"userSectionRef",onClick:w[2]||(w[2]=c=>u.showUserDropdown=!u.showUserDropdown),class:"w-7 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden cursor-pointer hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 transition-all"},[e("span",Yn,g(x(l).state.userName.charAt(0)),1),u.gravatar?(t(),n("img",{key:0,src:u.gravatar,class:"absolute w-full h-full z-[2]"},null,8,Xn)):b("",!0)],512)])],64)):b("",!0),ue.value?b("",!0):(t(),n(j,{key:3},[L.value.length>0?(t(!0),n(j,{key:0},Z(L.value,(c,ae)=>{var re;return t(),Q(We,{key:((re=c.metadata)==null?void 0:re.id)||`premenu-${ae}`,item:c},null,8,["item"])}),128)):b("",!0),m(ot,null,{default:q(()=>[x(z).length?(t(),n(j,{key:0},[x(z).length?(t(),n("div",Zn,g(u.__("Shortcuts","uixpress")),1)):b("",!0),x(z).length?(t(),n("div",er,[m(x(Wt),{class:"contents",group:{name:"menus",pull:!0,put:!0,revertClone:!1},list:x(z),animation:"300",sort:!0,disabled:!!y.value},{default:q(()=>[m(ot,null,{default:q(()=>[(t(!0),n(j,null,Z(x(z),(c,ae)=>{var re,J,Se;return t(),n(j,{key:ae},[c.type!="separator"&&((re=y.value)==null?void 0:re.url)===c.url?(t(),n("div",tr,[e("div",sr,[e("div",nr,[e("label",rr,g(u.__("Name","uixpress")),1),m(Ke,{modelValue:E.value,"onUpdate:modelValue":w[3]||(w[3]=K=>E.value=K),type:"text",class:"w-full",placeholder:u.__("Shortcut name","uixpress")},null,8,["modelValue","placeholder"])]),e("div",ir,[e("label",or,g(u.__("URL","uixpress")),1),m(Ke,{modelValue:a.value,"onUpdate:modelValue":w[4]||(w[4]=K=>a.value=K),type:"text",class:"w-full",placeholder:u.__("https://example.com","uixpress")},null,8,["modelValue","placeholder"])]),e("div",ar,[e("label",lr,g(u.__("Icon","uixpress")),1),e("div",cr,[m(Bt,{modelValue:d.value,"onUpdate:modelValue":w[5]||(w[5]=K=>d.value=K),type:"text",class:"flex-shrink-0"},null,8,["modelValue"]),m(Ke,{modelValue:d.value,"onUpdate:modelValue":w[6]||(w[6]=K=>d.value=K),type:"text",class:"grow",placeholder:u.__("icon name","uixpress")},null,8,["modelValue","placeholder"])])]),e("div",ur,[m(ye,{type:"primary",onClick:te,class:"text-xs px-2 py-1"},{default:q(()=>[ke(g(u.__("Save","uixpress")),1)]),_:1}),m(ye,{type:"default",onClick:M,class:"text-xs px-2 py-1"},{default:q(()=>[ke(g(u.__("Cancel","uixpress")),1)]),_:1}),m(ye,{type:"danger",onClick:K=>{x(O)(c),M()},class:"text-xs px-2 py-1 ml-auto"},{default:q(()=>[ke(g(u.__("Delete","uixpress")),1)]),_:1},8,["onClick"])])])])):c.type!="separator"?(t(),n("div",{key:1,onMouseenter:K=>c.hover=!0,onMouseleave:K=>c.hover=!1,class:"relative group-parent"},[m(rt,{link:c,isActive:oe(c),class:"p-1 pr-4 pl-1 group"},{default:q(()=>{var K,r;return[e("div",pr,[m(nt,{link:c},null,8,["link"])]),m(ft,{link:c},null,8,["link"]),y.value?b("",!0):(t(),Q(N,{key:0,icon:"edit",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:ee(s=>ce(c),["prevent","stop"])},null,8,["onClick"])),y.value?b("",!0):(t(),Q(N,{key:1,icon:"close",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:ee(s=>x(O)(c),["prevent","stop"])},null,8,["onClick"])),c.submenu&&c.submenu.length&&((K=x(l).state.uixpress_settings)==null?void 0:K.submenu_style)!="hover"?(t(),Q(N,{key:2,icon:oe(c)||c.active?"expand_more":"chevron_left",class:V([oe(c)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"]),onClick:ee(s=>c.active=!c.active,["prevent","stop"])},null,8,["icon","class","onClick"])):b("",!0),(r=c.settings)!=null&&r.open_new?(t(),Q(N,{key:3,icon:"open_new",class:V([oe(c)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"])},null,8,["class"])):b("",!0)]}),_:2},1032,["link","isActive"]),He(c)?(t(),Q(he,{key:0},{default:q(()=>[e("div",mr,[(t(!0),n(j,null,Z(c.submenu,K=>(t(),Q(Oe,{isActive:oe(K),sublink:K,isFavorite:x(R)(K.url),class:"pl-12"},null,8,["isActive","sublink","isFavorite"]))),256))])]),_:2},1024)):c.submenu&&c.submenu.length&&c.hover&&((J=x(l).state.uixpress_settings)==null?void 0:J.submenu_style)=="hover"&&!o.mobile?(t(),n("div",{key:1,class:"absolute right-0 top-0 translate-x-full transition-opacity translate-x-0",target:(Se=c.settings)!=null&&Se.open_new?"_BLANK":""},[m(he,null,{default:q(()=>[m(st,{parent:S.value,mouseenter:()=>c.hover=!0,mouseleave:()=>c.hover=!1},{default:q(()=>[(t(!0),n(j,null,Z(c.submenu,K=>(t(),Q(Oe,{isActive:oe(K),sublink:K,isFavorite:x(R)(K.url),hideFavorite:!0},null,8,["isActive","sublink","isFavorite"]))),256))]),_:2},1032,["parent","mouseenter","mouseleave"])]),_:2},1024)],8,fr)):b("",!0)],40,dr)):b("",!0)],64)}),128))]),_:1})]),_:1},8,["list","disabled"])])):b("",!0)],64)):b("",!0)]),_:1}),x(z).length?(t(),n("div",vr)):b("",!0),e("div",gr,[e("div",{class:V(["flex flex-col grow gap-1 grow custom-scrollbar pb-16 min-h-0 overflow-auto",x(z).length?"":"mt-6"])},[(t(!0),n(j,null,Z(_e.value,(c,ae)=>{var re,J,Se,K,r,s,p;return t(),n(j,null,[c.type!="separator"?(t(),n("div",{key:0,onMouseenter:h=>c.hover=!0,onMouseleave:h=>c.hover=!1,class:"relative group-parent"},[m(rt,{link:c,isActive:oe(c),class:"p-1 pr-4 pl-1"},{default:q(()=>{var h,v;return[e("div",hr,[m(nt,{link:c},null,8,["link"])]),m(ft,{link:c,active:oe(c)},null,8,["link","active"]),x(R)(c.url)?b("",!0):(t(),Q(N,{key:0,icon:"star",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:ee(W=>x(U)(c),["prevent","stop"])},null,8,["onClick"])),c.submenu&&c.submenu.length&&((h=x(l).state.uixpress_settings)==null?void 0:h.submenu_style)!="hover"?(t(),Q(N,{key:1,icon:oe(c)||c.active?"expand_more":"chevron_left",class:V([oe(c)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"]),onClick:ee(W=>c.active=!c.active,["prevent","stop"])},null,8,["icon","class","onClick"])):b("",!0),(v=c.settings)!=null&&v.open_new?(t(),Q(N,{key:2,icon:"open_new",class:V([oe(c)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"])},null,8,["class"])):b("",!0)]}),_:2},1032,["link","isActive"]),He(c)?(t(),Q(he,{key:0},{default:q(()=>[e("div",_r,[(t(!0),n(j,null,Z(c.submenu,h=>(t(),Q(Oe,{isActive:oe(h),sublink:h,isFavorite:x(R)(h.url),class:"pl-12"},null,8,["isActive","sublink","isFavorite"]))),256))])]),_:2},1024)):c.submenu&&c.submenu.length&&c.hover&&((re=x(l).state.uixpress_settings)==null?void 0:re.submenu_style)=="hover"&&!o.mobile?(t(),n("div",{key:1,class:"absolute right-0 top-0 translate-x-full transition-opacity translate-x-0",target:(J=c.settings)!=null&&J.open_new?"_BLANK":""},[m(he,null,{default:q(()=>[m(st,{parent:S.value,mouseenter:()=>c.hover=!0,mouseleave:()=>c.hover=!1},{default:q(()=>[(t(!0),n(j,null,Z(c.submenu,h=>(t(),Q(Oe,{isActive:oe(h),sublink:h,isFavorite:x(R)(h.url),hideFavorite:!0},null,8,["isActive","sublink","isFavorite"]))),256))]),_:2},1032,["parent","mouseenter","mouseleave"])]),_:2},1024)],8,br)):b("",!0)],40,xr)):c.type=="separator"&&!((Se=c.settings)!=null&&Se.hidden)&&!((K=c.settings)!=null&&K.name)?(t(),n("div",{key:1,class:"w-full my-2",id:c.id||((r=c.settings)==null?void 0:r.id)},null,8,yr)):c.type=="separator"&&!((s=c.settings)!=null&&s.hidden)&&((p=c.settings)!=null&&p.name)?(t(),n("div",{key:2,class:"text-sm py-3 font-medium mt-2 rounded-lg",innerHTML:c.settings.name,id:c.id},null,8,wr)):b("",!0)],64)}),256))],2),Ie.value!="bubble"?(t(),n("div",kr)):b("",!0)]),D.value.length>0?(t(!0),n(j,{key:2},Z(D.value,(c,ae)=>{var re;return t(),Q(We,{key:((re=c.metadata)==null?void 0:re.id)||`postmenu-${ae}`,item:c},null,8,["item"])}),128)):b("",!0),m(mn)],64)),m(Zt,{onResize:Fe,minWidth:160,panelRef:S.value},null,8,["panelRef"])],6)):b("",!0)}}},$r=je(zr,[["__scopeId","data-v-e51a4dba"]]),vt="uixp-search-history",gt="uixp-recently-accessed",xt="uixp-frequently-used",ht=10,_t=5,bt=5,Sr=()=>{const o=C([]),i=C([]),l=C([]),S=()=>{try{const a=localStorage.getItem(vt);a&&(o.value=JSON.parse(a))}catch(a){console.error("Error loading search history:",a)}},$=()=>{try{localStorage.setItem(vt,JSON.stringify(o.value))}catch(a){console.error("Error saving search history:",a)}},k=a=>{if(!a||a.trim()==="")return;const d=a.trim(),f=o.value.findIndex(L=>L.query===d);f>-1&&o.value.splice(f,1),o.value.unshift({query:d,timestamp:Date.now()}),o.value.length>ht&&(o.value=o.value.slice(0,ht)),$()},_=()=>{o.value=[],$()},A=()=>{try{const a=localStorage.getItem(gt);a&&(i.value=JSON.parse(a))}catch(a){console.error("Error loading recently accessed:",a)}},z=()=>{try{localStorage.setItem(gt,JSON.stringify(i.value))}catch(a){console.error("Error saving recently accessed:",a)}},U=a=>{if(!a||!a.id||!a.category)return;const d={...a,timestamp:Date.now(),accessCount:1},f=i.value.findIndex(L=>L.id===a.id&&L.category===a.category);f>-1&&i.value.splice(f,1),i.value.unshift(d),i.value.length>_t&&(i.value=i.value.slice(0,_t)),R(a),z()},O=()=>{try{const a=localStorage.getItem(xt);a&&(l.value=JSON.parse(a))}catch(a){console.error("Error loading frequently used:",a)}},F=()=>{try{localStorage.setItem(xt,JSON.stringify(l.value))}catch(a){console.error("Error saving frequently used:",a)}},R=a=>{if(!a||!a.id||!a.category)return;const d=l.value.findIndex(f=>f.id===a.id&&f.category===a.category);d>-1?(l.value[d].accessCount+=1,l.value[d].lastAccessed=Date.now()):l.value.push({...a,accessCount:1,lastAccessed:Date.now()}),l.value.sort((f,L)=>L.accessCount!==f.accessCount?L.accessCount-f.accessCount:L.lastAccessed-f.lastAccessed),l.value.length>bt&&(l.value=l.value.slice(0,bt)),F()},y=(a="")=>{if(!a)return i.value;const d=a.toLowerCase();return i.value.filter(f=>{var D;return(f.name||((D=f.title)==null?void 0:D.rendered)||f.email||"").toLowerCase().includes(d)})},E=(a="")=>{if(!a)return l.value;const d=a.toLowerCase();return l.value.filter(f=>{var D;return(f.name||((D=f.title)==null?void 0:D.rendered)||f.email||"").toLowerCase().includes(d)})};return Le(()=>{S(),A(),O()}),Me(o,()=>{$()},{deep:!0}),Me(i,()=>{z()},{deep:!0}),Me(l,()=>{F()},{deep:!0}),{searchHistory:o,recentlyAccessed:i,frequentlyUsed:l,addToHistory:k,clearHistory:_,trackAccess:U,getFilteredRecentlyAccessed:y,getFilteredFrequentlyUsed:E}},Cr={class:"mx-auto p-6 w-[500px] flex flex-col gap-6 max-w-[100vw]"},Ar={class:"relative flex"},Mr=["placeholder"],Lr={class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1"},Ir={key:0,class:"absolute top-0 right-0 h-full flex flex-col place-content-center px-2 py-1"},Er={class:"relative"},Nr={class:"flex flex-col gap-6 max-h-[70dvh] overflow-auto"},Rr={key:0,class:"flex flex-col gap-4 p-6 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl border border-zinc-200 dark:border-zinc-800"},Tr={class:"flex items-start justify-between"},qr={class:"flex flex-col gap-2"},Ur={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100"},Fr={class:"text-sm text-zinc-600 dark:text-zinc-400"},Dr={class:"grid grid-cols-2 gap-3 mt-2"},Pr=["onClick"],Or={class:"flex items-center gap-2"},Vr={class:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center group-hover:bg-indigo-200 dark:group-hover:bg-indigo-900/50 transition-colors"},jr={class:"flex flex-col"},Hr={class:"text-xs font-medium text-zinc-900 dark:text-zinc-100"},Qr={class:"text-xs text-zinc-500 dark:text-zinc-400"},Br={class:"flex items-center gap-4 pt-2 border-t border-zinc-200 dark:border-zinc-800"},Kr={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400"},Wr={key:0,class:"flex flex-col items-center justify-center py-12 px-6 text-center"},Gr={class:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4"},Jr={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-2"},Yr={class:"text-sm text-zinc-600 dark:text-zinc-400 mb-6 max-w-sm"},Xr={class:"flex flex-wrap gap-2 justify-center"},Zr={key:0,class:"flex flex-col items-center justify-center py-12 px-6 text-center"},ei={class:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4"},ti={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-2"},si={class:"text-sm text-zinc-600 dark:text-zinc-400 mb-6 max-w-sm"},ni={class:"flex flex-col gap-2 w-full max-w-sm mb-6"},ri={class:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2 uppercase tracking-wide"},ii={class:"grid grid-cols-2 gap-2"},oi=["onClick"],ai={class:"flex items-center gap-2"},li={class:"flex flex-col"},ci={class:"text-xs font-medium text-zinc-900 dark:text-zinc-100"},ui={class:"text-xs text-zinc-500 dark:text-zinc-400"},di={class:"w-full max-w-sm border-t border-zinc-200 dark:border-zinc-800 pt-6"},pi={class:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-3 uppercase tracking-wide"},mi={class:"grid grid-cols-2 gap-3 text-xs"},fi={class:"flex items-center gap-2"},vi={class:"text-zinc-600 dark:text-zinc-400"},gi={class:"flex items-center gap-2"},xi={class:"text-zinc-600 dark:text-zinc-400"},hi={class:"flex items-center gap-2"},_i={class:"text-zinc-600 dark:text-zinc-400"},bi={class:"flex items-center gap-2"},yi={class:"text-zinc-600 dark:text-zinc-400"},wi={key:0,class:"flex flex-col gap-4"},ki={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},zi={class:"flex flex-col gap-2 text-sm"},$i={class:"flex items-center gap-2"},Si={class:"text-zinc-600 dark:text-zinc-400"},Ci={class:"flex items-center gap-2"},Ai={class:"text-zinc-600 dark:text-zinc-400"},Mi={class:"flex items-center gap-2"},Li={class:"text-zinc-600 dark:text-zinc-400"},Ii={class:"flex items-center gap-2"},Ei={class:"text-zinc-600 dark:text-zinc-400"},Ni={class:"flex items-center gap-2"},Ri={class:"text-zinc-600 dark:text-zinc-400"},Ti={key:1,class:"flex flex-col gap-2"},qi={class:"flex items-center justify-between mb-2"},Ui={class:"capitalize text-zinc-400 dark:text-zinc-200"},Fi={class:"flex flex-col gap-1"},Di=["onClick"],Pi={class:"flex items-center gap-2"},Oi={key:2,class:"flex flex-col gap-2"},Vi={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},ji={class:"flex flex-col"},Hi=["href","onClick"],Qi={class:"grow truncate"},Bi={key:3,class:"flex flex-col gap-2"},Ki={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},Wi={class:"flex flex-col"},Gi=["href","onClick"],Ji={class:"grow truncate"},Yi={key:4},Xi={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},Zi={class:"flex flex-col"},eo=["onClick"],to={class:"grow"},so={key:0,class:"flex flex-col gap-6"},no={key:0},ro={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},io={class:"flex flex-col"},oo=["href","onClick"],ao={key:0,class:"w-8 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden"},lo={class:"uppercase text-xs"},co={key:1,class:"w-8 aspect-square bg-zinc-200 dark:bg-zinc-700 rounded font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden"},uo=["src"],po={key:2,class:"w-8 aspect-square bg-zinc-200 dark:bg-zinc-700 rounded flex place-content-center items-center justify-center shrink-0 relative overflow-hidden"},mo=["src"],fo={key:3,class:"w-8 aspect-square bg-zinc-200 dark:bg-zinc-700 rounded flex place-content-center items-center justify-center shrink-0"},vo={class:"grow min-w-0 flex flex-col gap-1"},go={class:"flex items-center gap-2"},xo=["innerHTML"],ho={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400"},_o={key:0},bo={key:1,class:"flex items-center gap-1"},yo={key:2,class:"flex items-center gap-1"},wo={key:0,class:"absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-white dark:from-zinc-900 to-transparent pointer-events-none"},ko={class:"flex flex-row gap-6 items-center text-zinc-500"},zo={class:"flex flex-row gap-2 items-center"},$o={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},So={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},Co={class:"text-sm"},Ao={class:"flex flex-row gap-2 items-center"},Mo={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},Lo={class:"text-sm"},Io={class:"flex flex-row gap-2 items-center"},Eo={class:"text-sm"},No={__name:"index",setup(o){const i=$e(),{setColorScheme:l,prefersDark:S,globalOverride:$}=Je(),{searchHistory:k,addToHistory:_,clearHistory:A,trackAccess:z,getFilteredRecentlyAccessed:U,getFilteredFrequentlyUsed:O}=Sr();Ot(),C(!1);const F=C(""),R=C(null),y=C({}),E=C(!1),a=C(""),d=C(-1),f=C(!1),L=C(!1),D=C(!1),ce=async()=>{window.location.href=`${i.state.adminUrl}post-new.php`},te=async()=>{window.location.href=`${i.state.adminUrl}post-new.php?post_type=page`},M=()=>{var v;const r=new URL(window.location.href),s=new URLSearchParams(r.search);if(s.has("page"))return s.get("page");const p=r.pathname,h=((v=i.state.adminUrl)==null?void 0:v.replace(window.location.origin,""))||"/wp-admin/";return p.includes(h)?p.replace(h,"")||"index.php":p},P=()=>{var p;const r=((p=i.state.uixpress_settings)==null?void 0:p.magic_dark_mode_pages)||[],s=M();return r.includes(s)},se=async()=>{var h;const r=M(),s=((h=i.state.uixpress_settings)==null?void 0:h.magic_dark_mode_pages)||[];if(s.includes(r))return;const p=[...s,r];try{const v=await Ne({endpoint:"wp/v2/settings",type:"POST",data:{uixpress_settings:{...i.state.uixpress_settings,magic_dark_mode_pages:p}}});v&&v.data&&(i.updateState("uixpress_settings",v.data.uixpress_settings),Be({message:(0,window.wp.i18n.__)("Magic dark mode enabled for this page","uixpress"),type:"success"}),document.dispatchEvent(new CustomEvent("uipx-settings-update",{detail:{magic_dark_mode_pages:p}})))}catch(v){Be({message:(0,window.wp.i18n.__)("Failed to enable magic dark mode","uixpress"),type:"error"}),console.error("Error enabling magic dark mode:",v)}},H=async()=>{var h;const r=M(),s=((h=i.state.uixpress_settings)==null?void 0:h.magic_dark_mode_pages)||[];if(!s.includes(r))return;const p=s.filter(v=>v!==r);try{const v=await Ne({endpoint:"wp/v2/settings",type:"POST",data:{uixpress_settings:{...i.state.uixpress_settings,magic_dark_mode_pages:p}}});v&&v.data&&(i.updateState("uixpress_settings",v.data.uixpress_settings),Be({message:(0,window.wp.i18n.__)("Magic dark mode disabled for this page","uixpress"),type:"success"}),document.dispatchEvent(new CustomEvent("uipx-settings-update",{detail:{magic_dark_mode_pages:p}})))}catch(v){Be({message:(0,window.wp.i18n.__)("Failed to disable magic dark mode","uixpress"),type:"error"}),console.error("Error disabling magic dark mode:",v)}},me=[{id:"new-post",name:(0,window.wp.i18n.__)("New Post","uixpress"),icon:"add",action:()=>ce()},{id:"new-page",name:(0,window.wp.i18n.__)("New Page","uixpress"),icon:"add",action:()=>te()},{id:"view-dashboard",name:(0,window.wp.i18n.__)("View dashboard","uixpress"),icon:"equalizer",action:()=>window.location.href=`${i.state.adminUrl}`},{id:"view-site",name:(0,window.wp.i18n.__)("View site","uixpress"),icon:"home",action:()=>window.location.href=`${i.state.siteURL}`},{id:"site-settings",name:(0,window.wp.i18n.__)("Site settings","uixpress"),icon:"tune",action:()=>window.location.href=`${i.state.adminUrl}options-general.php`},{id:"dark-mode",name:(0,window.wp.i18n.__)("Dark mode","uixpress"),icon:"dark_mode",action:()=>l("dark"),hidden:!1},{id:"light-mode",name:(0,window.wp.i18n.__)("Light mode","uixpress"),icon:"light_mode",action:()=>l("light"),hidden:!1},{id:"enable-magic-dark-mode",name:(0,window.wp.i18n.__)("Enable magic dark mode for this page","uixpress"),icon:"dark_mode",action:()=>se(),hidden:!0},{id:"disable-magic-dark-mode",name:(0,window.wp.i18n.__)("Disable magic dark mode for this page","uixpress"),icon:"light_mode",action:()=>H(),hidden:!0}],_e=C([]),ue=r=>{if(!r)return{filter:null,cleanQuery:""};const s=r.trim(),p={">post":"post",">page":"page","@user":"user","#category":"category","!action":"quickActions","?help":"help"};for(const[v,W]of Object.entries(p))if(s.toLowerCase().startsWith(v.toLowerCase()))return{filter:W,cleanQuery:s.substring(v.length).trim()};const h=s.match(/^>(\w+)\s+(.+)$/i);return h?{filter:h[1],cleanQuery:h[2]}:{filter:null,cleanQuery:s}},De=r=>{if(!r)return"";const s=new Date(r),h=new Date-s,v=Math.floor(h/1e3),W=Math.floor(v/60),fe=Math.floor(W/60),ve=Math.floor(fe/24);return v<60?(0,window.wp.i18n.__)("Just now","uixpress"):W<60?`${W} ${W===1?(0,window.wp.i18n.__)("minute","uixpress"):(0,window.wp.i18n.__)("minutes","uixpress")} ${(0,window.wp.i18n.__)("ago","uixpress")}`:fe<24?`${fe} ${fe===1?(0,window.wp.i18n.__)("hour","uixpress"):(0,window.wp.i18n.__)("hours","uixpress")} ${(0,window.wp.i18n.__)("ago","uixpress")}`:ve<7?`${ve} ${ve===1?(0,window.wp.i18n.__)("day","uixpress"):(0,window.wp.i18n.__)("days","uixpress")} ${(0,window.wp.i18n.__)("ago","uixpress")}`:s.toLocaleDateString()},Ie=r=>{const s={publish:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",draft:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",pending:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",private:"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400",future:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"};return s[r]||s.draft},Ue=r=>({publish:(0,window.wp.i18n.__)("Published","uixpress"),draft:(0,window.wp.i18n.__)("Draft","uixpress"),pending:(0,window.wp.i18n.__)("Pending","uixpress"),private:(0,window.wp.i18n.__)("Private","uixpress"),future:(0,window.wp.i18n.__)("Scheduled","uixpress")})[r]||r,G=B(()=>ue(F.value)),ne=B(()=>G.value.filter),Ce=B(()=>{const r=G.value.cleanQuery.toLowerCase();return ne.value==="quickActions"||ne.value==="help"?_e.value.filter(s=>!s.hidden):ne.value&&ne.value!=="quickActions"?[]:r?_e.value.filter(s=>s.name.toLowerCase().includes(r)&&!s.hidden):_e.value.filter(s=>!s.hidden)}),be=B(()=>{const r={...y.value};if(ne.value){if(ne.value==="quickActions")return{};if(ne.value==="help")return{};const s={};return r[ne.value]&&(s[ne.value]=r[ne.value]),s}return r}),de=B(()=>{const r=Object.entries(be.value).flatMap(([p,h])=>h.map(v=>({...v,category:p}))),s=[...Ce.value.map(p=>({...p,category:"quickActions"})),...r];if(!G.value.cleanQuery||G.value.cleanQuery.length===0){const p=U(G.value.cleanQuery).map(h=>({...h,category:h.category||"recent",isRecent:!0}));s.push(...p)}if(!G.value.cleanQuery||G.value.cleanQuery.length===0){const p=O(G.value.cleanQuery).map(h=>({...h,category:h.category||"frequent",isFrequent:!0}));s.push(...p)}return s}),Ee=r=>{const p=Pe.value.find(h=>h.slug==r);return p?p.name:r},oe=B(()=>{var s,p,h,v,W,fe,ve;let r=[];if(!Array.isArray(i.state.adminMenu))return[];for(let Y of i.state.adminMenu)if(Y.type!="separator"&&!((s=Y==null?void 0:Y.settings)!=null&&s.hidden)&&(at(F.value,((p=Y==null?void 0:Y.settings)==null?void 0:p.name)||Y.name,Y.url)&&r.push({url:Y.url,name:((h=Y==null?void 0:Y.settings)==null?void 0:h.name)||Y.name,id:`${Y.url}-${Y.name}`}),!!Array.isArray(Y.submenu)))for(let le of Y.submenu)le.type!="separator"&&((v=le==null?void 0:le.settings)!=null&&v.hidden||at(F.value,le.name||((W=le==null?void 0:le.settings)==null?void 0:W.name),le.url)&&r.push({url:le.url,name:`<span class="text-zinc-400 dark:text-zinc-400">${((fe=Y==null?void 0:Y.settings)==null?void 0:fe.name)||Y.name} ></span> ${((ve=le==null?void 0:le.settings)==null?void 0:ve.name)||le.name}`,id:`${le.url}-${le.name}`}));return r}),Fe=()=>{const r=localStorage.getItem("uixp-search-onboarding-seen");L.value=r==="true"},qe=()=>{localStorage.setItem("uixp-search-onboarding-seen","true"),L.value=!0,D.value=!1},Ye=()=>{D.value=!0},Pe=B(()=>{const r=i.state.uixpress_settings.search_post_types;let s=[{name:"posts",slug:"post",endpoint:"wp/v2/posts",searchParam:"search"},{name:"pages",slug:"page",endpoint:"wp/v2/pages",searchParam:"search"}];return Array.isArray(r)&&r.length>0&&(s.splice(0,2),s=[...r.map(h=>({...h,endpoint:h.rest_base,searchParam:"search"})),...s]),s.push({name:"categories",slug:"category",endpoint:"wp/v2/categories",searchParam:"search"}),i.state.canManageOptions&&s.push({name:"users",slug:"user",endpoint:"wp/v2/users",searchParam:"search"}),s}),He=async()=>{const r=G.value.cleanQuery;if(r.trim()===""){y.value={};return}if(!(r.length<1)){_(r),E.value=!0;try{let s=Pe.value;G.value.filter&&G.value.filter!=="quickActions"&&G.value.filter!=="help"&&(s=Pe.value.filter(v=>v.slug===G.value.filter));const p=s.map(({name:v,endpoint:W,searchParam:fe,slug:ve})=>Ne({endpoint:W,params:{[fe]:r,per_page:5,context:"view",author:i.state.canManageOptions?"":i.state.userID,_embed:!0}}).then(Y=>({slug:ve,data:Y.data})));(await Promise.all(p)).forEach(({slug:v,data:W})=>{y.value[v]=W})}catch(s){console.error("Error performing search:",s)}finally{E.value=!1}}},Qe=(r,s)=>{let p;return(...h)=>{clearTimeout(p),p=setTimeout(()=>r(...h),s)}},u=r=>{document.activeElement.blur(),R.value.show(r),d.value=0,L.value||(Fe(),L.value||setTimeout(()=>{D.value=!0},300))},w=Qe(He,300);Me(F,(r,s)=>{r!==s&&(w(),d.value=0,f.value=!1)}),Ae(()=>{a.value&&a.value===document.activeElement&&(!F.value||F.value.trim()==="")&&(f.value=!0)});const I=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),u()),r.key==="Escape"&&R.value.close()},T=r=>{r.preventDefault(),d.value=(d.value+1)%de.value.length},pe=r=>{r.preventDefault(),d.value=(d.value-1+de.value.length)%de.value.length},X=r=>{var p;r.preventDefault();const s=de.value[d.value];s&&(s.category==="quickActions"?s.action():(z({id:s.id||s.url,category:s.category,name:s.name||((p=s.title)==null?void 0:p.rendered)||s.email,url:ae(s.category,s),metadata:s}),window.location.href=ae(s.category,s)),R.value.close())},c=(r,s)=>{var p;s!=="quickActions"&&z({id:r.id||r.url,category:s,name:r.name||((p=r.title)==null?void 0:p.rendered)||r.email,url:ae(s,r),metadata:r})},ae=(r,s)=>r=="menu"?s.url:r=="post"||r=="page"?`${i.state.adminUrl}post.php?post=${s.id}&action=edit`:r=="user"?`${i.state.adminUrl}user-edit.php?user_id=${s.id}`:`${i.state.adminUrl}post.php?post=${s.id}&action=edit`,re=B(()=>{if(ne.value==="help"||D.value)return!1;const r=Ce.value.length>0,s=U().length>0,p=O().length>0,h=Object.keys(be.value).length>0,v=f.value&&k.value.length>0;return G.value.cleanQuery&&G.value.cleanQuery.length>0?!h&&!r:!r&&!s&&!p&&!v}),J=[{query:">post",label:(0,window.wp.i18n.__)("Search posts","uixpress"),icon:"description"},{query:"@user",label:(0,window.wp.i18n.__)("Find users","uixpress"),icon:"person"},{query:"!action",label:(0,window.wp.i18n.__)("Quick actions","uixpress"),icon:"bolt"},{query:"?help",label:(0,window.wp.i18n.__)("View commands","uixpress"),icon:"help"}],Se=r=>{F.value=r,D.value&&qe()},K=()=>{setTimeout(()=>{f.value=!1},200)};return Le(async()=>{window.addEventListener("keydown",I),Fe();const r=new CustomEvent("uixpress/search/ready");document.dispatchEvent(r),await ze();let s=[...me];i.state.canManageOptions||(s=s.filter(p=>p.id!=="site-settings")),_e.value=await Ve("uixpress/search/quickActions/register",s)}),Tt(()=>{window.removeEventListener("keydown",I)}),Ae(()=>{a.value&&a.value.focus()}),Ae(()=>{const r=_e.value.find(v=>v.id=="dark-mode"),s=_e.value.find(v=>v.id=="light-mode"),p=_e.value.find(v=>v.id=="enable-magic-dark-mode"),h=_e.value.find(v=>v.id=="disable-magic-dark-mode");if(!(!r||!s)){if($.value){r.hidden=!0,s.hidden=!0,p&&(p.hidden=!0),h&&(h.hidden=!0);return}if(S.value?(r.hidden=!0,s.hidden=!1):(r.hidden=!1,s.hidden=!0),p&&h){const v=P();S.value?(p.hidden=v,h.hidden=!v):(p.hidden=!0,h.hidden=!0)}}}),Me(()=>G.value.cleanQuery,()=>{y.value.menu=oe.value}),(r,s)=>(t(),n(j,null,[m(ye,{type:"transparent",onClick:ee(u,["prevent"]),"aria-label":"Open search",id:"uixp-search-button"},{default:q(()=>[m(N,{icon:"search",class:"text-xl"})]),_:1}),m(jt,{ref_key:"searchmodal",ref:R,position:"top",onKeydown:r.handleModalKeyDown},{default:q(()=>[e("div",Cr,[e("div",Ar,[qt(e("input",{class:"px-2 py-2 border border-zinc-200 dark:border-zinc-700 dark:bg-transparent rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm pl-8 dark:text-zinc-300","onUpdate:modelValue":s[0]||(s[0]=p=>F.value=p),placeholder:r.__("Search posts, pages, categories, users...","uixpress"),autofocus:"",name:"search",icon:"search",onKeyup:[Ze(T,["down"]),Ze(pe,["up"]),Ze(X,["enter"])],onFocus:s[1]||(s[1]=p=>f.value=!F.value||F.value.trim()===""),onBlur:K,autocomplete:"off",ref_key:"searchInput",ref:a},null,40,Mr),[[Ut,F.value]]),e("div",Lr,[m(N,{icon:"search",class:"text-lg text-zinc-400"})]),m(he,null,{default:q(()=>[E.value?(t(),n("div",Ir,[...s[5]||(s[5]=[e("svg",{class:"animate-spin text-indigo-500 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):b("",!0)]),_:1})]),e("div",Er,[e("div",Nr,[m(he,{name:"fade"},{default:q(()=>[D.value&&!L.value?(t(),n("div",Rr,[e("div",Tr,[e("div",qr,[e("h3",Ur,g(r.__("Welcome to Global Search","uixpress")),1),e("p",Fr,g(r.__("Quickly find posts, pages, users, and more. Here are some tips to get started:","uixpress")),1)]),e("button",{onClick:ee(qe,["prevent"]),class:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors","aria-label":"Close onboarding"},[m(N,{icon:"close",class:"text-lg"})])]),e("div",Dr,[(t(),n(j,null,Z(J,(p,h)=>e("div",{key:h,onClick:v=>Se(p.query),class:"p-3 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer transition-all group"},[e("div",Or,[e("div",Vr,[m(N,{icon:p.icon,class:"text-indigo-600 dark:text-indigo-400 text-sm"},null,8,["icon"])]),e("div",jr,[e("span",Hr,g(p.label),1),e("code",Qr,g(p.query),1)])])],8,Pr)),64))]),e("div",Br,[e("div",Kr,[m(N,{icon:"keyboard",class:"text-sm"}),e("span",null,[ke(g(r.__("Press","uixpress"))+" ",1),s[6]||(s[6]=e("kbd",{class:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-800 rounded text-xs"},"Cmd/Ctrl + K",-1)),ke(" "+g(r.__("to open search","uixpress")),1)])])]),e("button",{onClick:ee(qe,["prevent"]),class:"mt-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors w-full"},g(r.__("Got it, thanks!","uixpress")),1)])):b("",!0)]),_:1}),m(he,{name:"fade"},{default:q(()=>[re.value&&!D.value&&G.value.cleanQuery&&G.value.cleanQuery.length>0?(t(),n("div",Wr,[e("div",Gr,[m(N,{icon:"search",class:"text-2xl text-zinc-400"})]),e("h3",Jr,g(r.__("No results found","uixpress")),1),e("p",Yr,g(r.__("Try a different search term or use command syntax to filter results.","uixpress")),1),e("div",Xr,[e("button",{onClick:s[2]||(s[2]=ee(p=>F.value="?help",["prevent"])),class:"px-3 py-1.5 text-xs bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg transition-colors"},g(r.__("View Commands","uixpress")),1),e("button",{onClick:s[3]||(s[3]=ee(p=>F.value="",["prevent"])),class:"px-3 py-1.5 text-xs bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg transition-colors"},g(r.__("Clear Search","uixpress")),1)])])):b("",!0)]),_:1}),m(he,{name:"fade"},{default:q(()=>[re.value&&!D.value&&!G.value.cleanQuery&&!E.value?(t(),n("div",Zr,[e("div",ei,[m(N,{icon:"search",class:"text-2xl text-zinc-400"})]),e("h3",ti,g(r.__("Start searching","uixpress")),1),e("p",si,g(r.__("Search for posts, pages, users, categories, or use quick actions.","uixpress")),1),e("div",ni,[e("div",ri,g(r.__("Try these:","uixpress")),1),e("div",ii,[(t(!0),n(j,null,Z(J.slice(0,4),(p,h)=>(t(),n("button",{key:h,onClick:ee(v=>F.value=p.query,["prevent"]),class:"p-2.5 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 text-left transition-all group"},[e("div",ai,[m(N,{icon:p.icon,class:"text-zinc-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-400 text-sm transition-colors"},null,8,["icon"]),e("div",li,[e("span",ci,g(p.label),1),e("code",ui,g(p.query),1)])])],8,oi))),128))])]),e("div",di,[e("div",pi,g(r.__("Keyboard Shortcuts","uixpress")),1),e("div",mi,[e("div",fi,[s[7]||(s[7]=e("kbd",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-700 dark:text-zinc-300 font-mono"}," ",-1)),e("span",vi,g(r.__("Navigate","uixpress")),1)]),e("div",gi,[s[8]||(s[8]=e("kbd",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-700 dark:text-zinc-300 font-mono"},"Enter",-1)),e("span",xi,g(r.__("Select","uixpress")),1)]),e("div",hi,[s[9]||(s[9]=e("kbd",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-700 dark:text-zinc-300 font-mono"},"Esc",-1)),e("span",_i,g(r.__("Close","uixpress")),1)]),e("div",bi,[s[10]||(s[10]=e("kbd",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-700 dark:text-zinc-300 font-mono"},"Cmd+K",-1)),e("span",yi,g(r.__("Open","uixpress")),1)])])]),L.value?(t(),n("button",{key:0,onClick:ee(Ye,["prevent"]),class:"mt-6 text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors"},g(r.__("Show tutorial again","uixpress")),1)):b("",!0)])):b("",!0)]),_:1}),ne.value==="help"?(t(),n("div",wi,[e("div",ki,g(r.__("Command Syntax","uixpress")),1),e("div",zi,[e("div",$i,[s[11]||(s[11]=e("code",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-xs"},">post",-1)),e("span",Si,g(r.__("Search only posts","uixpress")),1)]),e("div",Ci,[s[12]||(s[12]=e("code",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-xs"},">page",-1)),e("span",Ai,g(r.__("Search only pages","uixpress")),1)]),e("div",Mi,[s[13]||(s[13]=e("code",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-xs"},"@user",-1)),e("span",Li,g(r.__("Search only users","uixpress")),1)]),e("div",Ii,[s[14]||(s[14]=e("code",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-xs"},"#category",-1)),e("span",Ei,g(r.__("Search only categories","uixpress")),1)]),e("div",Ni,[s[15]||(s[15]=e("code",{class:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded text-xs"},"!action",-1)),e("span",Ri,g(r.__("Show only quick actions","uixpress")),1)])])])):b("",!0),f.value&&x(k).length>0&&!G.value.cleanQuery?(t(),n("div",Ti,[e("div",qi,[e("div",Ui,g(r.__("Recent Searches","uixpress")),1),e("button",{onClick:s[4]||(s[4]=ee(p=>x(A)(),["stop","prevent"])),class:"text-xs text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"},g(r.__("Clear","uixpress")),1)]),e("ul",Fi,[(t(!0),n(j,null,Z(x(k).slice(0,5),(p,h)=>(t(),n("li",{key:h,class:"p-2 rounded-lg transition-all cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 text-sm text-zinc-600 dark:text-zinc-400",onClick:ee(v=>F.value=p.query,["stop","prevent"])},[e("div",Pi,[m(N,{icon:"history",class:"text-zinc-400 text-sm"}),e("span",null,g(p.query),1)])],8,Di))),128))])])):b("",!0),!G.value.cleanQuery&&x(U)().length>0?(t(),n("div",Oi,[e("div",Vi,g(r.__("Recently Accessed","uixpress")),1),e("ul",ji,[(t(!0),n(j,null,Z(x(U)().slice(0,3),(p,h)=>{var v;return t(),n("li",{key:`recent-${p.id}`,class:V(["p-2 rounded-lg transition-all cursor-pointer pl-3",de.value.findIndex(W=>W.id===p.id&&W.category===p.category)===d.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[e("a",{href:p.url,class:"flex flex-row items-center gap-3",onClick:W=>{c(p,p.category),R.value.close()}},[m(N,{icon:"history",class:"text-zinc-400 text-sm"}),e("span",Qi,g(p.name||((v=p.title)==null?void 0:v.rendered)||p.email),1),m(N,{icon:"chevron_right",class:"text-zinc-400"})],8,Hi)],2)}),128))])])):b("",!0),!G.value.cleanQuery&&x(O)().length>0?(t(),n("div",Bi,[e("div",Ki,g(r.__("Frequently Used","uixpress")),1),e("ul",Wi,[(t(!0),n(j,null,Z(x(O)().slice(0,3),(p,h)=>{var v;return t(),n("li",{key:`frequent-${p.id}`,class:V(["p-2 rounded-lg transition-all cursor-pointer pl-3",de.value.findIndex(W=>W.id===p.id&&W.category===p.category)===d.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[e("a",{href:p.url,class:"flex flex-row items-center gap-3",onClick:W=>{c(p,p.category),R.value.close()}},[m(N,{icon:"star",class:"text-zinc-400 text-sm"}),e("span",Ji,g(p.name||((v=p.title)==null?void 0:v.rendered)||p.email),1),m(N,{icon:"chevron_right",class:"text-zinc-400"})],8,Gi)],2)}),128))])])):b("",!0),Ce.value.length?(t(),n("div",Yi,[e("div",Xi,g(r.__("Quick Actions","uixpress")),1),e("ul",Zi,[(t(!0),n(j,null,Z(Ce.value,(p,h)=>(t(),n("li",{key:p.id,class:V(["p-2 rounded-lg transition-all cursor-pointer pl-3",de.value.findIndex(v=>v.id===p.id&&v.category==="quickActions")===d.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[e("a",{onClick:ee(v=>{p.action(),R.value.close()},["prevent"]),class:"flex flex-row items-center gap-3"},[m(N,{icon:p.icon,class:"text-zinc-400 text-lg"},null,8,["icon"]),e("span",to,g(p.name),1),m(N,{icon:"chevron_right",class:"text-zinc-400"})],8,eo)],2))),128))])])):b("",!0),m(he,{mode:"out-in",name:"slide-up"},{default:q(()=>[y.value?(t(),n("div",so,[(t(!0),n(j,null,Z(y.value,(p,h)=>(t(),n(j,{key:h},[p.length?(t(),n("div",no,[e("div",ro,g(Ee(h)),1),e("ul",io,[(t(!0),n(j,null,Z(p,(v,W)=>{var fe;return t(),n("li",{key:v.id,class:V(["p-2 rounded-lg transition-all cursor-pointer pl-3",de.value.findIndex(ve=>ve.id===v.id&&ve.category===h)===d.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[e("a",{href:ae(h,v),class:"flex flex-row items-center gap-3",onClick:ve=>{c(v,h),R.value.close()}},[h=="user"?(t(),n("div",ao,[e("span",lo,g((v.slug||v.name||v.email||"").charAt(0)),1)])):b("",!0),h=="attachment"?(t(),n("div",co,[v.mime_type&&v.mime_type.includes("image")?(t(),n("img",{key:0,src:v.source_url,class:"w-8 h-8 object-cover rounded"},null,8,uo)):(t(),Q(N,{key:1,icon:"description",class:"text-zinc-400"}))])):b("",!0),(h=="post"||h=="page")&&v.featured_media?(t(),n("div",po,[v._embedded&&v._embedded["wp:featuredmedia"]&&v._embedded["wp:featuredmedia"][0]?(t(),n("img",{key:0,src:v._embedded["wp:featuredmedia"][0].source_url,class:"w-8 h-8 object-cover rounded"},null,8,mo)):(t(),Q(N,{key:1,icon:"description",class:"text-zinc-400 text-sm"}))])):b("",!0),h!=="user"&&h!=="attachment"&&(!v.featured_media||h!=="post"&&h!=="page")?(t(),n("div",fo,[m(N,{icon:h==="category"?"folder":h==="menu"?"menu":"description",class:"text-zinc-400 text-sm"},null,8,["icon"])])):b("",!0),e("div",vo,[e("div",go,[e("span",{class:"truncate font-medium text-zinc-900 dark:text-zinc-100",innerHTML:v.name||((fe=v.title)==null?void 0:fe.rendered)||v.email},null,8,xo),v.status&&(h==="post"||h==="page")?(t(),n("span",{key:0,class:V(["px-1.5 py-0.5 rounded text-xs font-medium",Ie(v.status)])},g(Ue(v.status)),3)):b("",!0)]),e("div",ho,[v.date&&(h==="post"||h==="page")?(t(),n("span",_o,g(De(v.date)),1)):b("",!0),v.author&&v._embedded&&v._embedded.author&&v._embedded.author[0]?(t(),n("span",bo,[s[16]||(s[16]=e("span",null,"",-1)),e("span",null,g(v._embedded.author[0].name),1)])):b("",!0),h==="user"&&v.roles?(t(),n("span",yo,[s[17]||(s[17]=e("span",null,"",-1)),e("span",null,g(v.roles.join(", ")),1)])):b("",!0)])]),m(N,{icon:"chevron_right",class:"text-zinc-400 shrink-0"})],8,oo)],2)}),128))])])):b("",!0)],64))),128))])):b("",!0)]),_:1})]),!E.value&&de.value.length>20?(t(),n("div",wo)):b("",!0)]),e("div",ko,[e("div",zo,[e("span",$o,[m(N,{icon:"arrow_up"})]),e("span",So,[m(N,{icon:"arrow_down"})]),e("span",Co,g(r.__("to navigate","uixpress")),1)]),e("div",Ao,[e("span",Mo,[m(N,{icon:"return"})]),e("span",Lo,g(r.__("to select","uixpress")),1)]),e("div",Io,[s[18]||(s[18]=e("span",{class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg text-xs"},"Esc",-1)),e("span",Eo,g(r.__("to close","uixpress")),1)])])])]),_:1},8,["onKeydown"])],64))}},Ro=je(No,[["__scopeId","data-v-f8dd933a"]]),To={class:""},qo={__name:"index",setup(o){const i=C(!0),l=C([]),S=C(""),$=C(null),k=$e(),_=B(()=>l.value.filter(y=>at(S.value,y.name,y.url))),A=async(y,E)=>{i.value=!0;const a=["wp-admin-bar-site-name","wp-admin-bar-menu-toggle","wp-admin-bar-app-logo","wp-admin-bar-my-account","wp-admin-bar-wp-logo","wp-admin-bar-search","wp-admin-bar-woocommerce-site-visibility-badge"];if(!y)return i.value=!1;const d=y.querySelectorAll("#wp-admin-bar-root-default > li"),f=y.querySelectorAll("#wp-admin-bar-top-secondary > li"),L=[...d,...f],D=[];for(let te of L){const M=te.getAttribute("id");if(a.includes(M))continue;const P=te.querySelector(":scope > .ab-item"),se=te.querySelector(":scope > .ab-item > .screen-reader-text"),H=te.querySelector(":scope > .ab-item > .ab-label"),me=te.querySelector(":scope > .ab-item > .ab-icon"),_e=te.querySelector(":scope > .ab-item .svg");if(!P)continue;const ue=P.getAttribute("href"),De=P.getAttribute("target"),Ie=se?se.innerText:"";let Ue;_e&&(Ue=_e.getAttribute("style"));let G;if(me){const be=window.getComputedStyle(me,"::before");if(be){const{content:oe,fontFamily:Fe}=be;G={content:oe,fontFamily:Fe}}const de=window.getComputedStyle(me),Ee=de["background-image"]?de["background-image"]:!1;Ee&&Ee!="none"&&(me.style["background-image"]=Ee,me.classList.add("svg"))}let ne;if(H)ne=H.innerText;else{const de=P.innerHTML.split("<");ne=de[0]!==""?de[0]:Ie}const Ce=z(te);if(D.push({url:ue,target:De,name:ne,id:M,submenu:Ce,screenReaderName:Ie,iconStyle:Ue,before:G}),E){const be=te.cloneNode(!0);$.value.appendChild(be)}else $.value.appendChild(te)}l.value=[...D],localStorage.setItem("uixpress_toolbar",JSON.stringify([...D])),i.value=!1},z=y=>{const E=y.querySelectorAll(":scope > .ab-sub-wrapper > .ab-submenu > li");if(!E)return;let a=[];for(let d of E){const f=d.querySelector(":scope > .ab-item");if(!f)continue;const L=f.getAttribute("href"),D=f.getAttribute("target");let ce=f.innerText;const te=z(d);a.push({name:ce,url:L,target:D,submenu:te})}return a},U=B(()=>{let y="";const E=[["wp-admin-bar-comments","chat"],["wp-admin-bar-updates","update"],["wp-admin-bar-new-content","library_add"],["wp-admin-bar-customize","palette"]],a=k.state.pluginBase;for(let d of E){const f=`${a}assets/icons/${d[1]}.svg`;y+=`
	  #${d[0]} .ab-icon::before{
		content: '';
		height:1.2rem;
		width:1.2rem;
		min-height:1.2rem;
		min-width:1.2rem;
		background-color:currentColor;
		-webkit-mask: url(${f}) no-repeat center;
		-webkit-mask-size: contain;
		mask: url(${f}) no-repeat center;
		mask-size: contain;
		line-height: 1rem;
        display: block;
	  }`}return y+=`
  #wp-admin-bar-customize, #wp-admin-bar-edit{
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  #wp-admin-bar-customize::before, #wp-admin-bar-edit::before{
    content: '';
    height:1.2rem;
    width:1.2rem;
    min-height:1.2rem;
    min-width:1.2rem;
    background-color:currentColor;
    -webkit-mask: url(${a}assets/icons/palette.svg) no-repeat center;
    -webkit-mask-size: contain;
    mask: url(${a}assets/icons/palette.svg) no-repeat center;
    mask-size: contain;
    line-height: 1rem;
    display: block;
    color: rgb(var(--uix-base-500) / var(--tw-text-opacity));
  }
  #wp-admin-bar-edit::before{
    -webkit-mask: url(${a}assets/icons/edit.svg) no-repeat center;
    mask: url(${a}assets/icons/edit.svg) no-repeat center;
  }`,y}),O=y=>{let E="";return Jt(y.before)?(E+=`content: ${y.before.content};`,E+=`font-family: ${y.before.fontFamily};`,E+="width: 1.2rem;",E+="min-width: 1.2rem;"):(E+="width: 0rem;",E+="min-width: 0rem;"),y.iconStyle&&(E+=y.iconStyle),`
  #${y.id} .ab-icon::before{
    content: '';
    ${E}
    height:1.2rem;
    min-height:1.2rem;
    font-size: 1.2rem;
    line-height: 1.2rem;
    filter: contrast(0.1);
    background-repeat: no-repeat;
    background-size: contain;
  }`};B(()=>getBlockOption("subMenuStyle",props.block)||"inline");const F=()=>{const E=localStorage.getItem("uixpress_toolbar");if(!E)return null;const a=JSON.parse(E);Array.isArray(a)&&(l.value=a)},R=Ae(()=>{if(!$.value)return;F();const y=document.querySelector("#wpadminbar");A(y,!0),setTimeout(()=>{$.value.replaceChildren(),A(y)},500),R()});return(y,E)=>(t(),n("div",To,[e("ul",{class:"flex flex-row gap-5 items-center",ref_key:"toolbarnode",ref:$,id:"wpadminbar"},null,512),(t(),Q(Re("style"),null,{default:q(()=>[ke(g(U.value),1)]),_:1})),(t(),Q(Re("style"),null,{default:q(()=>[(t(!0),n(j,null,Z(_.value,a=>(t(),n(j,null,[ke(g(O(a)),1)],64))),256))]),_:1}))]))}},Uo={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center text-xs font-bold leading-none text-rose-100 transform right-0 top-0 bg-rose-600 dark:bg-rose-700 rounded-full aspect-square h-2"},Fo={class:"flex flex-row items-center place-content-between"},Do={class:"text-2xl font-semibold text-zinc-900 dark:text-zinc-100"},Po=["title"],Oo={key:0,class:"leading-loose p-2 rounded-lg bg-emerald-100 dark:bg-emerald-800 border border-solid border-emerald-200 dark:border-emerald-700 dark:text-zinc-300"},it=".notice:not(table .notice):not(#message.notice):not(.hide-if-js .notice):not(.themes .notice):not(.notice.hidden):not(.notice[aria-hidden='true']):not(.notice.hide-if-js)",Vo={__name:"index",setup(o){const i=C(0),l=C(null),S=C(!1),$=C(!1),k=C(!1);C(null);const _=C(null),A=C(!1),z=C(!1),U=C(null),O=C(!1),F=C(800),R=async()=>{const f=document.querySelectorAll(it);if(!f){i.value=0;return}i.value=0;for(let L of[...f])!L.innerText||L.id=="setting-error-settings_updated"||!E(L)||i.value++;i.value>0&&(await ze(),y(),z.value=!0,setTimeout(()=>{z.value=!1},500))},y=()=>{const f=document.querySelectorAll(it);for(let L of[...f])L.style.display="none"},E=f=>{const L=window.getComputedStyle(f);return L.display!=="none"&&L.visibility!=="hidden"},a=()=>{if(!O.value&&(O.value=!0,!(!l.value||_.value)&&(_.value=document.querySelectorAll(it),!!_.value)))for(let f of[..._.value])!f.innerText||f.id=="setting-error-settings_updated"||(l.value.appendChild(f),f.style.display="block")};Ae(()=>{$.value&&ze(()=>k.value=!0),$.value||ze(()=>k.value=!1)});const d=Ae(async()=>{l.value&&(await ze(),setTimeout(()=>{a(),console.log("setNotifications"),d()},100))});return Le(()=>{A.value=!0,R()}),(f,L)=>(t(),n(j,null,[m(ye,{type:"transparent",title:f.__("Notifications","uixpress"),class:"max-md:hidden",onClick:L[0]||(L[0]=D=>S.value=!0)},{default:q(()=>[e("div",{class:V(["relative",{"animate-jiggle":z.value}])},[m(N,{icon:"notifications-2",class:"text-2xl"}),m(he,null,{default:q(()=>[i.value>0?(t(),n("span",Uo)):b("",!0)]),_:1})],2)]),_:1},8,["title"]),(t(),Q(Ft,null,[m(zt,{modelValue:S.value,"onUpdate:modelValue":L[2]||(L[2]=D=>S.value=D),title:"Notifications","show-close-button":!1,"show-header":!1},{default:q(()=>[e("div",{class:"flex flex-col gap-6 p-8 max-w-full",id:"uixp-notification-list",ref_key:"notificationsList",ref:U,style:Ge(`width:${F.value}px`)},[e("div",Fo,[e("div",Do,g(f.__("Notifications","uixpress")),1),e("div",{class:"hover:bg-zinc-100 dark:hover:bg-zinc-800 p-1 rounded-lg cursor-pointer text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-all",title:f.__("Close","uixpress"),onClick:L[1]||(L[1]=D=>S.value=!1)},[m(N,{icon:"close",class:"text-xl"})],8,Po)]),i.value?b("",!0):(t(),n("div",Oo,g(f.__("No notifications","uixpress")),1)),e("div",{class:"flex flex-col gap-3",ref_key:"notificationList",ref:l},null,512)],4)]),_:1},8,["modelValue"])],1024))],64))}},jo={id:"toolbar-screen-options",language:"vue",className:"",requires_capabilities:null},Ho={__name:"component",props:{appData:Object,id:String,className:String},setup(o){const i=$e(),l=C(!1),S=C(!0),$=()=>{document.querySelector("#screen-options-wrap")||(S.value=!1)},k=()=>{const _=document.querySelector("#screen-options-wrap"),A=document.querySelector("#screen-meta");!_||!A||(l.value?(_.style.display="none",A.style.display="none",l.value=!1):(_.style.display="block",A.style.display="block",_.classList.remove("hidden"),l.value=!0))};return $(),(_,A)=>{var z,U;return S.value&&!((U=(z=x(i).state)==null?void 0:z.uixpress_settings)!=null&&U.hide_screenoptions)?(t(),Q(ye,{key:0,type:"transparent",title:_.__("Screen options","uixpress"),onClick:k,class:V(["max-md:hidden",o.className])},{default:q(()=>[m(N,{icon:"tune",class:"text-xl"})]),_:1},8,["title","class"])):b("",!0)}}},Qo={metadata:jo,component:Ho},Bo={id:"toolbar-help",language:"vue",className:"",requires_capabilities:null},Ko={__name:"component",props:{appData:Object,id:String,className:String},setup(o){const i=$e(),l=C(!1),S=C(!0),$=()=>{document.querySelector("#contextual-help-wrap")||(S.value=!1)},k=()=>{const _=document.querySelector("#contextual-help-wrap"),A=document.querySelector("#screen-meta");!_||!A||(l.value?(_.style.display="none",A.style.display="none",l.value=!1):(_.style.display="block",A.style.display="block",_.classList.remove("hidden"),l.value=!0))};return $(),(_,A)=>{var z,U;return S.value&&!((U=(z=x(i).state)==null?void 0:z.uixpress_settings)!=null&&U.hide_help_toggle)?(t(),Q(ye,{key:0,type:"transparent",title:_.__("Help","uixpress"),onClick:k,class:V(["max-md:hidden",o.className])},{default:q(()=>[m(N,{icon:"help_alt",class:"text-2xl"})]),_:1},8,["title","class"])):b("",!0)}}},Wo={metadata:Bo,component:Ko},Go={id:"toolbar-view-site",language:"vue",className:"",requires_capabilities:null},Jo=["href"],Yo=["href"],Xo={__name:"component",props:{appData:Object,id:String,className:String},setup(o){const i=$e();return console.log(i.state),(l,S)=>x(i).state.frontPage?x(i).state.frontPage?(t(),n("a",{key:1,href:x(i).state.adminUrl},[m(ye,{type:"transparent",title:l.__("View dashboard","uixpress"),class:V(o.className)},{default:q(()=>[m(N,{icon:"dashboard",class:"text-xl"})]),_:1},8,["title","class"])],8,Yo)):b("",!0):(t(),n("a",{key:0,href:x(i).state.siteURL},[m(ye,{type:"transparent",title:l.__("View site","uixpress"),class:V(o.className)},{default:q(()=>[m(N,{icon:"home",class:"text-xl"})]),_:1},8,["title","class"])],8,Jo))}},Zo={metadata:Go,component:Xo};Pt("uixpress/toolbar/render/right",o=>[...o,Qo,Wo,Zo]);const ea={key:1,class:"flex flex-row items-center gap-4 hidden max-lg:flex"},ta={class:"absolute top-0 right-0 p-4"},sa={class:"relative grow max-lg:overflow-hidden flex flex-row items-center"},na=["href"],ra=["src"],ia=["href"],oa={class:"flex flex-row items-center gap-4 w-full max-lg:overflow-auto no-scrollbar pr-16"},aa={class:"flex flex-row items-center"},la={class:"lowercase relative text-sm",style:{top:"calc(((-1em / 1.5) + 1ex) / 2)"}},ca=["src"],ua={class:"flex flex-col gap-2 w-40"},da={class:""},pa={class:"flex flex-col gap-2"},ma={class:"dark:text-zinc-400"},fa={class:"dark:text-zinc-400"},va={class:"dark:text-zinc-400"},ga={class:"flex flex-row items-center gap-2 place-content-between"},xa={__name:"index",props:["frontend"],setup(o){wt({react:{createRoot:kt.createRoot}});const i=$e(),l=C(!1),S=C(!1),$=C(null),k=C(!1),_=C(null),{userPreference:A,setColorScheme:z,globalOverride:U,prefersDark:O}=Je(),F=C([]),R=C([]),y=async()=>{const a=await $t(i.state.userEmail);S.value=`https://gravatar.com/avatar/${a}?d=blank`},E=async()=>{k.value=!0,await Ne({endpoint:"wc/v3/logout",params:{},type:"POST"}),k.value=!1,window.location=i.state.loginUrl};return Ae(()=>{if(_.value){const a=_.value.getBoundingClientRect();document.documentElement.style.setProperty("--uixp-toolbar-height",`${a.height}px`),document.documentElement.style.setProperty("--wp-admin--admin-bar--height","var(--uixp-toolbar-height)")}}),Le(async()=>{const a=new CustomEvent("uixpress/toolbar/ready");document.dispatchEvent(a),await ze(),F.value=await Ve("uixpress/toolbar/render/left",F.value),R.value=await Ve("uixpress/toolbar/render/right",R.value)}),y(),(a,d)=>{var f,L,D,ce,te,M;return t(),n("div",{id:"uixp-toolbar",class:V(["px-6 flex flex-row items-center pointer-events-auto max-w-full gap-6 max-lg:overflow-hidden bg-zinc-50 dark:bg-zinc-950",o.frontend?"":"py-3"]),ref_key:"toolbarContainer",ref:_},[o.frontend?(t(),Q(Re("style"),{key:0},{default:q(()=>[...d[8]||(d[8]=[ke(" #uixp-toolbar { height: 32px; } @media screen and (max-width: 782px) { #uixp-toolbar { height: 46px; } } ",-1)])]),_:1})):b("",!0),o.frontend?b("",!0):(t(),n("div",ea,[m(ye,{type:"transparent",title:a.__("Toggle menu","uixpress"),onClick:d[0]||(d[0]=P=>l.value=!l.value)},{default:q(()=>[m(N,{icon:"menu",class:"text-xl"})]),_:1},8,["title"]),m(he,null,{default:q(()=>[l.value?(t(),n("div",{key:0,class:"fixed top-0 left-0 right-0 bottom-0 h-dvh w-dvh z-[9999999] bg-zinc-900/10 flex flex-row",onClick:d[3]||(d[3]=P=>l.value=!1)},[e("div",{class:"bg-white dark:bg-zinc-900 w-auto max-w-full shadow-lg border-r border-zinc-200 dark:border-zinc-700 h-full relative",onClick:d[2]||(d[2]=ee(()=>{},["stop"]))},[m($r,{mobile:!0,class:"min-w-[90vw]"}),e("div",ta,[m(ye,{type:"transparent",title:a.__("Toggle menu","uixpress"),onClick:d[1]||(d[1]=P=>l.value=!1)},{default:q(()=>[m(N,{icon:"close",class:"text-xl"})]),_:1},8,["title"])])])])):b("",!0)]),_:1})])),e("div",sa,[F.value.length>0?(t(!0),n(j,{key:0},Z(F.value,(P,se)=>{var H;return t(),Q(We,{key:((H=P.metadata)==null?void 0:H.id)||`left-${se}`,item:P},null,8,["item"])}),128)):b("",!0),(L=(f=x(i).state)==null?void 0:f.uixpress_settings)!=null&&L.logo&&o.frontend?(t(),n("a",{key:1,href:x(i).state.adminUrl,class:"h-5 mr-6"},[e("img",{src:x(O)&&((ce=(D=x(i).state)==null?void 0:D.uixpress_settings)!=null&&ce.dark_logo)?x(i).state.uixpress_settings.dark_logo:x(i).state.uixpress_settings.logo,class:"h-full"},null,8,ra)],8,na)):o.frontend?(t(),n("a",{key:2,href:x(i).state.adminUrl,class:"mr-6"},[m(N,{icon:"uipress",class:"text-xl dark:text-white"})],8,ia)):b("",!0),e("div",oa,[m(qo)]),d[9]||(d[9]=e("div",{class:"hidden max-lg:block absolute right-0 w-16 top-0 bottom-0 bg-gradient-to-l from-white to-transparent dark:from-zinc-900 pointer-events-none",id:"uixp-toolbar-overlay"},null,-1))]),e("div",aa,[(M=(te=x(i).state)==null?void 0:te.uixpress_settings)!=null&&M.disable_search?b("",!0):(t(),Q(Ro,{key:0})),R.value.length>0?(t(!0),n(j,{key:1},Z(R.value,(P,se)=>{var H;return t(),Q(We,{key:((H=P.metadata)==null?void 0:H.id)||`right-${se}`,item:P},null,8,["item"])}),128)):b("",!0),o.frontend?b("",!0):(t(),Q(Vo,{key:2})),e("div",{class:"w-6 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden ml-2 cursor-pointer dark:hover:bg-indigo-800 hover:bg-zinc-900 transition-colors border border-zinc-200 dark:border-zinc-700",onClick:d[4]||(d[4]=(...P)=>$.value.show&&$.value.show(...P))},[e("span",la,g(x(i).state.userName.charAt(0)),1),S.value?(t(),n("img",{key:0,src:S.value,class:"absolute w-full h-full"},null,8,ca)):b("",!0)]),m(Gt,{ref_key:"contextmenu",ref:$,teleport:!0},{default:q(()=>[e("div",ua,[x(U)?b("",!0):(t(),n(j,{key:0},[e("div",da,g(a.__("Theme","uixpress")),1),e("div",pa,[e("label",{class:"flex flex-row items-center gap-2 px-2 mt-2 cursor-pointer",onClick:d[5]||(d[5]=ee(P=>x(z)("system"),["stop","prevent"]))},[m(tt,{dynamic:x(A)=="system"},null,8,["dynamic"]),e("span",ma,g(a.__("System","uixpress")),1)]),e("label",{class:"flex flex-row items-center gap-2 px-2 cursor-pointer",onClick:d[6]||(d[6]=ee(P=>x(z)("light"),["stop","prevent"]))},[m(tt,{dynamic:x(A)=="light"},null,8,["dynamic"]),e("span",fa,g(a.__("Light","uixpress")),1)]),e("label",{class:"flex flex-row items-center gap-2 px-2 cursor-pointer",onClick:d[7]||(d[7]=ee(P=>x(z)("dark"),["stop","prevent"]))},[m(tt,{dynamic:x(A)=="dark"},null,8,["dynamic"]),e("span",va,g(a.__("Dark","uixpress")),1)])]),d[10]||(d[10]=e("div",{class:"my-2 mb-1 border-t border-zinc-200 dark:border-zinc-700"},null,-1))],64)),m(ye,{type:"transparent",class:"shrink-0",loading:k.value,onClick:E,title:a.__("Logout","uixpress")},{default:q(()=>[e("span",ga,[e("span",null,g(a.__("Logout","uixpress")),1),m(N,{icon:"logout",class:"text-lg"})])]),_:1},8,["loading","title"])])]),_:1},512)])],2)}}},Na=je(xa,[["__scopeId","data-v-78e6e888"]]);export{$r as A,Na as T};
//# sourceMappingURL=index-27NpNvnn.js.map
