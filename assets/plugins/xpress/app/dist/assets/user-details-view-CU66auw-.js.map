{"version":3,"file":"user-details-view-CU66auw-.js","sources":["../../src/pages/users/src/user-details-view.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, watch, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Funcs\nimport { lmnFetch } from '@/assets/js/functions/lmnFetch.js';\nimport { notify } from '@/assets/js/functions/notify.js';\n\n// Comps\nimport AppIcon from '@/components/utility/icons/index.vue';\nimport AppButton from '@/components/utility/app-button/index.vue';\nimport AppInput from '@/components/utility/text-input/index.vue';\nimport AppTextArea from '@/components/utility/text-area/index.vue';\nimport AppToggle from '@/components/utility/toggle/index.vue';\nimport TagInput from '@/components/utility/tag-input/index.vue';\n\nconst route = useRoute();\nconst router = useRouter();\n\n// Refs\nconst loading = ref(false);\nconst userItem = ref(null);\nconst isSaving = ref(false);\nconst allRoles = ref([]);\nconst userActivities = ref([]);\nconst loadingActivities = ref(false);\nconst activityLogEnabled = computed(() => {\n  return appStore.state.uixpress_settings?.enable_activity_logger === true;\n});\n\n// Form fields\nconst name = ref('');\nconst email = ref('');\nconst username = ref('');\nconst website = ref('');\nconst description = ref('');\nconst password = ref('');\nconst selectedRoles = ref([]); // Array of role objects { id, name, slug } for TagInput\nconst sendUserNotification = ref(false);\n\n/**\n * Computed property to transform allRoles to TagInput format\n */\nconst availableRolesForTagInput = computed(() => {\n  return allRoles.value.map((role) => ({\n    id: role.slug, // Use slug as id\n    name: role.name,\n    slug: role.slug,\n  }));\n});\n\n/**\n * Computed property to get role slugs array for API\n */\nconst rolesForAPI = computed(() => {\n  return selectedRoles.value.map((role) => role.slug);\n});\n\n/**\n * Fetches user item data by ID from WordPress REST API\n */\nconst getUserItem = async () => {\n  if (!route.params.userId) return;\n\n  loading.value = true;\n  appStore.updateState('loading', true);\n\n  const args = {\n    endpoint: `wp/v2/users/${route.params.userId}`,\n    params: {\n      context: 'edit',\n    },\n  };\n\n  const data = await lmnFetch(args);\n\n  loading.value = false;\n  appStore.updateState('loading', false);\n\n  if (!data?.data) {\n    notify({\n      title: __('User not found', 'uixpress'),\n      type: 'error',\n    });\n    router.push('/');\n    return;\n  }\n\n  userItem.value = data.data;\n\n  // Populate form fields\n  name.value = userItem.value.name || '';\n  email.value = userItem.value.email || '';\n  username.value = userItem.value.slug || '';\n  website.value = userItem.value.url || '';\n  description.value = userItem.value.description || '';\n\n  // Transform roles from slugs array to TagInput format\n  const userRoleSlugs = userItem.value.roles || [];\n  selectedRoles.value = allRoles.value\n    .filter((role) => userRoleSlugs.includes(role.slug))\n    .map((role) => ({\n      id: role.slug,\n      name: role.name,\n      slug: role.slug,\n    }));\n};\n\n/**\n * Fetch all available roles\n */\nconst fetchAllRoles = async () => {\n  try {\n    const data = await lmnFetch({\n      endpoint: 'uixpress/v1/user-roles',\n    });\n\n    if (data?.data) {\n      // Transform API response (value/label) to our format (slug/name)\n      allRoles.value = data.data.map((role) => ({\n        slug: role.value,\n        name: role.label,\n      }));\n    }\n  } catch (error) {\n    console.error('Failed to fetch roles:', error);\n  }\n};\n\n/**\n * Handle form save\n */\nconst handleSave = async () => {\n  if (!userItem.value) return;\n\n  isSaving.value = true;\n  appStore.updateState('loading', true);\n\n  const updateData = {\n    name: name.value,\n    email: email.value,\n    url: website.value,\n    description: description.value,\n    roles: rolesForAPI.value,\n  };\n\n  // Only include password if it's been set\n  if (password.value) {\n    updateData.password = password.value;\n  }\n\n  try {\n    const args = {\n      endpoint: `wp/v2/users/${userItem.value.id}`,\n      type: 'POST',\n      params: { context: 'edit' },\n      data: updateData,\n    };\n\n    const data = await lmnFetch(args);\n\n    if (data?.data) {\n      notify({\n        title: __('User updated successfully', 'uixpress'),\n        type: 'success',\n      });\n\n      // Refresh user data\n      await getUserItem();\n      password.value = ''; // Clear password field after save\n    }\n  } catch (error) {\n    notify({\n      title: __('Failed to update user', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    isSaving.value = false;\n    appStore.updateState('loading', false);\n  }\n};\n\n/**\n * Format date\n */\nconst formatDate = (dateString) => {\n  if (!dateString) return '—';\n  return new Date(dateString).toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n};\n\n/**\n * Parse date string, handling UTC dates without timezone info\n */\nconst parseDate = (dateString) => {\n  if (!dateString) return null;\n  \n  // If date string doesn't have timezone info and looks like MySQL datetime, treat as UTC\n  if (dateString.match(/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/)) {\n    return new Date(dateString + 'Z');\n  }\n  \n  // If it's already ISO 8601 with timezone indicator (Z or offset like +00:00, -05:00), use as-is\n  if (dateString.includes('T') && (dateString.endsWith('Z') || dateString.match(/[+-]\\d{2}:\\d{2}$/))) {\n    return new Date(dateString);\n  }\n  \n  // If it's ISO 8601 format without timezone (e.g., \"2024-01-01T12:00:00\"), treat as UTC\n  if (dateString.includes('T') && !dateString.endsWith('Z') && !dateString.match(/[+-]\\d{2}:\\d{2}$/)) {\n    return new Date(dateString + 'Z');\n  }\n  \n  // Try parsing as-is\n  const parsed = new Date(dateString);\n  \n  // If invalid, try adding UTC indicator\n  if (isNaN(parsed.getTime()) && dateString.match(/^\\d{4}-\\d{2}-\\d{2}/)) {\n    return new Date(dateString + 'Z');\n  }\n  \n  return parsed;\n};\n\n/**\n * Format date to relative time\n */\nconst formatRelativeTime = (dateString) => {\n  if (!dateString) return '—';\n  const date = parseDate(dateString);\n  if (!date || isNaN(date.getTime())) return '—';\n  \n  const now = new Date();\n  const diffInSeconds = Math.floor((now - date) / 1000);\n\n  if (diffInSeconds < 60) {\n    return __('Just now', 'uixpress');\n  }\n\n  const diffInMinutes = Math.floor(diffInSeconds / 60);\n  if (diffInMinutes < 60) {\n    return diffInMinutes === 1\n      ? __('1 minute ago', 'uixpress')\n      : __('%d minutes ago', 'uixpress').replace('%d', diffInMinutes);\n  }\n\n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) {\n    return diffInHours === 1\n      ? __('1 hour ago', 'uixpress')\n      : __('%d hours ago', 'uixpress').replace('%d', diffInHours);\n  }\n\n  const diffInDays = Math.floor(diffInHours / 24);\n  if (diffInDays < 7) {\n    return diffInDays === 1\n      ? __('1 day ago', 'uixpress')\n      : __('%d days ago', 'uixpress').replace('%d', diffInDays);\n  }\n\n  return date.toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined,\n  });\n};\n\n/**\n * Get action icon\n */\nconst getActionIcon = (action) => {\n  const icons = {\n    created: 'add',\n    updated: 'edit',\n    deleted: 'delete',\n    trashed: 'delete',\n    restored: 'restore',\n    activated: 'check_circle',\n    deactivated: 'cancel',\n    installed: 'download',\n    login: 'login',\n    logout: 'logout',\n    role_changed: 'admin_users',\n    status_changed: 'flag',\n    uploaded: 'upload',\n  };\n  return icons[action] || 'info';\n};\n\n/**\n * Get action color\n */\nconst getActionColor = (action) => {\n  const colors = {\n    created: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400',\n    updated: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400',\n    deleted: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400',\n    trashed: 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400',\n    restored: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400',\n    activated: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400',\n    deactivated: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400',\n    installed: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400',\n    login: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400',\n    logout: 'bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400',\n    role_changed: 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400',\n    status_changed: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400',\n    uploaded: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400',\n  };\n  return colors[action] || 'bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400';\n};\n\n/**\n * Get object title\n */\nconst getObjectTitle = (activity) => {\n  if (activity.metadata?.title) {\n    return activity.metadata.title;\n  }\n  if (activity.new_value?.title) {\n    return activity.new_value.title;\n  }\n  if (activity.old_value?.title) {\n    return activity.old_value.title;\n  }\n  if (activity.object_id) {\n    return `${activity.object_type} #${activity.object_id}`;\n  }\n  return activity.object_type;\n};\n\n/**\n * Fetch user activities\n */\nconst fetchUserActivities = async () => {\n  if (!activityLogEnabled.value || !route.params.userId) return;\n  \n  loadingActivities.value = true;\n  \n  try {\n    const args = {\n      endpoint: 'uixpress/v1/activity-log',\n      params: {\n        user_id: route.params.userId,\n        per_page: 10,\n        orderby: 'created_at',\n        order: 'DESC',\n      },\n    };\n    \n    const data = await lmnFetch(args);\n    \n    if (data?.data) {\n      userActivities.value = data.data;\n    }\n  } catch (error) {\n    console.error('Failed to fetch user activities:', error);\n    userActivities.value = [];\n  } finally {\n    loadingActivities.value = false;\n  }\n};\n\n/**\n * Get activity log details URL\n */\nconst getActivityLogUrl = (activityId) => {\n  const adminUrl = appStore.state.adminUrl || '';\n  return `${adminUrl}admin.php?page=uixpress-activity-log#/details/${activityId}`;\n};\n\n/**\n * Handle activity item click\n */\nconst handleActivityClick = (activity) => {\n  const url = getActivityLogUrl(activity.id);\n  window.open(url, '_blank');\n};\n\n/**\n * Handle roles update from TagInput\n */\nconst handleRolesUpdate = (newRoles) => {\n  selectedRoles.value = newRoles;\n};\n\n// Lifecycle\nonMounted(async () => {\n  // Fetch roles first so they're available when transforming user data\n  await fetchAllRoles();\n  await getUserItem();\n  // Fetch user activities if activity log is enabled\n  if (activityLogEnabled.value) {\n    await fetchUserActivities();\n  }\n});\n\n// Watch for route changes\nwatch(\n  () => route.params.userId,\n  async (newUserId) => {\n    if (newUserId) {\n      // Ensure roles are loaded before fetching user data\n      if (allRoles.value.length === 0) {\n        await fetchAllRoles();\n      }\n      await getUserItem();\n      // Fetch user activities if activity log is enabled\n      if (activityLogEnabled.value) {\n        await fetchUserActivities();\n      }\n    }\n  }\n);\n</script>\n\n<template>\n  <div class=\"flex-1 flex flex-col h-full max-h-full overflow-hidden\">\n    <!-- Loading State -->\n    <div v-if=\"loading\" class=\"flex-1 flex items-center justify-center\">\n      <div class=\"text-center\">\n        <div\n          class=\"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-900 flex items-center justify-center mx-auto mb-3\"\n        >\n          <AppIcon icon=\"person\" class=\"text-xl text-zinc-400 animate-pulse\" />\n        </div>\n        <p class=\"text-sm text-zinc-500 dark:text-zinc-400\">\n          {{ __('Loading...', 'uixpress') }}\n        </p>\n      </div>\n    </div>\n\n    <!-- Content -->\n    <template v-else-if=\"userItem\">\n      <!-- Header Section with Avatar and Basic Info -->\n      <div\n        class=\"flex-shrink-0 px-6 py-4 border-b border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-800/30\"\n      >\n        <div class=\"flex items-center gap-4\">\n          <!-- Avatar -->\n          <div\n            class=\"w-16 h-16 bg-zinc-200 dark:bg-zinc-800 rounded-full overflow-hidden flex-shrink-0\"\n          >\n            <img\n              v-if=\"userItem.avatar_urls?.['96']\"\n              :src=\"userItem.avatar_urls['96']\"\n              :alt=\"name\"\n              class=\"w-full h-full object-cover\"\n            />\n            <div v-else class=\"w-full h-full flex items-center justify-center\">\n              <AppIcon\n                icon=\"person\"\n                class=\"text-2xl text-zinc-500 dark:text-zinc-400\"\n              />\n            </div>\n          </div>\n\n          <!-- User Info -->\n          <div class=\"flex-1 min-w-0\">\n            <h2\n              class=\"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-1 truncate\"\n            >\n              {{ name || username }}\n            </h2>\n            <p class=\"text-sm text-zinc-500 dark:text-zinc-400 truncate\">\n              {{ email }}\n            </p>\n          </div>\n\n          <!-- Meta Info -->\n          <div\n            class=\"flex-shrink-0 text-right text-xs text-zinc-500 dark:text-zinc-400\"\n          >\n            <div>{{ __('User ID', 'uixpress') }}: {{ userItem.id }}</div>\n            <div class=\"mt-1\">\n              {{ __('Registered', 'uixpress') }}\n              {{ formatDate(userItem.registered_date) }}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Form Content -->\n      <div class=\"flex-1 overflow-auto\">\n        <div class=\"p-6 space-y-6 max-w-2xl\">\n          <!-- Editable Fields -->\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Name', 'uixpress') }}\n            </label>\n\n            <AppInput\n              v-model=\"name\"\n              :placeholder=\"__('User name', 'uixpress')\"\n              autocomplete=\"off\"\n            />\n          </div>\n\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Email', 'uixpress') }}\n            </label>\n            <AppInput\n              v-model=\"email\"\n              type=\"email\"\n              :placeholder=\"__('user@example.com', 'uixpress')\"\n              autocomplete=\"off\"\n            />\n          </div>\n\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Username', 'uixpress') }}\n            </label>\n            <AppInput\n              v-model=\"username\"\n              :disabled=\"true\"\n              :placeholder=\"__('Username', 'uixpress')\"\n              autocomplete=\"off\"\n            />\n            <p class=\"text-xs text-zinc-500 dark:text-zinc-400 mt-1\">\n              {{ __('Username cannot be changed', 'uixpress') }}\n            </p>\n          </div>\n\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Website', 'uixpress') }}\n            </label>\n            <AppInput\n              v-model=\"website\"\n              type=\"url\"\n              :placeholder=\"__('https://example.com', 'uixpress')\"\n              autocomplete=\"off\"\n            />\n          </div>\n\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Biographical Info', 'uixpress') }}\n            </label>\n            <AppTextArea\n              v-model=\"description\"\n              :placeholder=\"__('About the user', 'uixpress')\"\n              :rows=\"4\"\n              autocomplete=\"off\"\n            />\n          </div>\n\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('New Password', 'uixpress') }}\n            </label>\n            <AppInput\n              v-model=\"password\"\n              type=\"password\"\n              :placeholder=\"\n                __('Leave blank to keep current password', 'uixpress')\n              \"\n              autocomplete=\"new-password\"\n            />\n          </div>\n\n          <!-- Roles Section -->\n          <div>\n            <label\n              class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500 mb-2\"\n            >\n              {{ __('Roles', 'uixpress') }}\n            </label>\n            <TagInput\n              v-model=\"selectedRoles\"\n              :available-tags=\"availableRolesForTagInput\"\n              :disabled=\"isSaving\"\n              :placeholder=\"__('Add roles...', 'uixpress')\"\n              :allow-create=\"false\"\n            />\n          </div>\n\n          <div class=\"pt-4 border-t border-zinc-100 dark:border-zinc-800\">\n            <div class=\"flex flex-col gap-3\">\n              <div class=\"flex-1\">\n                <label\n                  class=\"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1\"\n                  for=\"send-notification\"\n                >\n                  {{ __('Send user notification', 'uixpress') }}\n                </label>\n                <p class=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                  {{\n                    __(\n                      'Send an email notification to the user about the changes.',\n                      'uixpress'\n                    )\n                  }}\n                </p>\n              </div>\n              <AppToggle\n                v-model=\"sendUserNotification\"\n                id=\"send-notification\"\n                class=\"w-auto\"\n              />\n            </div>\n          </div>\n\n          <!-- Save Button -->\n          <div class=\"pt-4 border-t border-zinc-100 dark:border-zinc-800\">\n            <AppButton type=\"primary\" @click=\"handleSave\" :loading=\"isSaving\">\n              {{ __('Update User', 'uixpress') }}\n            </AppButton>\n          </div>\n\n          <!-- Activity Log Section -->\n          <div v-if=\"activityLogEnabled\" class=\"pt-6 border-t border-zinc-100 dark:border-zinc-800\">\n            <div class=\"flex items-center justify-between mb-4\">\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500\"\n              >\n                {{ __('Recent Activity', 'uixpress') }}\n              </label>\n            </div>\n\n            <!-- Loading State -->\n            <div v-if=\"loadingActivities\" class=\"py-4 text-center\">\n              <AppIcon\n                icon=\"refresh\"\n                class=\"text-lg text-zinc-400 dark:text-zinc-500 animate-spin mx-auto\"\n              />\n            </div>\n\n            <!-- Activities List -->\n            <div v-else-if=\"userActivities.length > 0\" class=\"space-y-2\">\n              <div\n                v-for=\"activity in userActivities\"\n                :key=\"activity.id\"\n                @click=\"handleActivityClick(activity)\"\n                class=\"flex items-center gap-2.5 px-3 py-2 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors cursor-pointer\"\n              >\n                <!-- Action Badge -->\n                <span\n                  :class=\"[\n                    'px-2 py-0.5 text-[10px] font-medium rounded uppercase flex items-center gap-1 flex-shrink-0',\n                    getActionColor(activity.action),\n                  ]\"\n                >\n                  <AppIcon :icon=\"getActionIcon(activity.action)\" class=\"text-[10px]\" />\n                  {{ activity.action }}\n                </span>\n\n                <!-- Activity Info -->\n                <div class=\"flex-1 min-w-0 text-xs text-zinc-600 dark:text-zinc-400\">\n                  <span class=\"font-medium\">{{ activity.object_type }}</span>\n                  <span v-if=\"activity.object_id\"> #{{ activity.object_id }}</span>\n                  <span\n                    v-if=\"getObjectTitle(activity) && getObjectTitle(activity) !== activity.object_type\"\n                    class=\"text-zinc-500 dark:text-zinc-500\"\n                  >\n                    : {{ getObjectTitle(activity) }}\n                  </span>\n                </div>\n\n                <!-- Timestamp -->\n                <span class=\"text-xs text-zinc-500 dark:text-zinc-500 flex-shrink-0\">\n                  {{ formatRelativeTime(activity.created_at) }}\n                </span>\n              </div>\n            </div>\n\n            <!-- Empty State -->\n            <div v-else class=\"py-4 text-center text-sm text-zinc-500 dark:text-zinc-400\">\n              {{ __('No recent activity', 'uixpress') }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n"],"names":["appStore","useAppStore","route","useRoute","router","useRouter","loading","ref","userItem","isSaving","allRoles","userActivities","loadingActivities","activityLogEnabled","computed","_a","name","email","username","website","description","password","selectedRoles","sendUserNotification","availableRolesForTagInput","role","rolesForAPI","getUserItem","args","data","lmnFetch","notify","userRoleSlugs","fetchAllRoles","error","handleSave","updateData","formatDate","dateString","parseDate","parsed","formatRelativeTime","date","now","diffInSeconds","diffInMinutes","diffInHours","diffInDays","getActionIcon","action","getActionColor","getObjectTitle","activity","_b","_c","fetchUserActivities","getActivityLogUrl","activityId","handleActivityClick","url","onMounted","watch","newUserId","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_createVNode","AppIcon","_hoisted_5","_toDisplayString","__","_Fragment","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","AppInput","$event","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","AppTextArea","_hoisted_24","_hoisted_25","TagInput","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","AppToggle","_hoisted_31","AppButton","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_renderList","_normalizeClass","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43"],"mappings":"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"}