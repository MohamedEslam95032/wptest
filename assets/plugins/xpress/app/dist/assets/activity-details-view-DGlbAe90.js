import{u as T,a as M}from"./vue-router-mJSwnJkd.js";import{u as J,r as k,c as C,a as O,o as Z,b as o,d as r,k as d,j as t,t as a,n as $,f as v,h as z,_ as w,E as B,O as U}from"./_plugin-vue_export-helper-y4Xv5kKr.js";const V={class:"h-full overflow-y-auto"},L={key:0,class:"p-8 text-center"},R={class:"text-zinc-600 dark:text-zinc-400"},j={key:1,class:"p-6 lg:p-8"},E={class:"mb-6 pb-6 border-b border-zinc-200 dark:border-zinc-700"},W={class:"flex items-center justify-between mb-4"},F={class:"text-2xl font-semibold text-zinc-900 dark:text-zinc-100"},H={class:"flex items-center gap-3"},P={class:"text-sm text-zinc-600 dark:text-zinc-400"},q={key:0},G={class:"mb-6"},K={class:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4"},Q={class:"flex items-center gap-4"},X={class:"w-16 h-16 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden"},Y=["src","alt"],S={key:1,class:"w-full h-full flex items-center justify-center"},ee={class:"font-medium text-zinc-900 dark:text-zinc-100"},te={class:"text-sm text-zinc-600 dark:text-zinc-400"},se={class:"text-xs text-zinc-500 dark:text-zinc-500 mt-1"},ae={class:"mb-6"},ne={class:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4"},oe={class:"space-y-4"},re={class:"block text-xs font-medium text-zinc-600 dark:text-zinc-400 mb-1"},ie={class:"text-sm text-zinc-900 dark:text-zinc-100"},de={class:"text-xs text-zinc-500 dark:text-zinc-500 mt-1"},ce={key:0},le={class:"block text-xs font-medium text-zinc-600 dark:text-zinc-400 mb-1"},ue={class:"text-sm text-zinc-900 dark:text-zinc-100 font-mono"},_e={key:1},xe={class:"block text-xs font-medium text-zinc-600 dark:text-zinc-400 mb-1"},pe={class:"text-sm text-zinc-900 dark:text-zinc-100 font-mono break-all"},me={key:0,class:"mb-6"},ge={class:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={class:"block text-xs font-medium text-zinc-600 dark:text-zinc-400 mb-2"},he={class:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 text-xs font-mono text-zinc-900 dark:text-zinc-100 overflow-auto max-h-96"},ke={class:"block text-xs font-medium text-zinc-600 dark:text-zinc-400 mb-2"},ve={class:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 text-xs font-mono text-zinc-900 dark:text-zinc-100 overflow-auto max-h-96"},ze={key:1,class:"mb-6"},we={class:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4"},ye={class:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 text-xs font-mono text-zinc-900 dark:text-zinc-100 overflow-auto max-h-96"},De={key:2,class:"mb-6"},Ne={class:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4"},Ie={class:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 text-xs font-mono text-zinc-900 dark:text-zinc-100 overflow-auto max-h-96"},Je={__name:"activity-details-view",setup(Ae){const g=J(),_=T(),y=M(),x=k(!1),s=k(null),b=async()=>{if(!_.params.logId)return;x.value=!0,g.updateState("loading",!0);const e={endpoint:`uixpress/v1/activity-log/${_.params.logId}`},n=await B(e);if(x.value=!1,g.updateState("loading",!1),!(n!=null&&n.data)){U({title:(0,window.wp.i18n.__)("Activity log entry not found","uixpress"),type:"error"}),y.push("/");return}s.value=n.data},f=e=>{if(!e)return null;if(e.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/))return new Date(e+"Z");if(e.includes("T")&&(e.endsWith("Z")||e.match(/[+-]\d{2}:\d{2}$/)))return new Date(e);if(e.includes("T")&&!e.endsWith("Z")&&!e.match(/[+-]\d{2}:\d{2}$/))return new Date(e+"Z");const n=new Date(e);return isNaN(n.getTime())&&e.match(/^\d{4}-\d{2}-\d{2}/)?new Date(e+"Z"):n},h=e=>{if(!e)return"—";const n=f(e);return!n||isNaN(n.getTime())?"—":n.toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},D=e=>{if(!e)return"—";const n=f(e);if(!n||isNaN(n.getTime()))return"—";const c=Math.floor((new Date-n)/1e3);if(c<60)return(0,window.wp.i18n.__)("Just now","uixpress");const i=Math.floor(c/60);if(i<60)return i===1?(0,window.wp.i18n.__)("1 minute ago","uixpress"):(0,window.wp.i18n.__)("%d minutes ago","uixpress").replace("%d",i);const u=Math.floor(i/60);if(u<24)return u===1?(0,window.wp.i18n.__)("1 hour ago","uixpress"):(0,window.wp.i18n.__)("%d hours ago","uixpress").replace("%d",u);const m=Math.floor(u/24);return m<7?m===1?(0,window.wp.i18n.__)("1 day ago","uixpress"):(0,window.wp.i18n.__)("%d days ago","uixpress").replace("%d",m):h(e)},N=e=>({created:"add",updated:"edit",deleted:"delete",trashed:"delete",restored:"restore",activated:"check_circle",deactivated:"cancel",installed:"download",login:"login",logout:"logout",role_changed:"admin_users",status_changed:"flag",uploaded:"upload"})[e]||"info",I=e=>({created:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",updated:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",deleted:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",trashed:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",restored:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",activated:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",deactivated:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",installed:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",login:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",logout:"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400",role_changed:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",status_changed:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",uploaded:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"})[e]||"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-400",l=e=>{if(!e)return"—";if(typeof e=="string")try{e=JSON.parse(e)}catch{return e}return JSON.stringify(e,null,2)},A=C(()=>s.value?s.value.old_value&&s.value.new_value&&JSON.stringify(s.value.old_value)!==JSON.stringify(s.value.new_value):!1);return O(()=>_.params.logId,()=>{b()},{immediate:!0}),Z(()=>{b()}),(e,n)=>{var p,c,i;return r(),o("div",V,[x.value?(r(),o("div",L,[t("p",R,a(e.__("Loading...","uixpress")),1)])):s.value?(r(),o("div",j,[t("div",E,[t("div",W,[t("h2",F,a(e.__("Activity Details","uixpress")),1)]),t("div",H,[t("span",{class:$(["px-3 py-1.5 text-sm font-medium rounded-lg uppercase flex items-center gap-2",I(s.value.action)])},[v(w,{icon:N(s.value.action),class:"text-base"},null,8,["icon"]),z(" "+a(s.value.action),1)],2),t("span",P,[z(a(s.value.object_type)+" ",1),s.value.object_id?(r(),o("span",q," #"+a(s.value.object_id),1)):d("",!0)])])]),t("div",G,[t("h3",K,a(e.__("User Information","uixpress")),1),t("div",Q,[t("div",X,[(p=s.value.user)!=null&&p.avatar?(r(),o("img",{key:0,src:s.value.user.avatar,alt:s.value.user.name,class:"w-full h-full object-cover"},null,8,Y)):(r(),o("div",S,[v(w,{icon:"person",class:"text-zinc-500 dark:text-zinc-400 text-2xl"})]))]),t("div",null,[t("p",ee,a(((c=s.value.user)==null?void 0:c.name)||e.__("Unknown","uixpress")),1),t("p",te,a(((i=s.value.user)==null?void 0:i.email)||"—"),1),t("p",se," User ID: "+a(s.value.user_id),1)])])]),t("div",ae,[t("h3",ne,a(e.__("Activity Details","uixpress")),1),t("div",oe,[t("div",null,[t("label",re,a(e.__("Timestamp","uixpress")),1),t("p",ie,a(h(s.value.created_at)),1),t("p",de,a(D(s.value.created_at)),1)]),s.value.ip_address?(r(),o("div",ce,[t("label",le,a(e.__("IP Address","uixpress")),1),t("p",ue,a(s.value.ip_address),1)])):d("",!0),s.value.user_agent?(r(),o("div",_e,[t("label",xe,a(e.__("User Agent","uixpress")),1),t("p",pe,a(s.value.user_agent),1)])):d("",!0)])]),A.value?(r(),o("div",me,[t("h3",ge,a(e.__("Changes","uixpress")),1),t("div",be,[t("div",null,[t("label",fe,a(e.__("Before","uixpress")),1),t("pre",he,a(l(s.value.old_value)),1)]),t("div",null,[t("label",ke,a(e.__("After","uixpress")),1),t("pre",ve,a(l(s.value.new_value)),1)])])])):s.value.new_value?(r(),o("div",ze,[t("h3",we,a(e.__("Details","uixpress")),1),t("pre",ye,a(l(s.value.new_value)),1)])):d("",!0),s.value.metadata?(r(),o("div",De,[t("h3",Ne,a(e.__("Metadata","uixpress")),1),t("pre",Ie,a(l(s.value.metadata)),1)])):d("",!0)])):d("",!0)])}}};export{Je as default};
//# sourceMappingURL=activity-details-view-DGlbAe90.js.map
