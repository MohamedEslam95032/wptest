{"version":3,"file":"index-DghDHKPv.js","sources":["../../src/components/utility/modal/index.vue","../../src/components/utility/confirm/index.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, watchEffect, nextTick, defineProps } from 'vue';\nconst open = ref(false);\nconst innerOpen = ref(false);\nconst props = defineProps({ position: { type: 'string', default: 'center' } });\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Refs\nconst panel = ref(null);\n\n/**\n * Returns position classes\n */\nconst setPositionClass = computed(() => {\n  if (props.position === 'center') return 'items-center place-content-center';\n  if (props.position === 'top') return 'items-start place-content-center pt-32';\n});\n/**\n * Shows off canvas\n */\nconst show = () => {\n  open.value = true;\n  document.addEventListener('keydown', handleEscapeKey);\n};\n\n/**\n * Returns whether the modal is open\n */\nconst isOpen = computed(() => {\n  return open.value;\n});\n\n// Watch escape keys\nconst handleEscapeKey = (event) => {\n  if (event.key === 'Escape') close();\n};\n\nconst shadowRoot = computed(() => {\n  return appStore.state.shadowRootHolder || 'html';\n});\n\nconst close = (evt) => {\n  if (!panel.value) return;\n  // Don't do anything if the click came from inside panel\n  if (evt) {\n    if (panel.value.contains(evt.target)) return;\n  }\n\n  open.value = false;\n  document.removeEventListener('keydown', handleEscapeKey);\n};\n\nwatchEffect(() => {\n  if (open.value) {\n    nextTick(() => {\n      innerOpen.value = true;\n    });\n  } else {\n    innerOpen.value = false;\n  }\n});\n\n/**\n * Exposes open and close methods\n */\ndefineExpose({\n  show,\n  close,\n  isOpen,\n});\n</script>\n\n<template>\n  <Transition>\n    <div\n      @click=\"close\"\n      v-if=\"open\"\n      class=\"fixed top-0 left-0 right-0 h-dvh max-h-dvh max-w-dvw bg-zinc-950/60 flex flex-row z-[99999] pointer-events-auto\"\n      :class=\"setPositionClass\"\n    >\n      <Transition name=\"slide-up\">\n        <div\n          v-if=\"innerOpen\"\n          ref=\"panel\"\n          class=\"bg-white dark:bg-zinc-900 rounded-2xl h-auto border border-zinc-200/80 dark:border-zinc-700/40 shadow-sm max-w-screen\"\n        >\n          <slot />\n        </div>\n      </Transition>\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all 0.3s ease-out;\n  transition-delay: 0.2s;\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  transform: translateY(60px);\n  opacity: 0;\n}\n\n.slide-up-enter-to,\n.slide-up-leave-from {\n  transform: translateY(0);\n  opacity: 1;\n}\n</style>\n","<script setup>\nimport { ref, nextTick, watchEffect } from \"vue\";\nimport Modal from \"@/components/utility/modal/index.vue\";\nimport AppIcon from \"@/components/utility/icons/index.vue\";\nimport uiButton from \"@/components/utility/app-button/index.vue\";\n\nconst popup = ref(null);\n\nconst title = ref(undefined);\nconst confirmBody = ref(undefined);\nconst message = ref(undefined);\nconst okButton = ref(undefined);\nconst cancelButton = ref(\"Cancel\");\nconst icon = ref(\"report\");\nconst resolvePromise = ref(undefined);\nconst rejectPromise = ref(undefined);\n\n/**\n * Shows confirm dialog and sets options\n *\n * @param {Object} opts - the confirm options\n * @since 0.0.1\n */\nconst show = (opts = {}) => {\n  title.value = opts.title;\n  message.value = opts.message;\n  okButton.value = opts.okButton;\n  if (opts.icon) {\n    icon.value = opts.icon;\n  }\n  if (opts.cancelButton) {\n    cancelButton.value = opts.cancelButton;\n  }\n  // Once we set our config, we tell the popup modal to open\n  popup.value.show();\n\n  // Return promise so the caller can get results\n  return new Promise((resolve, reject) => {\n    resolvePromise.value = resolve;\n    rejectPromise.value = reject;\n  });\n};\n\n/**\n * Confirms and closes modal\n *\n * @since 0.0.1\n */\nconst confirm = () => {\n  popup.value.close();\n  resolvePromise.value(true);\n};\n\n/**\n * Cancels and closes modal\n *\n * @since 0.0.1\n */\nconst cancel = () => {\n  popup.value.close();\n  resolvePromise.value(false);\n};\n\nwatchEffect(() => {\n  if (confirmBody.value) {\n    confirmBody.value.focus();\n  }\n});\n\n/**\n * Exposes open and close methods\n */\ndefineExpose({\n  show,\n  cancel,\n});\n</script>\n\n<template>\n  <modal ref=\"popup\">\n    <div ref=\"confirmBody\" @keydown.escape=\"cancel()\" @keydown.enter=\"confirm()\" class=\"flex flex-col focus:outline-0 w-[400px] p-8 gap-6\" tabindex=\"1\" autofocus>\n      <div class=\"flex flex-row items-center place-content-between\">\n        <h2 class=\"text-2xl font-semibold text-zinc-900 dark:text-zinc-100\">{{ title }}</h2>\n        <uiButton type=\"transparent\" @click=\"cancel()\"><AppIcon icon=\"close\" /></uiButton>\n      </div>\n\n      <div class=\"text-zinc-500 dark:text-zinc-400\" v-html=\"message\"></div>\n\n      <div class=\"flex flex-row gap-3 items-center place-content-end mt-2\">\n        <uiButton @click.stop=\"cancel()\" type=\"default\">\n          <div class=\"flex flex-row gap-3 items-center place-content-center\">\n            <span>{{ cancelButton }}</span>\n            <span class=\"text-sm text-zinc-500\">esc</span>\n          </div>\n        </uiButton>\n\n        <uiButton @click.stop=\"confirm()\" type=\"primary\">\n          <div class=\"flex flex-row gap-3 items-center place-content-center\">\n            <span>{{ okButton }}</span>\n            <span class=\"text-sm text-zinc-500\"><AppIcon icon=\"return\" /></span>\n          </div>\n        </uiButton>\n      </div>\n    </div>\n  </modal>\n</template>\n"],"names":["open","ref","innerOpen","props","__props","appStore","useAppStore","panel","setPositionClass","computed","show","handleEscapeKey","isOpen","event","close","evt","watchEffect","nextTick","__expose","_createBlock","_Transition","_createElementBlock","_normalizeClass","_createVNode","_renderSlot","_ctx","popup","title","confirmBody","message","okButton","cancelButton","icon","resolvePromise","rejectPromise","opts","resolve","reject","confirm","cancel","Modal","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","uiButton","AppIcon","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7"],"mappings":"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"}