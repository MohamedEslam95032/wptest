{"version":3,"file":"index-C_FNz6s0.js","sources":["../../src/components/utility/notifications/index.vue","../../src/components/utility/loading-indicator/loading-indicator.ts","../../src/components/utility/loading-indicator/index.ts"],"sourcesContent":["<script setup>\nimport { ref } from 'vue';\n\n// Get noti store\nimport { useNotificationStore } from '@/store/notifications/notifications.js';\nconst notificationsStore = useNotificationStore();\n\n// Import icons\nimport AppIcon from '@/components/utility/icons/index.vue';\n\n/**\n * Returns minimal styling for each notification type\n */\nconst getNotificationStyles = (type) => {\n  const styles = {\n    success: {\n      icon: 'tick',\n      iconColor: 'text-green-400',\n      dot: 'bg-green-400',\n    },\n    warning: {\n      icon: 'warning',\n      iconColor: 'text-amber-400',\n      dot: 'bg-amber-400',\n    },\n    error: {\n      icon: 'error',\n      iconColor: 'text-red-400',\n      dot: 'bg-red-400',\n    },\n    info: {\n      icon: 'info',\n      iconColor: 'text-indigo-400',\n      dot: 'bg-indigo-400',\n    },\n  };\n\n  return styles[type] || styles.info;\n};\n</script>\n\n<template>\n  <TransitionGroup\n    tag=\"div\"\n    name=\"notification\"\n    class=\"fixed bottom-6 right-6 w-80 flex flex-col-reverse gap-2 z-[999999] pointer-events-none\"\n  >\n    <div\n      v-for=\"(noti, index) in notificationsStore.getAll\"\n      :key=\"noti.id\"\n      class=\"group bg-zinc-800/95 backdrop-blur-sm border border-zinc-800/50 rounded-xl shadow-lg pointer-events-auto transition-all duration-200 hover:border-zinc-700/60\"\n    >\n      <div class=\"flex items-start gap-3 p-4\">\n        <!-- Status dot -->\n        <div\n          class=\"w-2 h-2 rounded-full flex-shrink-0 mt-2\"\n          :class=\"getNotificationStyles(noti.type).dot\"\n        ></div>\n\n        <!-- Content -->\n        <div class=\"flex-1 min-w-0\">\n          <div\n            class=\"text-sm font-medium text-white mb-1\"\n            v-html=\"noti.title\"\n          ></div>\n          <div class=\"text-xs text-zinc-400\" v-html=\"noti.message\"></div>\n        </div>\n\n        <!-- Actions -->\n        <div class=\"flex items-center gap-2 flex-shrink-0\">\n          <!-- Loader -->\n          <div v-if=\"noti.loader\" class=\"w-4 h-4\">\n            <div\n              class=\"w-4 h-4 border border-zinc-600 border-t-zinc-400 rounded-full animate-spin\"\n            ></div>\n          </div>\n\n          <!-- Close button -->\n          <button\n            v-else-if=\"noti.dismissable\"\n            @click=\"notificationsStore.remove(index)\"\n            class=\"w-6 h-6 rounded-md text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50 flex items-center justify-center transition-all duration-200 opacity-0 group-hover:opacity-100\"\n          >\n            <AppIcon icon=\"close\" class=\"w-3 h-3\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  </TransitionGroup>\n\n  <component is=\"style\">\n    /* Minimal animations that match your app's style */\n    .notification-enter-active { transition: all 0.3s cubic-bezier(0.16, 1, 0.3,\n    1); } .notification-leave-active { transition: all 0.25s cubic-bezier(0.4,\n    0, 1, 1); } .notification-enter-from { opacity: 0; transform:\n    translateX(100%) scale(0.95); } .notification-leave-to { opacity: 0;\n    transform: translateX(100%) scale(0.95); } .notification-move { transition:\n    transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); }\n  </component>\n</template>\n","import { computed, getCurrentScope, onScopeDispose, ref } from \"vue\";\nimport type { Ref } from \"vue\";\n\nexport type LoadingIndicatorOpts = {\n  /** @default 2000 */\n  duration: number;\n  /** @default 200 */\n  throttle: number;\n  /** @default 500 */\n  hideDelay: number;\n  /** @default 400 */\n  resetDelay: number;\n  /**\n   * You can provide a custom function to customize the progress estimation,\n   * which is a function that receives the duration of the loading bar (above)\n   * and the elapsed time. It should return a value between 0 and 100.\n   */\n  estimatedProgress?: (duration: number, elapsed: number) => number;\n};\n\nexport type LoadingIndicator = {\n  _cleanup: () => void;\n  progress: Ref<number>;\n  isLoading: Ref<boolean>;\n  start: () => void;\n  set: (value: number) => void;\n  finish: (opts?: { force?: boolean }) => void;\n  clear: () => void;\n};\n\nfunction defaultEstimatedProgress(duration: number, elapsed: number): number {\n  const completionPercentage = (elapsed / duration) * 100;\n  return (2 / Math.PI) * 100 * Math.atan(completionPercentage / 50);\n}\n\nfunction createLoadingIndicator(opts: Partial<LoadingIndicatorOpts> = {}) {\n  const { duration = 2000, throttle = 200, hideDelay = 500, resetDelay = 400 } = opts;\n  const getProgress = opts.estimatedProgress || defaultEstimatedProgress;\n  const progress = ref(0);\n  const isLoading = ref(false);\n  let done = false;\n  let rafId: number;\n\n  let throttleTimeout: number | NodeJS.Timeout;\n  let hideTimeout: number | NodeJS.Timeout;\n  let resetTimeout: number | NodeJS.Timeout;\n\n  const start = () => set(0);\n\n  function set(at = 0) {\n    if (at >= 100) {\n      return finish();\n    }\n    clear();\n    progress.value = at < 0 ? 0 : at;\n    if (throttle) {\n      throttleTimeout = setTimeout(() => {\n        isLoading.value = true;\n        _startProgress();\n      }, throttle);\n    } else {\n      isLoading.value = true;\n      _startProgress();\n    }\n  }\n\n  function _hide() {\n    hideTimeout = setTimeout(() => {\n      isLoading.value = false;\n      resetTimeout = setTimeout(() => {\n        progress.value = 0;\n      }, resetDelay);\n    }, hideDelay);\n  }\n\n  function finish(opts: { force?: boolean } = {}) {\n    progress.value = 100;\n    done = true;\n    clear();\n    _clearTimeouts();\n    if (opts.force) {\n      progress.value = 0;\n      isLoading.value = false;\n    } else {\n      _hide();\n    }\n  }\n\n  function _clearTimeouts() {\n    clearTimeout(hideTimeout);\n    clearTimeout(resetTimeout);\n  }\n\n  function clear() {\n    clearTimeout(throttleTimeout);\n    cancelAnimationFrame(rafId);\n  }\n\n  function _startProgress() {\n    done = false;\n    let startTimeStamp: number;\n\n    function step(timeStamp: number): void {\n      if (done) {\n        return;\n      }\n\n      startTimeStamp ??= timeStamp;\n      const elapsed = timeStamp - startTimeStamp;\n      progress.value = Math.max(0, Math.min(100, getProgress(duration, elapsed)));\n\n      rafId = requestAnimationFrame(step);\n    }\n\n    rafId = requestAnimationFrame(step);\n  }\n\n  let _cleanup = () => {};\n  _cleanup = () => {\n    unsubError();\n    unsubLoadingStartHook();\n    unsubLoadingFinishHook();\n    clear();\n  };\n\n  return {\n    _cleanup,\n    progress: computed(() => progress.value),\n    isLoading: computed(() => isLoading.value),\n    start,\n    set,\n    finish,\n    clear,\n  };\n}\n\n/**\n * composable to handle the loading state of the page\n * @since 3.9.0\n */\nexport function useLoadingIndicator(opts: Partial<LoadingIndicatorOpts> = {}): Omit<LoadingIndicator, \"_cleanup\"> {\n  // Initialise global loading indicator if it doesn't exist already\n  const indicator = createLoadingIndicator(opts);\n\n  return indicator;\n}\n","import { defineComponent, h, watch, onMounted, nextTick } from \"vue\";\nimport { useLoadingIndicator } from \"./loading-indicator.ts\";\nimport { useAppStore } from \"@/store/app/app.js\";\n\nexport default defineComponent({\n  name: \"NuxtLoadingIndicator\",\n  props: {\n    throttle: {\n      type: Number,\n      default: 200,\n    },\n    duration: {\n      type: Number,\n      default: 2000,\n    },\n    height: {\n      type: Number,\n      default: 3,\n    },\n    color: {\n      type: [String, Boolean],\n      default: \"repeating-linear-gradient(to right, rgb(var(--uix-accent-600) / 1) 0%, rgb(var(--uix-accent-400) / 1) 50%, rgb(var(--uix-accent-300) / 1) 100%)\",\n    },\n    estimatedProgress: {\n      type: Function as unknown as () => (duration: number, elapsed: number) => number,\n      required: false,\n    },\n  },\n  setup(props, { slots, expose }) {\n    const { progress, isLoading, start, finish, clear } = useLoadingIndicator({\n      duration: props.duration,\n      throttle: props.throttle,\n      estimatedProgress: props.estimatedProgress,\n    });\n\n    const appStore = useAppStore();\n\n    watch(\n      () => appStore.state.loading,\n      () => {\n        if (appStore.state.loading) {\n          start();\n\n          // Add a timeout to finish loading\n          setTimeout(() => {\n            if (isLoading.value) {\n              //finish();\n            }\n          }, 2000);\n        } else {\n          finish();\n        }\n      }\n    );\n\n    expose({\n      progress,\n      isLoading,\n      start,\n      finish,\n      clear,\n    });\n\n    return () =>\n      h(\n        \"div\",\n        {\n          class: \"loading-indicator\",\n          style: {\n            position: \"fixed\",\n            top: 0,\n            right: 0,\n            left: 0,\n            pointerEvents: \"none\",\n            width: \"auto\",\n            height: `${props.height}px`,\n            opacity: isLoading.value ? 1 : 0,\n            background: props.color || undefined,\n            backgroundSize: `${(100 / progress.value) * 100}% auto`,\n            transform: `scaleX(${progress.value}%)`,\n            transformOrigin: \"left\",\n            transition: \"transform 0.1s, height 0.4s, opacity 0.4s\",\n            zIndex: 9999999,\n          },\n        },\n        slots\n      );\n  },\n});\n"],"names":["notificationsStore","useNotificationStore","getNotificationStyles","type","styles","_createVNode","_TransitionGroup","_openBlock","_createElementBlock","_Fragment","_unref","noti","index","_createElementVNode","_hoisted_1","_normalizeClass","_hoisted_2","_hoisted_5","_hoisted_6","_cache","$event","AppIcon","_createBlock","_resolveDynamicComponent","defaultEstimatedProgress","duration","elapsed","completionPercentage","createLoadingIndicator","opts","throttle","hideDelay","resetDelay","getProgress","progress","ref","isLoading","done","rafId","throttleTimeout","hideTimeout","resetTimeout","start","set","at","finish","clear","_startProgress","_hide","_clearTimeouts","startTimeStamp","step","timeStamp","_cleanup","computed","useLoadingIndicator","LoadingIndicator","defineComponent","props","slots","expose","appStore","useAppStore","watch","h"],"mappings":"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"}