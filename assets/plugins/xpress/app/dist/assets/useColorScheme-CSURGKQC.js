import{r as i,c as m,u as f,a as v}from"./_plugin-vue_export-helper-y4Xv5kKr.js";const u=i(!1),a=i("system"),c=i(!1);let n=null,r;const s=m(()=>{var t,o;r||(r=f());const e=(o=(t=r==null?void 0:r.state)==null?void 0:t.uixpress_settings)==null?void 0:o.force_global_theme;return e=="off"||!e?!1:e}),l=()=>{if(s.value){u.value=s.value==="dark";return}const e=a.value==="dark"||a.value==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;u.value=e},d=(e,t)=>{if(["light","dark","system"].includes(e)&&(a.value=e,localStorage.setItem("uipc_theme",e),l(),!t)){const o=new CustomEvent("uipx-theme-update",{detail:e});document.dispatchEvent(o)}},p=()=>{a.value=localStorage.getItem("uipc_theme")||"system",l(),window.matchMedia&&(n=window.matchMedia("(prefers-color-scheme: dark)"),n.addEventListener("change",l))},g=()=>{c.value||(c.value=!0,document.addEventListener("uipx-theme-update",t=>{t.detail&&d(t.detail,!0)}),v(s,()=>{l()},{immediate:!1}));const e=m(()=>s.value?s.value:a.value!=="system"?a.value:u.value?"dark":"light");return{prefersDark:u,colorScheme:e,setColorScheme:d,userPreference:a,globalOverride:s}};export{p as s,g as u};
//# sourceMappingURL=useColorScheme-CSURGKQC.js.map
