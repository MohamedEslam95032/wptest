import{G as M,u as Q,r as x,o as D,b as o,d as i,j as t,f as a,g as u,_ as p,l as N,D as y,t as r,h as m,k,F as f,m as v,W as I,I as O,J as F,O as g,E as V}from"./_plugin-vue_export-helper-y4Xv5kKr.js";import{a as $}from"./vue-router-mJSwnJkd.js";const j={class:"flex flex-col h-full bg-white dark:bg-zinc-900"},K={class:"flex items-center justify-between px-6 py-4 border-b border-zinc-200 dark:border-zinc-800"},R={class:"flex items-center gap-4"},B={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100"},J={class:"text-sm text-zinc-500 dark:text-zinc-400"},P={class:"flex items-center gap-2"},U={key:0,class:"absolute right-0 top-0 bottom-0 w-80 bg-white dark:bg-zinc-900 border-l border-zinc-200 dark:border-zinc-800 z-10 overflow-y-auto"},A={class:"p-4 border-b border-zinc-200 dark:border-zinc-800"},G={class:"flex items-center justify-between"},W={class:"text-sm font-semibold text-zinc-900 dark:text-zinc-100"},X={class:"p-2"},Y={key:0,class:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400"},Z=["onClick"],ee={class:"text-xs text-zinc-500 dark:text-zinc-400 mb-1"},te={class:"text-sm text-zinc-900 dark:text-zinc-100 font-mono truncate"},se={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-1"},re={class:"flex flex-1 overflow-hidden"},ne={class:"flex-1 flex flex-col border-r border-zinc-200 dark:border-zinc-800"},oe={class:"px-4 py-2 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-800"},ie={class:"text-xs font-medium text-zinc-500 dark:text-zinc-400"},ae=["placeholder"],le={class:"flex-1 flex flex-col overflow-hidden"},ce={class:"px-4 py-2 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-800"},de={class:"text-xs font-medium text-zinc-500 dark:text-zinc-400"},ue={key:0,class:"ml-2"},_e={class:"flex-1 overflow-auto p-4"},xe={key:0,class:"space-y-4"},pe={key:1,class:"text-center py-12"},ye={class:"text-sm text-zinc-500 dark:text-zinc-400"},fe={key:2,class:"overflow-x-auto"},ve={class:"w-full"},be={class:"bg-zinc-50 dark:bg-zinc-800 sticky top-0"},me={class:"divide-y divide-zinc-200 dark:divide-zinc-800"},he=["title"],ze=["innerHTML"],ke={__name:"query-editor",setup(ge){Q();const C=$(),l=x("SELECT * FROM wp_posts LIMIT 100;"),b=x(!1),c=x([]),d=x([]),_=x(!1),w=async()=>{if(!l.value.trim()){g({title:(0,window.wp.i18n.__)("Please enter a SQL query","uixpress"),type:"warning"});return}b.value=!0,c.value=[];try{const e={endpoint:"uixpress/v1/database/query",type:"POST",data:{query:l.value.trim(),limit:1e3}},s=await V(e);s&&s.data&&(c.value=s.data.data||[],d.value.unshift({query:l.value.trim(),timestamp:new Date().toISOString(),rows:s.data.rows_affected||0}),d.value.length>20&&(d.value=d.value.slice(0,20)),g({title:(0,window.wp.i18n.sprintf)((0,window.wp.i18n.__)("Query executed successfully. %d rows returned.","uixpress"),c.value.length),type:"success"}))}catch(e){g({title:e.message||(0,window.wp.i18n.__)("Error executing query","uixpress"),type:"error"}),console.error("Error executing query:",e)}finally{b.value=!1}},L=e=>{l.value=e.query,_.value=!1},S=()=>{l.value="",c.value=[]},E=e=>{const s=document.createElement("div");return s.textContent=e,s.innerHTML},q=e=>e==null?'<span class="text-zinc-400 italic">NULL</span>':E(typeof e=="object"?JSON.stringify(e):String(e)),T=e=>{(e.ctrlKey||e.metaKey)&&e.key==="Enter"&&(e.preventDefault(),w())};return D(()=>{l.value="SELECT * FROM wp_posts LIMIT 100;"}),(e,s)=>(i(),o("div",j,[t("div",K,[t("div",R,[a(y,{onClick:s[0]||(s[0]=n=>N(C).push("/")),type:"transparent",class:"p-2"},{default:u(()=>[a(p,{icon:"arrow_back",class:"text-base"})]),_:1}),t("div",null,[t("h2",B,r(e.__("SQL Query Editor","uixpress")),1),t("p",J,r(e.__("Execute SELECT queries only (read-only for safety)","uixpress")),1)])]),t("div",P,[a(y,{onClick:s[1]||(s[1]=n=>_.value=!_.value),type:"transparent",class:"text-sm"},{default:u(()=>[a(p,{icon:"history",class:"text-base mr-2"}),m(" "+r(e.__("History","uixpress")),1)]),_:1}),a(y,{onClick:S,type:"transparent",class:"text-sm"},{default:u(()=>[m(r(e.__("Clear","uixpress")),1)]),_:1}),a(y,{onClick:w,disabled:b.value||!l.value.trim(),type:"primary",class:"text-sm"},{default:u(()=>[a(p,{icon:"play_arrow",class:"text-base mr-2"}),m(" "+r(e.__("Execute","uixpress"))+" ",1),s[4]||(s[4]=t("span",{class:"ml-2 text-xs opacity-70"},"(Ctrl+Enter)",-1))]),_:1},8,["disabled"])])]),a(I,null,{default:u(()=>[_.value?(i(),o("div",U,[t("div",A,[t("div",G,[t("h3",W,r(e.__("Query History","uixpress")),1),a(y,{onClick:s[2]||(s[2]=n=>_.value=!1),type:"transparent",class:"p-1"},{default:u(()=>[a(p,{icon:"close",class:"text-base"})]),_:1})])]),t("div",X,[d.value.length===0?(i(),o("div",Y,r(e.__("No query history","uixpress")),1)):k("",!0),(i(!0),o(f,null,v(d.value,(n,h)=>(i(),o("div",{key:h,onClick:z=>L(n),class:"p-3 rounded-lg cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 mb-2 transition-colors"},[t("div",ee,r(new Date(n.timestamp).toLocaleString()),1),t("div",te,r(n.query),1),t("div",se,r(n.rows)+" "+r(e.__("rows","uixpress")),1)],8,Z))),128))])])):k("",!0)]),_:1}),t("div",re,[t("div",ne,[t("div",oe,[t("span",ie,r(e.__("SQL Query","uixpress")),1)]),O(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=n=>l.value=n),onKeydown:T,class:"flex-1 p-4 font-mono text-sm bg-transparent text-zinc-900 dark:text-zinc-100 resize-none focus:outline-none",placeholder:e.__("Enter your SELECT query here...","uixpress")},null,40,ae),[[F,l.value]])]),t("div",le,[t("div",ce,[t("span",de,[m(r(e.__("Results","uixpress"))+" ",1),c.value.length>0?(i(),o("span",ue," ("+r(c.value.length)+" "+r(e.__("rows","uixpress"))+") ",1)):k("",!0)])]),t("div",_e,[b.value?(i(),o("div",xe,[(i(),o(f,null,v(5,n=>t("div",{key:n,class:"h-12 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse"})),64))])):c.value.length===0?(i(),o("div",pe,[a(p,{icon:"database",class:"text-4xl text-zinc-300 dark:text-zinc-700 mx-auto mb-4"}),t("p",ye,r(e.__("No results yet. Execute a query to see results.","uixpress")),1)])):(i(),o("div",fe,[t("table",ve,[t("thead",be,[t("tr",null,[(i(!0),o(f,null,v(Object.keys(c.value[0]||{}),n=>(i(),o("th",{key:n,class:"px-4 py-3 text-left text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase"},r(n),1))),128))])]),t("tbody",me,[(i(!0),o(f,null,v(c.value,(n,h)=>(i(),o("tr",{key:h,class:"hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors"},[(i(!0),o(f,null,v(n,(z,H)=>(i(),o("td",{key:H,class:"px-4 py-3 text-sm text-zinc-900 dark:text-zinc-100 max-w-xs truncate",title:q(z)},[t("span",{innerHTML:q(z)},null,8,ze)],8,he))),128))]))),128))])])]))])])])]))}},qe=M(ke,[["__scopeId","data-v-cddebca1"]]);export{qe as default};
//# sourceMappingURL=query-editor-DkngT3ee.js.map
