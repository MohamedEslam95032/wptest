{"version":3,"mappings":"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","names":["useDarkMode","isDark","ref","observer","checkDarkMode","onMounted","mutations","mutation","onUnmounted","useAppStore","adoptedStyleSheets","appStyles","rule","_createBlock","_resolveDynamicComponent","_cache","_createVNode","_unref","ShadowRoot","_createElementVNode","_normalizeClass","Notifications","_hoisted_1","LoadingIndicator","_component_RouterView","useRouter","route","useRoute","props","__props","emit","__emit","showContextMenu","contextMenuPosition","contextMenuItem","handleMediaClick","item","event","handleCheckboxToggle","isSelected","showItemContextMenu","hideContextMenu","handleDeleteItem","formatFileSize","bytes","sizes","i","formatDate","dateString","getFileTypeIcon","mimeType","_openBlock","_createElementBlock","_hoisted_2","_Fragment","_renderList","_component_RouterLink","$event","_withModifiers","AppCheckbox","_hoisted_4","_hoisted_6","AppIcon","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_normalizeStyle","_createTextVNode","__","appStore","router","loading","mediaItems","filteredMedia","sortBy","sortOrder","searchQuery","selectedType","showUnusedOnly","dateFilter","filtersExpanded","selectedTags","allTags","uploadDialog","uploadInput","isUploading","dragOver","dragCounter","uploadProgress","windowWidth","drawerOpen","selectedMedia","lastSelectedIndex","isDuplicating","confirmDialog","viewMode","bulkEditDrawerOpen","isDownloading","isBulkEditing","bulkEditForm","pagination","windowWidthComputed","computed","canGoPrev","canGoNext","goPrevPage","getMediaData","goNextPage","activeFiltersCount","count","args","data","lmnFetch","_a","_b","_c","_d","_e","_h","_g","_f","_k","_j","_i","_n","_m","_l","applyFilters","selectMediaItem","toggleMediaSelection","currentIndex","media","start","end","id","index","hasSelection","selectedCountText","viewSelectedMedia","firstSelectedId","getFileExtension","filename","sourceUrl","batchDuplicateMedia","mediaId","fullMediaResponse","mediaItem","fileExtension","baseFileName","fileName","mediaResponse","mediaBlob","fileObject","formData","notify","error","clearSelection","openBulkEdit","saveBulkEdit","updatePromises","updateData","bulkDownload","response","link","handleBatchDelete","countText","handleDelete","mediaIds","deletePromises","setStyles","appStyleNode","manuallyAddStyleSheet","filtered","now","itemDate","date","daysDiff","query","a","b","aValue","bValue","fetchAllTags","toggleTag","tagId","isTagSelected","clearFilters","handleUpload","files","successCount","file","e","openUploadDialog","onUploadChange","handleDragOver","handleDragEnter","handleDragLeave","handleDrop","watch","handleResize","preventFileDragDefaults","eventName","newVal","_hoisted_3","AppButton","_Transition","_hoisted_5","_hoisted_13","_hoisted_15","_hoisted_21","_hoisted_22","option","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","tag","_hoisted_31","_hoisted_32","_hoisted_33","Select","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","MediaList","_hoisted_51","_withCtx","Component","Drawer","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","Confirm","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","AppInput","_hoisted_71","_hoisted_72","AppTextArea","_hoisted_73","_hoisted_74","MediaListView","app","createApp","AppWrapper","pinia","createPinia","setGlobalProperties","setVueGlobalProperties","routes","MediaLayout","__vitePreload","createRouter","createWebHashHistory"],"ignoreList":[],"sources":["../src/pages/media/src/useDarkMode.js","../src/pages/media/index.vue","../src/pages/media/src/media-list.vue","../src/pages/media/src/media-list-view.vue","../src/pages/media/src/layout.vue","../src/apps/js/uixpressMedia.js"],"sourcesContent":["import { ref, onMounted, onUnmounted } from 'vue';\n\nexport function useDarkMode() {\n  const isDark = ref(false);\n\n  let observer = null;\n\n  const checkDarkMode = () => {\n    isDark.value = document.body.classList.contains('dark');\n  };\n\n  onMounted(() => {\n    // Initial check\n    checkDarkMode();\n\n    // Set up the mutation observer\n    observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'class'\n        ) {\n          checkDarkMode();\n        }\n      });\n    });\n\n    // Start observing\n    observer.observe(document.body, {\n      attributes: true,\n      attributeFilter: ['class'],\n    });\n  });\n\n  onUnmounted(() => {\n    if (observer) {\n      observer.disconnect();\n    }\n  });\n\n  return { isDark };\n}\n","<script setup>\nimport { ref, watch, nextTick, computed } from 'vue';\nimport { ShadowRoot } from 'vue-shadow-dom';\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Funcs\nimport { useDarkMode } from './src/useDarkMode.js';\nconst { isDark } = useDarkMode();\n\n// Comps\nimport Notifications from '@/components/utility/notifications/index.vue';\nimport LoadingIndicator from '@/components/utility/loading-indicator/index.ts';\n\n// Refs\nconst adoptedStyleSheets = ref(new CSSStyleSheet());\nconst loading = ref(false);\nconst store = ref();\n\n/**\n * Injects styles into shadow root\n */\nconst setStyles = () => {\n  const appStyleNode = document.querySelector('#uixpress-media-css');\n  const appStyles = appStyleNode.sheet;\n  for (const rule of [...appStyles.cssRules].reverse()) {\n    adoptedStyleSheets.value.insertRule(rule.cssText);\n  }\n};\n\nsetStyles();\n</script>\n\n<template>\n  <!--Menu -->\n  <component is=\"style\"> html{font-size:14px;}#wpcontent{padding:0}</component>\n  <ShadowRoot\n    tag=\"div\"\n    :adopted-style-sheets=\"[adoptedStyleSheets]\"\n    class=\"uipx-normalize\"\n  >\n    <component is=\"style\">\n      :root{font-size:14px}#wpcontent{padding:0}</component\n    >\n    <div\n      class=\"overflow-hidden uipx-normalize font-sans h-[var(--uixp-body-height)] max-h-[var(--uixp-body-height)]\"\n      :class=\"isDark ? 'dark' : ''\"\n    >\n      <Notifications />\n      <div class=\"translate-x-0\">\n        <LoadingIndicator :height=\"3\" />\n      </div>\n      <RouterView />\n    </div>\n  </ShadowRoot>\n</template>\n\n<style>\nhtml {\n  --uixp-body-height: calc(100vh - var(--uixp-toolbar-height) - 1rem);\n}\n#wpbody-content {\n  padding: 0;\n}\n#wpcontent {\n  padding: 0 !important;\n}\n</style>\n","<script setup>\nimport { ref, computed } from 'vue';\nimport AppIcon from '@/components/utility/icons/index.vue';\nimport AppButton from '@/components/utility/app-button/index.vue';\nimport AppCheckbox from '@/components/utility/media-library/src/checkbox.vue';\nimport { useRouter, useRoute } from 'vue-router';\n\nconst router = useRouter();\nconst route = useRoute();\n\n// Props\nconst props = defineProps({\n  media: {\n    type: Array,\n    default: () => [],\n  },\n  selectedMedia: {\n    type: Array,\n    default: () => [],\n  },\n  viewMode: {\n    type: String,\n    default: 'list', // 'list' or 'grid'\n  },\n});\n\n// Emits\nconst emit = defineEmits(['selectMedia', 'delete', 'toggleSelection']);\n\n// Local refs\nconst showContextMenu = ref(false);\nconst contextMenuPosition = ref({ x: 0, y: 0 });\nconst contextMenuItem = ref(null);\n\n/**\n * Handle media item click (for details view)\n */\nconst handleMediaClick = (item, event) => {\n  // Don't navigate if clicking on checkbox\n  if (event.target.closest('.media-checkbox')) {\n    return;\n  }\n  emit('selectMedia', item);\n};\n\n/**\n * Handle checkbox toggle\n */\nconst handleCheckboxToggle = (item, event) => {\n  event.stopPropagation();\n  emit('toggleSelection', item, event);\n};\n\n/**\n * Check if media item is selected\n */\nconst isSelected = (item) => {\n  return props.selectedMedia.includes(item.id);\n};\n\n/**\n * Handle context menu\n */\nconst showItemContextMenu = (event, item) => {\n  event.preventDefault();\n  contextMenuItem.value = item;\n  contextMenuPosition.value = { x: event.clientX, y: event.clientY };\n  showContextMenu.value = true;\n};\n\n/**\n * Hide context menu\n */\nconst hideContextMenu = () => {\n  showContextMenu.value = false;\n  contextMenuItem.value = null;\n};\n\n/**\n * Handle delete item\n */\nconst handleDeleteItem = (item) => {\n  emit('delete', [item.id]);\n  hideContextMenu();\n};\n\n/**\n * Format file size\n */\nconst formatFileSize = (bytes) => {\n  if (!bytes) return __('Unknown', 'uixpress');\n\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(1024));\n  return Math.round((bytes / Math.pow(1024, i)) * 100) / 100 + ' ' + sizes[i];\n};\n\n/**\n * Format date\n */\nconst formatDate = (dateString) => {\n  return new Date(dateString).toLocaleDateString();\n};\n\n/**\n * Get file type icon\n */\nconst getFileTypeIcon = (mimeType) => {\n  if (mimeType.startsWith('image/')) return 'image';\n  if (mimeType.startsWith('video/')) return 'videocam';\n  if (mimeType.startsWith('audio/')) return 'audiotrack';\n  if (mimeType.includes('pdf')) return 'picture_as_pdf';\n  if (mimeType.includes('word')) return 'description';\n  if (mimeType.includes('excel') || mimeType.includes('spreadsheet'))\n    return 'table_chart';\n  if (mimeType.includes('zip') || mimeType.includes('archive'))\n    return 'archive';\n  return 'insert_drive_file';\n};\n\n// Close context menu when clicking outside\ndocument.addEventListener('click', hideContextMenu);\n</script>\n\n<template>\n  <div class=\"relative\">\n    <!-- Grid View -->\n    <div\n      v-if=\"viewMode === 'grid'\"\n      class=\"py-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3\"\n    >\n      <RouterLink\n        v-for=\"item in media\"\n        :key=\"item.id\"\n        :to=\"`/details/${item.id}`\"\n        @click=\"handleMediaClick(item, $event)\"\n        @contextmenu=\"showItemContextMenu($event, item)\"\n        class=\"group relative aspect-square bg-zinc-100 dark:bg-zinc-800 rounded-xl overflow-hidden cursor-pointer transition-all hover:shadow-lg\"\n        :class=\"\n          route.params.mediaId == item.id\n            ? 'ring-2 ring-zinc-900 dark:ring-zinc-100'\n            : ''\n        \"\n      >\n        <!-- Checkbox -->\n        <div\n          class=\"absolute top-2 left-2 z-10 transition-opacity duration-200 media-checkbox cursor-pointer\"\n          :class=\"\n            isSelected(item)\n              ? 'opacity-100'\n              : 'opacity-0 group-hover:opacity-100'\n          \"\n          @click.stop=\"handleCheckboxToggle(item, $event)\"\n        >\n          <AppCheckbox :isactive=\"isSelected(item)\" />\n        </div>\n\n        <!-- Thumbnail -->\n        <div\n          class=\"w-full h-full flex items-center justify-center overflow-hidden\"\n        >\n          <img\n            v-if=\"item.mime_type.startsWith('image/') && item.thumbnail\"\n            :src=\"item.thumbnail\"\n            :alt=\"item.alt || item.title\"\n            class=\"w-full h-full object-cover\"\n            :class=\"item.url.includes('.svg') ? 'invert dark:invert-0' : ''\"\n          />\n\n          <div\n            v-else\n            class=\"w-full h-full flex flex-col items-center justify-center p-4\"\n          >\n            <AppIcon\n              :icon=\"getFileTypeIcon(item.mime_type)\"\n              class=\"text-3xl text-zinc-400 dark:text-zinc-500 mb-2\"\n            />\n            <span\n              class=\"text-xs text-zinc-500 dark:text-zinc-400 text-center truncate w-full\"\n            >\n              {{ item.filename }}\n            </span>\n          </div>\n        </div>\n\n        <!-- Overlay Info -->\n        <div\n          class=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-zinc-900/80 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity\"\n        >\n          <div\n            class=\"text-white text-xs font-medium truncate mb-1\"\n            :title=\"item.title || item.filename\"\n          >\n            {{ item.title || item.filename }}\n          </div>\n          <div class=\"text-white/70 text-[10px] truncate\">\n            {{ formatFileSize(item.file_size) }}\n          </div>\n        </div>\n      </RouterLink>\n    </div>\n\n    <!-- List View -->\n    <div v-else class=\"py-2 flex flex-col gap-1\">\n      <RouterLink\n        v-for=\"item in media\"\n        :key=\"item.id\"\n        :to=\"`/details/${item.id}`\"\n        @click=\"handleMediaClick(item, $event)\"\n        @contextmenu=\"showItemContextMenu($event, item)\"\n        class=\"flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-all group -mx-3 relative\"\n        :class=\"\n          route.params.mediaId == item.id\n            ? 'bg-zinc-100 dark:bg-zinc-800/60'\n            : ''\n        \"\n      >\n        <!-- Media Thumbnail -->\n        <div class=\"flex-shrink-0 relative\">\n          <!-- Checkbox - shows on hover, positioned centered over thumbnail -->\n          <div\n            class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 transition-opacity duration-200 media-checkbox cursor-pointer\"\n            :class=\"\n              isSelected(item)\n                ? 'opacity-100'\n                : 'opacity-0 group-hover:opacity-100'\n            \"\n            @click.stop=\"handleCheckboxToggle(item, $event)\"\n          >\n            <AppCheckbox :isactive=\"isSelected(item)\" />\n          </div>\n\n          <div\n            class=\"w-10 h-10 bg-zinc-200 dark:bg-zinc-700 rounded-lg overflow-hidden\"\n          >\n            <img\n              v-if=\"item.mime_type.startsWith('image/') && item.thumbnail\"\n              :src=\"item.thumbnail\"\n              :alt=\"item.alt || item.title\"\n              class=\"w-full h-full object-cover\"\n              :class=\"item.url.includes('.svg') ? 'invert dark:invert-0' : ''\"\n            />\n            <div v-else class=\"w-full h-full flex items-center justify-center\">\n              <AppIcon\n                :icon=\"getFileTypeIcon(item.mime_type)\"\n                class=\"text-zinc-500 dark:text-zinc-400\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- Media Info -->\n        <div class=\"flex-1 min-w-0\">\n          <div class=\"flex items-center gap-2 mb-0.5\">\n            <span\n              class=\"font-medium text-sm text-zinc-900 dark:text-zinc-200 truncate\"\n              :title=\"item.title || item.filename\"\n              :class=\"\n                route.params.mediaId == item.id\n                  ? 'text-zinc-900 dark:text-white'\n                  : 'text-zinc-600 dark:text-zinc-400'\n              \"\n            >\n              {{ item.title || item.filename }}\n            </span>\n          </div>\n          <div class=\"text-xs text-zinc-500 dark:text-zinc-400 truncate\">\n            {{ formatFileSize(item.file_size) }} •\n            {{ formatDate(item.date_created) }} •\n            {{ item.author }}\n          </div>\n        </div>\n      </RouterLink>\n    </div>\n\n    <!-- Context Menu -->\n    <div\n      v-if=\"showContextMenu && contextMenuItem\"\n      :style=\"{\n        left: contextMenuPosition.x + 'px',\n        top: contextMenuPosition.y + 'px',\n      }\"\n      class=\"fixed z-50 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg py-1 min-w-32\"\n      @click.stop\n    >\n      <button\n        @click=\"handleDeleteItem(contextMenuItem)\"\n        class=\"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2\"\n      >\n        <AppIcon icon=\"delete\" class=\"text-sm\" />\n        {{ __('Delete', 'uixpress') }}\n      </button>\n    </div>\n  </div>\n</template>\n","<script setup>\nimport {\n  ref,\n  watch,\n  nextTick,\n  computed,\n  watchEffect,\n  onMounted,\n  onUnmounted,\n} from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ShadowRoot } from 'vue-shadow-dom';\n\n// Store\nimport { useAppStore } from '@/store/app/app.js';\nconst appStore = useAppStore();\n\n// Funcs\nimport { lmnFetch } from '@/assets/js/functions/lmnFetch.js';\nimport { notify } from '@/assets/js/functions/notify.js';\nimport { useDarkMode } from './useDarkMode.js';\nimport Drawer from '@/components/utility/drawer/index.vue';\nconst { isDark } = useDarkMode();\n\n// Comps\nimport AppIcon from '@/components/utility/icons/index.vue';\nimport AppButton from '@/components/utility/app-button/index.vue';\nimport MediaList from './media-list.vue';\nimport Confirm from '@/components/utility/confirm/index.vue';\nimport Select from '@/components/utility/select/index.vue';\nimport AppInput from '@/components/utility/text-input/index.vue';\nimport AppTextArea from '@/components/utility/text-area/index.vue';\n\nconst router = useRouter();\nconst route = useRoute();\n\n// Refs\nconst adoptedStyleSheets = ref(new CSSStyleSheet());\nconst loading = ref(false);\nconst mediaItems = ref([]);\nconst filteredMedia = ref([]);\nconst sortBy = ref('date'); // 'date', 'name', 'size', 'type'\nconst sortOrder = ref('desc'); // 'asc' or 'desc'\nconst searchQuery = ref('');\nconst selectedType = ref('all'); // 'all', 'image', 'video', 'audio', 'document'\nconst showUnusedOnly = ref(false);\nconst dateFilter = ref('all'); // 'all', 'today', 'week', 'month', 'year'\nconst filtersExpanded = ref(false);\nconst selectedTags = ref([]); // Array of tag IDs\nconst allTags = ref([]);\nconst showTagFilter = ref(false);\nconst uploadDialog = ref(false);\nconst uploadInput = ref(null);\nconst isUploading = ref(false);\nconst dragOver = ref(false);\nconst dragCounter = ref(0);\nconst uploadProgress = ref({\n  current: 0,\n  total: 0,\n  percentage: 0,\n  currentFileName: '',\n});\nconst windowWidth = ref(typeof window !== 'undefined' ? window.innerWidth : 0);\nconst drawerOpen = ref(false);\nconst selectedMedia = ref([]); // Array of selected media IDs\nconst lastSelectedIndex = ref(null); // Index of last selected media item for range selection\nconst isDuplicating = ref(false); // Loading state for batch duplicate\nconst confirmDialog = ref(null); // Ref for confirm component\nconst viewMode = ref('list'); // 'list' or 'grid'\nconst bulkEditDrawerOpen = ref(false); // Bulk edit drawer state\nconst isDownloading = ref(false); // Bulk download loading state\nconst isBulkEditing = ref(false); // Bulk edit saving state\nconst bulkEditForm = ref({\n  title: '',\n  alt_text: '',\n  caption: '',\n  description: '',\n});\nconst pagination = ref({\n  page: 1,\n  per_page: 30,\n  total: 0,\n  totalPages: 0,\n  search: '',\n  order: 'desc',\n  orderby: 'date',\n});\n\n// Computed property for window width\nconst windowWidthComputed = computed(() => windowWidth.value);\n\n// Pagination helpers\nconst canGoPrev = computed(() => pagination.value.page > 1);\nconst canGoNext = computed(\n  () =>\n    pagination.value.totalPages > 0 &&\n    pagination.value.page < pagination.value.totalPages\n);\n\nconst goPrevPage = async () => {\n  if (!canGoPrev.value) return;\n  pagination.value.page -= 1;\n  await getMediaData();\n};\n\nconst goNextPage = async () => {\n  if (!canGoNext.value) return;\n  pagination.value.page += 1;\n  await getMediaData();\n};\n\n// Active filter count\nconst activeFiltersCount = computed(() => {\n  let count = 0;\n  if (selectedType.value !== 'all') count++;\n  if (showUnusedOnly.value) count++;\n  if (dateFilter.value !== 'all') count++;\n  if (selectedTags.value.length > 0) count++;\n  return count;\n});\n\n/**\n * Fetches media data from WordPress REST API\n */\nconst getMediaData = async () => {\n  loading.value = true;\n  appStore.updateState('loading', true);\n\n  const args = {\n    endpoint: 'wp/v2/media',\n    params: {\n      page: pagination.value.page,\n      per_page: pagination.value.per_page,\n      search: pagination.value.search,\n      order: pagination.value.order,\n      orderby: pagination.value.orderby,\n      context: 'edit',\n      unused: showUnusedOnly.value,\n      unused_mode: 'deep',\n    },\n  };\n\n  // Add tag filtering if tags are selected\n  // WordPress REST API expects array parameters as multiple query params: tag_ids[]=1&tag_ids[]=2\n  if (selectedTags.value.length > 0) {\n    args.params.tag_ids = selectedTags.value;\n  }\n\n  const data = await lmnFetch(args);\n\n  loading.value = false;\n  appStore.updateState('loading', false);\n\n  if (!data) return;\n\n  // Transform the data to match our expected format\n  mediaItems.value = data.data.map((item) => ({\n    id: item.id,\n    title: item.title?.rendered || item.slug,\n    filename: item.media_details?.file || item.slug,\n    url: item.source_url,\n    alt: item.alt_text || '',\n    mime_type: item.mime_type,\n    file_size: item.media_details?.filesize || 0,\n    width: item.media_details?.width || null,\n    height: item.media_details?.height || null,\n    date_created: item.date,\n    date_modified: item.modified,\n    author: item.author_name || '',\n    thumbnail:\n      item.media_details?.sizes?.thumbnail?.source_url || item.source_url,\n    medium: item.media_details?.sizes?.medium?.source_url || item.source_url,\n    large: item.media_details?.sizes?.large?.source_url || item.source_url,\n    full: item.source_url,\n  }));\n\n  pagination.value.total = data.totalItems;\n  pagination.value.totalPages = data.totalPages;\n\n  applyFilters();\n};\n\n/**\n * Handle media item selection - navigate to details\n */\nconst selectMediaItem = (item) => {\n  router.push({ name: 'media-details', params: { mediaId: item.id } });\n};\n\n/**\n * Handle media checkbox selection\n */\nconst toggleMediaSelection = (item, event) => {\n  const currentIndex = filteredMedia.value.findIndex(\n    (media) => media.id === item.id\n  );\n\n  // Handle shift+click for range selection\n  if (event?.shiftKey && lastSelectedIndex.value !== null) {\n    const start = Math.min(lastSelectedIndex.value, currentIndex);\n    const end = Math.max(lastSelectedIndex.value, currentIndex);\n\n    // Get all items in the range\n    const rangeItems = filteredMedia.value.slice(start, end + 1);\n    const rangeIds = rangeItems.map((media) => media.id);\n\n    // Add all items in range to selection (avoid duplicates)\n    rangeIds.forEach((id) => {\n      if (!selectedMedia.value.includes(id)) {\n        selectedMedia.value.push(id);\n      }\n    });\n\n    // Update last selected index\n    lastSelectedIndex.value = currentIndex;\n  } else {\n    // Normal toggle behavior\n    const index = selectedMedia.value.findIndex((id) => id === item.id);\n    if (index > -1) {\n      selectedMedia.value.splice(index, 1);\n    } else {\n      selectedMedia.value.push(item.id);\n    }\n\n    // Update last selected index\n    lastSelectedIndex.value = currentIndex;\n  }\n};\n\n/**\n * Check if media item is selected\n */\nconst isMediaSelected = (item) => {\n  return selectedMedia.value.includes(item.id);\n};\n\n/**\n * Computed property to check if there are selected items\n */\nconst hasSelection = computed(() => {\n  return selectedMedia.value.length > 0;\n});\n\n/**\n * Get selected count text\n */\nconst selectedCountText = computed(() => {\n  const count = selectedMedia.value.length;\n  return count === 1\n    ? __('1 item selected', 'uixpress')\n    : __('%d items selected', 'uixpress').replace('%d', count);\n});\n\n/**\n * View first selected media item\n */\nconst viewSelectedMedia = () => {\n  if (selectedMedia.value.length === 0) return;\n  const firstSelectedId = selectedMedia.value[0];\n  router.push({ name: 'media-details', params: { mediaId: firstSelectedId } });\n};\n\n/**\n * Get file extension from filename or URL\n */\nconst getFileExtension = (filename, sourceUrl) => {\n  // Try filename first (most reliable)\n  if (filename && filename.includes('.')) {\n    const ext = filename.split('.').pop().toLowerCase();\n    // Remove query parameters if any\n    return ext.split('?')[0].split('#')[0];\n  }\n\n  // Fallback to source URL\n  if (sourceUrl) {\n    try {\n      const url = new URL(sourceUrl);\n      const pathname = url.pathname;\n      const ext = pathname.split('.').pop().toLowerCase();\n      return ext.split('?')[0].split('#')[0];\n    } catch (e) {\n      // If URL parsing fails, try simple split\n      const ext = sourceUrl.split('.').pop().toLowerCase();\n      return ext.split('?')[0].split('#')[0];\n    }\n  }\n\n  return '';\n};\n\n/**\n * Batch duplicate selected media items\n */\nconst batchDuplicateMedia = async () => {\n  if (selectedMedia.value.length === 0) return;\n\n  isDuplicating.value = true;\n\n  try {\n    for (const mediaId of selectedMedia.value) {\n      // Fetch full media item data with edit context to get accurate info\n      const fullMediaResponse = await lmnFetch({\n        endpoint: `wp/v2/media/${mediaId}`,\n        params: { context: 'edit' },\n        type: 'GET',\n      });\n\n      if (!fullMediaResponse || !fullMediaResponse.data) {\n        console.warn('Failed to fetch media item data:', mediaId);\n        continue;\n      }\n\n      const mediaItem = fullMediaResponse.data;\n\n      // Get MIME type from media item (WordPress validated this)\n      const mimeType = mediaItem.mime_type;\n      if (!mimeType) {\n        console.warn('No MIME type found for media item:', mediaId);\n        continue;\n      }\n\n      // Get source URL - use the original source_url\n      const sourceUrl =\n        mediaItem.source_url ||\n        mediaItem.media_details?.sizes?.full?.source_url;\n      if (!sourceUrl) {\n        console.warn('No source URL found for media item:', mediaId);\n        continue;\n      }\n\n      // Get file extension properly from filename or source URL\n      const fileExtension = getFileExtension(\n        mediaItem.media_details?.file || mediaItem.source_url,\n        sourceUrl\n      );\n      if (!fileExtension) {\n        console.warn('No file extension found for media item:', mediaId);\n        continue;\n      }\n\n      // Get base filename - use media_details filename if available, otherwise extract from source_url\n      let baseFileName = 'file';\n      if (mediaItem.media_details?.file) {\n        // Extract filename without path\n        const filePath = mediaItem.media_details.file;\n        baseFileName = filePath\n          .split('/')\n          .pop()\n          .replace(/\\.[^/.]+$/, '');\n      } else if (mediaItem.source_url) {\n        try {\n          const url = new URL(mediaItem.source_url);\n          const pathname = url.pathname;\n          baseFileName = pathname\n            .split('/')\n            .pop()\n            .replace(/\\.[^/.]+$/, '');\n        } catch (e) {\n          baseFileName = (\n            mediaItem.title?.rendered ||\n            mediaItem.title ||\n            'file'\n          ).replace(/\\.[^/.]+$/, '');\n        }\n      } else {\n        baseFileName = (\n          mediaItem.title?.rendered ||\n          mediaItem.title ||\n          'file'\n        ).replace(/\\.[^/.]+$/, '');\n      }\n\n      const fileName = `${baseFileName} (copy).${fileExtension}`;\n\n      // Fetch media file and create blob\n      const mediaResponse = await fetch(sourceUrl);\n      if (!mediaResponse.ok) {\n        console.error('Failed to fetch media file:', sourceUrl);\n        continue;\n      }\n\n      const mediaBlob = await mediaResponse.blob();\n\n      // Create a File object with correct MIME type\n      // WordPress validates that the MIME type matches the file extension\n      const fileObject = new File([mediaBlob], fileName, { type: mimeType });\n\n      const formData = new FormData();\n      formData.append('file', fileObject);\n      formData.append(\n        'title',\n        `${mediaItem.title?.rendered || mediaItem.title || baseFileName} (copy)`\n      );\n      if (mediaItem.alt_text) formData.append('alt_text', mediaItem.alt_text);\n      if (mediaItem.caption?.rendered)\n        formData.append('caption', mediaItem.caption.rendered);\n      if (mediaItem.description?.rendered)\n        formData.append('description', mediaItem.description.rendered);\n\n      const args = {\n        endpoint: `wp/v2/media`,\n        params: {},\n        type: 'POST',\n        data: formData,\n        isFormData: true,\n      };\n\n      const response = await lmnFetch(args);\n      if (!response) {\n        console.error('Failed to duplicate media item:', mediaId);\n      }\n    }\n\n    // Refresh media list\n    await getMediaData();\n\n    // Clear selection\n    selectedMedia.value = [];\n    lastSelectedIndex.value = null;\n\n    notify({\n      title: __('Files duplicated', 'uixpress'),\n      type: 'success',\n    });\n  } catch (error) {\n    console.error('Error duplicating media:', error);\n    notify({\n      title: __('Error duplicating files', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    isDuplicating.value = false;\n  }\n};\n\n/**\n * Clear selection\n */\nconst clearSelection = () => {\n  selectedMedia.value = [];\n  lastSelectedIndex.value = null;\n};\n\n/**\n * Open bulk edit drawer\n */\nconst openBulkEdit = () => {\n  bulkEditForm.value = {\n    title: '',\n    alt_text: '',\n    caption: '',\n    description: '',\n  };\n  bulkEditDrawerOpen.value = true;\n};\n\n/**\n * Save bulk edit changes\n */\nconst saveBulkEdit = async () => {\n  if (selectedMedia.value.length === 0) return;\n\n  isBulkEditing.value = true;\n\n  try {\n    const updatePromises = selectedMedia.value.map(async (mediaId) => {\n      const updateData = {};\n\n      // Only include fields that have been changed\n      if (bulkEditForm.value.title.trim()) {\n        updateData.title = bulkEditForm.value.title.trim();\n      }\n      if (bulkEditForm.value.alt_text.trim()) {\n        updateData.alt_text = bulkEditForm.value.alt_text.trim();\n      }\n      if (bulkEditForm.value.caption.trim()) {\n        updateData.caption = bulkEditForm.value.caption.trim();\n      }\n      if (bulkEditForm.value.description.trim()) {\n        updateData.description = bulkEditForm.value.description.trim();\n      }\n\n      // Skip if no changes\n      if (Object.keys(updateData).length === 0) return;\n\n      await lmnFetch({\n        endpoint: `wp/v2/media/${mediaId}`,\n        type: 'POST',\n        data: updateData,\n      });\n    });\n\n    await Promise.all(updatePromises);\n\n    // Refresh media list\n    await getMediaData();\n\n    // Close drawer and clear selection\n    bulkEditDrawerOpen.value = false;\n    selectedMedia.value = [];\n    lastSelectedIndex.value = null;\n\n    notify({\n      title: __('Media updated successfully', 'uixpress'),\n      type: 'success',\n    });\n  } catch (error) {\n    console.error('Bulk edit error:', error);\n    notify({\n      title: __('Error updating media', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    isBulkEditing.value = false;\n  }\n};\n\n/**\n * Bulk download selected media items\n */\nconst bulkDownload = async () => {\n  if (selectedMedia.value.length === 0) return;\n\n  isDownloading.value = true;\n\n  try {\n    // Create a backend endpoint to handle ZIP creation\n    // For now, we'll download files individually and create ZIP client-side\n    // Note: For large files, a backend endpoint would be better\n\n    // Check if JSZip is available (we'll need to add it or use backend)\n    // For now, let's create a simple backend endpoint approach\n\n    const response = await lmnFetch({\n      endpoint: 'uixpress/v1/media/bulk-download',\n      type: 'POST',\n      data: {\n        media_ids: selectedMedia.value,\n      },\n    });\n\n    if (response?.data?.download_url) {\n      // Backend created ZIP, download it\n      const link = document.createElement('a');\n      link.href = response.data.download_url;\n      link.download = `media-${Date.now()}.zip`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      notify({\n        title: __('Download started', 'uixpress'),\n        type: 'success',\n      });\n    } else {\n      // Fallback: download files individually\n      for (const mediaId of selectedMedia.value) {\n        const mediaItem = filteredMedia.value.find(\n          (item) => item.id === mediaId\n        );\n        if (mediaItem?.source_url) {\n          const link = document.createElement('a');\n          link.href = mediaItem.source_url;\n          link.download = mediaItem.filename || `media-${mediaId}`;\n          link.target = '_blank';\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n        }\n      }\n\n      notify({\n        title: __('Files downloaded', 'uixpress'),\n        type: 'success',\n      });\n    }\n  } catch (error) {\n    console.error('Bulk download error:', error);\n    notify({\n      title: __('Error downloading files', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    isDownloading.value = false;\n  }\n};\n\n/**\n * Handle batch delete with confirmation\n */\nconst handleBatchDelete = async () => {\n  if (selectedMedia.value.length === 0) return;\n\n  const count = selectedMedia.value.length;\n  const countText =\n    count === 1\n      ? __('this file', 'uixpress')\n      : __('these %d files', 'uixpress').replace('%d', count);\n\n  // Confirm user intent\n  const userResponse = await confirmDialog.value.show({\n    title: __('Are you sure?', 'uixpress'),\n    message: __(\n      'Are you sure you want to delete %s? This action cannot be undone.',\n      'uixpress'\n    ).replace('%s', countText),\n    okButton: __('Yes, delete', 'uixpress'),\n  });\n\n  // User cancelled\n  if (!userResponse) return;\n\n  // Proceed with deletion\n  await handleDelete(selectedMedia.value);\n};\n\n/**\n * Handle media deletion\n */\nconst handleDelete = async (mediaIds) => {\n  loading.value = true;\n\n  try {\n    const deletePromises = mediaIds.map((id) =>\n      lmnFetch({\n        endpoint: `wp/v2/media/${id}`,\n        type: 'DELETE',\n        params: {\n          force: true,\n        },\n      })\n    );\n\n    await Promise.all(deletePromises);\n\n    // Clear selection after deletion\n    selectedMedia.value = [];\n    lastSelectedIndex.value = null;\n\n    notify({\n      title: __('Media deleted successfully!', 'uixpress'),\n      type: 'success',\n    });\n\n    // Refresh media data from API\n    await getMediaData();\n  } catch (error) {\n    notify({\n      title: __('Delete failed', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    loading.value = false;\n  }\n};\n\n/**\n * Injects styles into shadow root\n */\nconst setStyles = () => {\n  let appStyleNode = document.querySelector('#uixpress-media-css');\n  if (!appStyleNode) {\n    appStyleNode = manuallyAddStyleSheet();\n    appStyleNode.onload = () => {\n      const appStyles = appStyleNode.sheet;\n      for (const rule of [...appStyles.cssRules].reverse()) {\n        adoptedStyleSheets.value.insertRule(rule.cssText);\n      }\n    };\n  } else {\n    const appStyles = appStyleNode.sheet;\n    for (const rule of [...appStyles.cssRules].reverse()) {\n      adoptedStyleSheets.value.insertRule(rule.cssText);\n    }\n  }\n};\n\nconst manuallyAddStyleSheet = () => {\n  var link = document.createElement('link');\n  link.rel = 'stylesheet';\n  link.href = `${appStore.state.pluginBase}app/dist/assets/styles/media.css`;\n  document.head.appendChild(link);\n  return link;\n};\n\n/**\n * Apply filters and sorting to media items\n */\nconst applyFilters = () => {\n  let filtered = [...mediaItems.value];\n\n  // Filter by type\n  if (selectedType.value !== 'all') {\n    filtered = filtered.filter((item) => {\n      if (selectedType.value === 'image')\n        return item.mime_type.startsWith('image/');\n      if (selectedType.value === 'video')\n        return item.mime_type.startsWith('video/');\n      if (selectedType.value === 'audio')\n        return item.mime_type.startsWith('audio/');\n      if (selectedType.value === 'document')\n        return (\n          !item.mime_type.startsWith('image/') &&\n          !item.mime_type.startsWith('video/') &&\n          !item.mime_type.startsWith('audio/')\n        );\n      return true;\n    });\n  }\n\n  // Filter by date\n  if (dateFilter.value !== 'all') {\n    const now = new Date();\n    const itemDate = (item) => new Date(item.date_created);\n\n    filtered = filtered.filter((item) => {\n      const date = itemDate(item);\n      const daysDiff = Math.floor((now - date) / (1000 * 60 * 60 * 24));\n\n      switch (dateFilter.value) {\n        case 'today':\n          return daysDiff === 0;\n        case 'week':\n          return daysDiff <= 7;\n        case 'month':\n          return daysDiff <= 30;\n        case 'year':\n          return daysDiff <= 365;\n        default:\n          return true;\n      }\n    });\n  }\n\n  // Filter by unused (placeholder - would need actual usage data from WP)\n  if (showUnusedOnly.value) {\n    // This would need backend support to check if media is used in posts/pages\n    // For now, just a placeholder\n    filtered = filtered.filter((item) => {\n      // Placeholder logic - in reality, check item.post_count or similar\n      return true;\n    });\n  }\n\n  // Filter by search query\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    filtered = filtered.filter(\n      (item) =>\n        item.title.toLowerCase().includes(query) ||\n        item.filename.toLowerCase().includes(query) ||\n        item.alt.toLowerCase().includes(query)\n    );\n  }\n\n  // Sort items\n  filtered.sort((a, b) => {\n    let aValue, bValue;\n\n    switch (sortBy.value) {\n      case 'name':\n        aValue = a.title || a.filename;\n        bValue = b.title || b.filename;\n        break;\n      case 'size':\n        aValue = a.file_size || 0;\n        bValue = b.file_size || 0;\n        break;\n      case 'type':\n        aValue = a.mime_type;\n        bValue = b.mime_type;\n        break;\n      case 'date':\n      default:\n        aValue = new Date(a.date_created);\n        bValue = new Date(b.date_created);\n        break;\n    }\n\n    if (sortOrder.value === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n\n  filteredMedia.value = filtered;\n};\n\n/**\n * Fetch all available tags\n */\nconst fetchAllTags = async () => {\n  try {\n    const data = await lmnFetch({\n      endpoint: 'uixpress/v1/media/tags',\n    });\n\n    if (data?.data) {\n      allTags.value = data.data;\n    }\n  } catch (error) {\n    console.error('Failed to fetch tags:', error);\n  }\n};\n\n/**\n * Toggle tag selection\n */\nconst toggleTag = (tagId) => {\n  const index = selectedTags.value.indexOf(tagId);\n  if (index > -1) {\n    selectedTags.value.splice(index, 1);\n  } else {\n    selectedTags.value.push(tagId);\n  }\n};\n\n/**\n * Check if tag is selected\n */\nconst isTagSelected = (tagId) => {\n  return selectedTags.value.includes(tagId);\n};\n\n/**\n * Clear all filters\n */\nconst clearFilters = () => {\n  selectedType.value = 'all';\n  showUnusedOnly.value = false;\n  dateFilter.value = 'all';\n  searchQuery.value = '';\n  selectedTags.value = [];\n};\n\n/**\n * Handle media upload\n */\nconst handleUpload = async (files) => {\n  if (!files || files.length === 0) return;\n  loading.value = true;\n  isUploading.value = true;\n\n  // Initialize progress\n  uploadProgress.value = {\n    current: 0,\n    total: files.length,\n    percentage: 0,\n    currentFileName: files[0]?.name || '',\n  };\n\n  try {\n    // Upload sequentially to keep server load reasonable\n    let successCount = 0;\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n\n      // Update progress before upload\n      uploadProgress.value.current = i;\n      uploadProgress.value.currentFileName = file.name;\n      uploadProgress.value.percentage = Math.round((i / files.length) * 100);\n\n      const formData = new FormData();\n      formData.append('file', file, file.name);\n      \n      try {\n        // Use lmnFetch to support remote sites\n        const response = await lmnFetch({\n          endpoint: 'wp/v2/media',\n          type: 'POST',\n          data: formData,\n          isFormData: true,\n        });\n\n        if (response && response.data) {\n          successCount += 1;\n\n          // Update progress after successful upload\n          uploadProgress.value.current = i + 1;\n          uploadProgress.value.percentage = Math.round(\n            ((i + 1) / files.length) * 100\n          );\n        } else {\n          throw new Error('Upload failed - no response data');\n        }\n      } catch (e) {\n        console.error('Upload error:', e);\n        notify({\n          title: __('Upload failed', 'uixpress'),\n          message: `${file.name}: ${e.message || e}`,\n          type: 'error',\n        });\n        // Still update progress even on error\n        uploadProgress.value.current = i + 1;\n        uploadProgress.value.percentage = Math.round(\n          ((i + 1) / files.length) * 100\n        );\n      }\n    }\n\n    // Set to 100% on completion\n    uploadProgress.value.percentage = 100;\n    uploadProgress.value.current = files.length;\n\n    if (successCount > 0) {\n      notify({\n        title: __('Files uploaded successfully!', 'uixpress'),\n        message: sprintf(__('%d file(s) uploaded', 'uixpress'), successCount),\n        type: 'success',\n      });\n      await getMediaData();\n    }\n  } catch (error) {\n    notify({\n      title: __('Upload failed', 'uixpress'),\n      type: 'error',\n    });\n  } finally {\n    loading.value = false;\n    isUploading.value = false;\n    uploadDialog.value = false;\n\n    // Delay hiding progress to show completion\n    setTimeout(() => {\n      uploadProgress.value = {\n        current: 0,\n        total: 0,\n        percentage: 0,\n        currentFileName: '',\n      };\n    }, 500);\n  }\n};\n\n/**\n * Trigger native file picker and handle selection\n */\nconst openUploadDialog = () => {\n  if (uploadInput.value) {\n    uploadInput.value.click();\n  }\n};\n\nconst onUploadChange = async (event) => {\n  const files = Array.from(event.target.files || []);\n  if (files.length > 0) {\n    await handleUpload(files);\n  }\n  // reset input so the same file can be picked twice\n  event.target.value = '';\n};\n\n/**\n * Handle drag over event\n */\nconst handleDragOver = (event) => {\n  // Only handle file drags\n  if (!event.dataTransfer.types.includes('Files')) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  dragCounter.value++;\n  if (!dragOver.value) {\n    dragOver.value = true;\n  }\n};\n\n/**\n * Handle drag enter event (for document level)\n */\nconst handleDragEnter = (event) => {\n  // Only handle file drags\n  if (!event.dataTransfer.types.includes('Files')) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n};\n\n/**\n * Handle drag leave event\n */\nconst handleDragLeave = (event) => {\n  // Only handle file drags\n  if (!event.dataTransfer.types.includes('Files')) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  dragCounter.value--;\n  if (dragCounter.value === 0) {\n    dragOver.value = false;\n  }\n};\n\n/**\n * Handle drop event\n */\nconst handleDrop = async (event) => {\n  // Only handle file drops\n  if (!event.dataTransfer.types.includes('Files')) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  dragOver.value = false;\n  dragCounter.value = 0;\n\n  const files = Array.from(event.dataTransfer.files || []);\n  if (files.length > 0) {\n    await handleUpload(files);\n  }\n};\n\n// Watchers\nwatch(\n  [searchQuery, selectedType, sortBy, sortOrder, showUnusedOnly, dateFilter],\n  () => {\n    pagination.value.search = searchQuery.value;\n    pagination.value.orderby = sortBy.value;\n    pagination.value.order = sortOrder.value;\n    pagination.value.page = 1; // Reset to first page when filters change\n    getMediaData();\n  }\n);\n\n// Watch selectedTags separately with deep watching to catch array mutations\nwatch(\n  selectedTags,\n  () => {\n    pagination.value.page = 1; // Reset to first page when tags change\n    getMediaData();\n  },\n  { deep: true }\n);\n\n// Watch per_page changes\nwatch(\n  () => pagination.value.per_page,\n  () => {\n    pagination.value.page = 1; // Reset to first page when per_page changes\n    getMediaData();\n  }\n);\n\nonMounted(() => {\n  getMediaData();\n  setStyles();\n  fetchAllTags();\n\n  // Initialize window width\n  windowWidth.value = window.innerWidth;\n\n  // Add resize listener\n  window.addEventListener('resize', handleResize);\n\n  // Prevent default drag behaviors on document for file drags only\n  const preventFileDragDefaults = (e) => {\n    // Only prevent defaults for file drags\n    if (e.dataTransfer && e.dataTransfer.types.includes('Files')) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  // Prevent default drag behaviors for files\n  ['dragenter', 'dragover'].forEach((eventName) => {\n    document.addEventListener(eventName, preventFileDragDefaults, false);\n  });\n});\n\nonUnmounted(() => {\n  // Remove resize listener\n  window.removeEventListener('resize', handleResize);\n});\n\n/**\n * Handle window resize\n */\nconst handleResize = () => {\n  windowWidth.value = window.innerWidth;\n};\n\nwatch(\n  () => route.params.mediaId,\n  (newVal) => {\n    if (newVal) {\n      drawerOpen.value = true;\n    } else {\n      drawerOpen.value = false;\n    }\n  },\n  { immediate: true, deep: true }\n);\n</script>\n\n<template>\n  <div\n    class=\"flex h-full text-zinc-900 dark:text-zinc-100 font-sans max-h-full overflow-hidden gap-6 max-md:gap-0 uipx-normalize\"\n    :class=\"isDark ? 'dark' : ''\"\n  >\n    <!-- Media List Sidebar -->\n    <div\n      class=\"md:w-96 w-full flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-hidden\"\n    >\n      <!-- Header -->\n      <div class=\"px-6 pt-6 pb-4\">\n        <div class=\"flex items-center justify-between mb-4\">\n          <h1 class=\"text-xl font-medium text-zinc-900 dark:text-zinc-100\">\n            {{ __('Media Library', 'uixpress') }}\n          </h1>\n          <AppButton\n            type=\"primary\"\n            @click=\"openUploadDialog\"\n            :disabled=\"isUploading\"\n            :loading=\"isUploading\"\n            class=\"text-sm\"\n          >\n            <AppIcon icon=\"add\" class=\"text-base\" />\n          </AppButton>\n        </div>\n\n        <!-- Upload Progress Indicator -->\n        <Transition\n          enter-active-class=\"transition-all duration-300 ease-out\"\n          enter-from-class=\"opacity-0 -translate-y-2 max-h-0\"\n          enter-to-class=\"opacity-100 translate-y-0 max-h-20\"\n          leave-active-class=\"transition-all duration-300 ease-in\"\n          leave-from-class=\"opacity-100 translate-y-0 max-h-20\"\n          leave-to-class=\"opacity-0 -translate-y-2 max-h-0\"\n        >\n          <div\n            v-if=\"isUploading && uploadProgress.total > 0\"\n            class=\"mt-3 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-lg border border-zinc-200 dark:border-zinc-800 mb-3\"\n          >\n            <div class=\"flex items-center justify-between mb-2\">\n              <div class=\"flex items-center gap-2 min-w-0 flex-1\">\n                <AppIcon\n                  icon=\"cloud_upload\"\n                  class=\"text-sm text-zinc-500 dark:text-zinc-400 flex-shrink-0\"\n                />\n                <span\n                  class=\"text-xs font-medium text-zinc-700 dark:text-zinc-300 truncate\"\n                >\n                  {{ uploadProgress.currentFileName }}\n                </span>\n              </div>\n              <span\n                class=\"text-xs text-zinc-500 dark:text-zinc-400 flex-shrink-0 ml-2\"\n              >\n                {{ uploadProgress.current }} / {{ uploadProgress.total }}\n              </span>\n            </div>\n            <!-- Progress Bar -->\n            <div\n              class=\"w-full bg-zinc-200 dark:bg-zinc-800 rounded-full h-1.5 overflow-hidden\"\n            >\n              <div\n                class=\"h-full bg-zinc-900 dark:bg-zinc-100 rounded-full transition-all duration-300 ease-out\"\n                :style=\"{ width: `${uploadProgress.percentage}%` }\"\n              ></div>\n            </div>\n          </div>\n        </Transition>\n\n        <!-- Search Bar -->\n        <div class=\"relative\">\n          <AppIcon\n            icon=\"search\"\n            class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 dark:text-zinc-500 text-base pointer-events-none\"\n          />\n          <input\n            v-model=\"searchQuery\"\n            type=\"text\"\n            :placeholder=\"__('Search media...', 'uixpress')\"\n            class=\"w-full bg-zinc-50 dark:bg-zinc-900 border-0 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-100 transition-shadow\"\n          />\n        </div>\n      </div>\n\n      <!-- Compact Filter Bar -->\n      <div class=\"px-6 py-3\">\n        <div class=\"flex items-center gap-2\">\n          <!-- Type Filter Pills -->\n          <div\n            class=\"flex-1 flex items-center gap-1.5 overflow-x-auto hide-scrollbar\"\n          >\n            <button\n              @click=\"selectedType = 'all'\"\n              :class=\"[\n                'px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors',\n                selectedType === 'all'\n                  ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                  : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n            >\n              {{ __('All', 'uixpress') }}\n            </button>\n            <button\n              @click=\"selectedType = 'image'\"\n              :class=\"[\n                'px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors',\n                selectedType === 'image'\n                  ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                  : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n            >\n              {{ __('Images', 'uixpress') }}\n            </button>\n            <button\n              @click=\"selectedType = 'video'\"\n              :class=\"[\n                'px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors',\n                selectedType === 'video'\n                  ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                  : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n            >\n              {{ __('Videos', 'uixpress') }}\n            </button>\n            <button\n              @click=\"selectedType = 'document'\"\n              :class=\"[\n                'px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors',\n                selectedType === 'document'\n                  ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                  : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n            >\n              {{ __('Docs', 'uixpress') }}\n            </button>\n          </div>\n\n          <!-- Sort & Filter Button -->\n          <div class=\"flex items-center gap-1.5\">\n            <button\n              @click=\"sortOrder = sortOrder === 'asc' ? 'desc' : 'asc'\"\n              class=\"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors\"\n              :title=\"sortOrder === 'asc' ? 'Ascending' : 'Descending'\"\n            >\n              <AppIcon\n                :icon=\"sortOrder === 'asc' ? 'arrow_upward' : 'arrow_downward'\"\n                class=\"text-sm text-zinc-600 dark:text-zinc-400\"\n              />\n            </button>\n\n            <!-- View Mode Toggle -->\n            <button\n              @click=\"viewMode = viewMode === 'list' ? 'grid' : 'list'\"\n              :class=\"[\n                'p-2 rounded-md transition-colors',\n                'bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n              :title=\"\n                viewMode === 'list'\n                  ? __('Grid View', 'uixpress')\n                  : __('List View', 'uixpress')\n              \"\n            >\n              <AppIcon\n                :icon=\"viewMode === 'list' ? 'grid_view' : 'view_list'\"\n                class=\"text-sm text-zinc-600 dark:text-zinc-400\"\n              />\n            </button>\n\n            <button\n              @click=\"filtersExpanded = !filtersExpanded\"\n              :class=\"[\n                'relative p-2 rounded-md transition-colors',\n                activeFiltersCount > 0 || filtersExpanded\n                  ? 'bg-zinc-900 dark:bg-zinc-100'\n                  : 'bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n              ]\"\n            >\n              <AppIcon\n                icon=\"tune\"\n                :class=\"[\n                  'text-sm',\n                  activeFiltersCount > 0 || filtersExpanded\n                    ? 'text-white dark:text-zinc-900'\n                    : 'text-zinc-600 dark:text-zinc-400',\n                ]\"\n              />\n              <span\n                v-if=\"activeFiltersCount > 0\"\n                class=\"absolute -top-1 -right-1 w-4 h-4 bg-indigo-500 text-white text-[10px] font-semibold rounded-full flex items-center justify-center\"\n              >\n                {{ activeFiltersCount }}\n              </span>\n            </button>\n          </div>\n        </div>\n\n        <!-- Expanded Filters Panel -->\n        <transition\n          enter-active-class=\"transition-all duration-200 ease-out\"\n          enter-from-class=\"opacity-0 max-h-0\"\n          enter-to-class=\"opacity-100 max-h-96\"\n          leave-active-class=\"transition-all duration-150 ease-in\"\n          leave-from-class=\"opacity-100 max-h-96\"\n          leave-to-class=\"opacity-0 max-h-0\"\n        >\n          <div v-if=\"filtersExpanded\" class=\"mt-3 pt-3 space-y-3\">\n            <!-- Sort By -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Sort By', 'uixpress') }}\n              </label>\n              <div class=\"grid grid-cols-2 gap-1.5\">\n                <button\n                  v-for=\"option in [\n                    { value: 'date', label: 'Date', icon: 'schedule' },\n                    { value: 'title', label: 'Name', icon: 'sort_by_alpha' },\n                    { value: 'size', label: 'Size', icon: 'data_usage' },\n                    { value: 'type', label: 'Type', icon: 'category' },\n                  ]\"\n                  :key=\"option.value\"\n                  @click=\"sortBy = option.value\"\n                  :class=\"[\n                    'flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-md transition-colors',\n                    sortBy === option.value\n                      ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                      : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n                  ]\"\n                >\n                  <AppIcon :icon=\"option.icon\" class=\"text-sm\" />\n                  {{ __(option.label, 'uixpress') }}\n                </button>\n              </div>\n            </div>\n\n            <!-- Date Filter -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Date Range', 'uixpress') }}\n              </label>\n              <div class=\"grid grid-cols-3 gap-1.5\">\n                <button\n                  v-for=\"option in [\n                    { value: 'all', label: 'All' },\n                    { value: 'today', label: 'Today' },\n                    { value: 'week', label: 'Week' },\n                    { value: 'month', label: 'Month' },\n                    { value: 'year', label: 'Year' },\n                  ]\"\n                  :key=\"option.value\"\n                  @click=\"dateFilter = option.value\"\n                  :class=\"[\n                    'px-3 py-2 text-xs font-medium rounded-md transition-colors',\n                    dateFilter === option.value\n                      ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                      : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n                  ]\"\n                >\n                  {{ __(option.label, 'uixpress') }}\n                </button>\n              </div>\n            </div>\n\n            <!-- Tag Filter -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Tags', 'uixpress') }}\n              </label>\n              <div class=\"max-h-48 overflow-y-auto\">\n                <div class=\"flex flex-wrap gap-1.5\">\n                  <button\n                    v-for=\"tag in allTags\"\n                    :key=\"tag.id\"\n                    @click=\"toggleTag(tag.id)\"\n                    :class=\"[\n                      'inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-colors whitespace-nowrap',\n                      isTagSelected(tag.id)\n                        ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                        : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n                    ]\"\n                  >\n                    <span>{{ tag.name }}</span>\n                    <span class=\"text-[10px] opacity-70\"\n                      >({{ tag.count }})</span\n                    >\n                    <AppIcon\n                      v-if=\"isTagSelected(tag.id)\"\n                      icon=\"check\"\n                      class=\"text-xs\"\n                    />\n                  </button>\n                </div>\n                <p\n                  v-if=\"allTags.length === 0\"\n                  class=\"text-xs text-zinc-500 dark:text-zinc-400 px-3 py-2 mt-2\"\n                >\n                  {{ __('No tags available', 'uixpress') }}\n                </p>\n              </div>\n            </div>\n\n            <!-- Per Page -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Items Per Page', 'uixpress') }}\n              </label>\n              <Select\n                v-model=\"pagination.per_page\"\n                :options=\"[\n                  { value: 10, label: '10' },\n                  { value: 20, label: '20' },\n                  { value: 30, label: '30' },\n                  { value: 50, label: '50' },\n                  { value: 100, label: '100' },\n                ]\"\n                class=\"text-xs py-2\"\n              />\n            </div>\n\n            <!-- Additional Filters -->\n            <div>\n              <label\n                class=\"block text-[10px] uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 mb-1.5\"\n              >\n                {{ __('Options', 'uixpress') }}\n              </label>\n              <button\n                @click=\"showUnusedOnly = !showUnusedOnly\"\n                :class=\"[\n                  'w-full flex items-center justify-between px-3 py-2 text-xs font-medium rounded-md transition-colors',\n                  showUnusedOnly\n                    ? 'bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900'\n                    : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700',\n                ]\"\n              >\n                <span class=\"flex items-center gap-2\">\n                  <AppIcon icon=\"block\" class=\"text-sm\" />\n                  {{ __('Unused Media Only', 'uixpress') }}\n                </span>\n                <AppIcon v-if=\"showUnusedOnly\" icon=\"check\" class=\"text-sm\" />\n              </button>\n            </div>\n\n            <!-- Clear Filters -->\n            <button\n              v-if=\"activeFiltersCount > 0\"\n              @click=\"clearFilters\"\n              class=\"w-full px-3 py-2 text-xs font-medium text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors\"\n            >\n              {{ __('Clear All Filters', 'uixpress') }}\n            </button>\n          </div>\n        </transition>\n      </div>\n\n      <!-- Results Count -->\n      <div class=\"flex flex-row place-content-between items-center px-6 pr-4\">\n        <div\n          class=\"py-2 text-[10px] uppercase tracking-wider font-semibold text-zinc-400 dark:text-zinc-500\"\n        >\n          {{ pagination.total }}\n          {{\n            pagination.total === 1\n              ? __('item', 'uixpress')\n              : __('items', 'uixpress')\n          }}\n        </div>\n\n        <div class=\"flex flex-row items-center\">\n          <div class=\"text-xs text-zinc-500 dark:text-zinc-500 mr-2\">\n            {{ __('Page', 'uixpress') }} {{ pagination.page }}\n            <span v-if=\"pagination.totalPages > 0\">\n              / {{ pagination.totalPages }}\n            </span>\n          </div>\n          <AppButton\n            type=\"transparent\"\n            :disabled=\"!canGoPrev\"\n            @click=\"goPrevPage\"\n            :aria-disabled=\"!canGoPrev\"\n            :title=\"__('Previous', 'uixpress')\"\n          >\n            <AppIcon icon=\"chevron_left\" />\n          </AppButton>\n          <AppButton\n            type=\"transparent\"\n            :disabled=\"!canGoNext\"\n            @click=\"goNextPage\"\n            :aria-disabled=\"!canGoNext\"\n            :title=\"__('Next', 'uixpress')\"\n          >\n            <AppIcon icon=\"chevron_right\" />\n          </AppButton>\n        </div>\n      </div>\n\n      <!-- Media List -->\n      <div\n        class=\"flex-1 overflow-auto px-6 pb-6 custom-scrollbar relative\"\n        @dragenter=\"handleDragEnter\"\n        @dragover=\"handleDragOver\"\n        @dragleave=\"handleDragLeave\"\n        @drop=\"handleDrop\"\n        :class=\"[\n          dragOver\n            ? 'bg-zinc-50 dark:bg-zinc-900/50 border-2 border-dashed border-zinc-300 dark:border-zinc-600'\n            : '',\n        ]\"\n      >\n        <!-- Drag Overlay -->\n        <Transition\n          enter-active-class=\"transition-all duration-200 ease-out\"\n          enter-from-class=\"opacity-0\"\n          enter-to-class=\"opacity-100\"\n          leave-active-class=\"transition-all duration-200 ease-in\"\n          leave-from-class=\"opacity-100\"\n          leave-to-class=\"opacity-0\"\n        >\n          <div\n            v-if=\"dragOver\"\n            class=\"absolute inset-0 bg-zinc-900/80 dark:bg-zinc-950/80 flex items-center justify-center z-50 rounded-lg\"\n          >\n            <div class=\"text-center text-white\">\n              <AppIcon icon=\"cloud_upload\" class=\"text-6xl mb-4 mx-auto\" />\n              <p class=\"text-xl font-medium\">\n                {{ __('Drop files to upload', 'uixpress') }}\n              </p>\n              <p class=\"text-sm text-zinc-300 mt-2\">\n                {{ __('Release to start uploading', 'uixpress') }}\n              </p>\n            </div>\n          </div>\n        </Transition>\n\n        <div v-if=\"loading && !mediaItems.length\" class=\"p-8 text-center\">\n          <div\n            class=\"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3\"\n          >\n            <AppIcon icon=\"image\" class=\"text-zinc-400 text-xl animate-pulse\" />\n          </div>\n          <p class=\"text-sm text-zinc-500 dark:text-zinc-400\">\n            {{ __('Loading media...', 'uixpress') }}\n          </p>\n        </div>\n\n        <div v-else-if=\"filteredMedia.length === 0\" class=\"p-8 text-center\">\n          <div\n            class=\"w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3\"\n          >\n            <AppIcon icon=\"image\" class=\"text-zinc-400 text-xl\" />\n          </div>\n          <p class=\"text-sm text-zinc-500 dark:text-zinc-400 mb-2\">\n            {{\n              searchQuery || activeFiltersCount > 0\n                ? __('No media found', 'uixpress')\n                : __('No media files', 'uixpress')\n            }}\n          </p>\n          <button\n            v-if=\"activeFiltersCount > 0\"\n            @click=\"clearFilters\"\n            class=\"text-xs text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 underline\"\n          >\n            {{ __('Clear filters', 'uixpress') }}\n          </button>\n        </div>\n\n        <MediaList\n          v-else\n          :media=\"filteredMedia\"\n          :selected-media=\"selectedMedia\"\n          :view-mode=\"viewMode\"\n          @select-media=\"selectMediaItem\"\n          @toggle-selection=\"toggleMediaSelection\"\n          @delete=\"handleDelete\"\n        />\n      </div>\n\n      <!-- Hidden upload input -->\n      <input\n        ref=\"uploadInput\"\n        type=\"file\"\n        class=\"hidden\"\n        multiple\n        @change=\"onUploadChange\"\n        accept=\"image/*,video/*,audio/*,application/pdf\"\n      />\n    </div>\n\n    <!-- Right Content Area -->\n    <div\n      class=\"flex-1 flex flex-col rounded-3xl bg-white dark:bg-zinc-800/30 border border-zinc-200/40 dark:border-zinc-700/30 h-full max-h-full overflow-auto\"\n    >\n      <RouterView key=\"media-details-content\" v-slot=\"{ Component }\">\n        <div class=\"flex-1 flex items-center justify-center\" v-if=\"!Component\">\n          <div class=\"text-center\">\n            <div\n              class=\"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mx-auto mb-4\"\n            >\n              <AppIcon icon=\"image\" class=\"text-2xl text-zinc-400\" />\n            </div>\n            <h3\n              class=\"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2\"\n            >\n              {{ __('Media Details', 'uixpress') }}\n            </h3>\n            <p class=\"text-sm text-zinc-500 dark:text-zinc-400 mb-4\">\n              {{\n                __(\n                  'Select a media file from the list to view details and edit properties.',\n                  'uixpress'\n                )\n              }}\n            </p>\n          </div>\n        </div>\n\n        <component\n          :is=\"Component\"\n          v-else-if=\"Component && windowWidthComputed > 1024\"\n        />\n\n        <Drawer\n          v-else-if=\"Component && windowWidthComputed <= 1024\"\n          v-model=\"drawerOpen\"\n          size=\"full\"\n          :show-header=\"false\"\n          :show-close-button=\"false\"\n          :close-on-overlay-click=\"true\"\n          :close-on-escape=\"true\"\n          @close=\"router.push('/')\"\n        >\n          <component :is=\"Component\" />\n        </Drawer>\n      </RouterView>\n    </div>\n\n    <!-- Floating Action Panel -->\n    <Transition\n      enter-active-class=\"transition-all duration-300 ease-out\"\n      enter-from-class=\"opacity-0 translate-y-4\"\n      enter-to-class=\"opacity-100 translate-y-0\"\n      leave-active-class=\"transition-all duration-300 ease-in\"\n      leave-from-class=\"opacity-100 translate-y-0\"\n      leave-to-class=\"opacity-0 translate-y-4\"\n    >\n      <div\n        v-if=\"hasSelection\"\n        class=\"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl shadow-lg px-4 py-3 flex items-center gap-4\"\n      >\n        <!-- Selection Count -->\n        <div\n          class=\"text-sm font-medium text-zinc-700 dark:text-zinc-300 whitespace-nowrap\"\n        >\n          {{ selectedCountText }}\n        </div>\n\n        <!-- Divider -->\n        <div class=\"h-6 w-px bg-zinc-200 dark:bg-zinc-700\"></div>\n\n        <!-- Action Buttons -->\n        <div class=\"flex items-center gap-2\">\n          <!-- View Button -->\n          <button\n            @click=\"viewSelectedMedia\"\n            class=\"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100\"\n            :title=\"__('View', 'uixpress')\"\n          >\n            <AppIcon icon=\"visibility\" class=\"text-lg\" />\n          </button>\n\n          <!-- Bulk Edit Button -->\n          <button\n            @click=\"openBulkEdit\"\n            class=\"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100\"\n            :title=\"__('Bulk Edit', 'uixpress')\"\n          >\n            <AppIcon icon=\"edit\" class=\"text-lg\" />\n          </button>\n\n          <!-- Download Button -->\n          <button\n            @click=\"bulkDownload\"\n            :disabled=\"isDownloading\"\n            class=\"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n            :title=\"__('Download', 'uixpress')\"\n          >\n            <AppIcon\n              :icon=\"isDownloading ? 'hourglass_empty' : 'download'\"\n              class=\"text-lg\"\n            />\n          </button>\n\n          <!-- Duplicate Button -->\n          <button\n            @click=\"batchDuplicateMedia\"\n            :disabled=\"isDuplicating\"\n            class=\"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n            :title=\"__('Duplicate', 'uixpress')\"\n          >\n            <AppIcon\n              :icon=\"isDuplicating ? 'hourglass_empty' : 'content_copy'\"\n              class=\"text-lg\"\n            />\n          </button>\n\n          <!-- Delete Button -->\n          <button\n            @click=\"handleBatchDelete\"\n            class=\"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300\"\n            :title=\"__('Delete', 'uixpress')\"\n          >\n            <AppIcon icon=\"delete\" class=\"text-lg\" />\n          </button>\n\n          <!-- Clear Selection Button -->\n          <button\n            @click=\"clearSelection\"\n            class=\"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300\"\n            :title=\"__('Clear selection', 'uixpress')\"\n          >\n            <AppIcon icon=\"close\" class=\"text-lg\" />\n          </button>\n        </div>\n      </div>\n    </Transition>\n\n    <!-- Confirm Dialog -->\n    <Confirm ref=\"confirmDialog\" />\n\n    <!-- Bulk Edit Drawer -->\n    <Drawer\n      v-model=\"bulkEditDrawerOpen\"\n      size=\"md\"\n      :show-header=\"true\"\n      :show-close-button=\"true\"\n    >\n      <template #header>\n        <div class=\"flex items-center gap-2\">\n          <AppIcon icon=\"edit\" class=\"text-lg\" />\n          <h2 class=\"text-lg font-semibold\">\n            {{ __('Bulk Edit Media', 'uixpress') }}\n          </h2>\n        </div>\n      </template>\n\n      <div class=\"space-y-6 p-6\">\n        <div>\n          <p class=\"text-sm text-zinc-600 dark:text-zinc-400 mb-4\">\n            {{\n              selectedMedia.length === 1\n                ? __(\n                    'Editing 1 item. Leave fields empty to keep existing values.',\n                    'uixpress'\n                  )\n                : __(\n                    'Editing %d items. Leave fields empty to keep existing values.',\n                    'uixpress'\n                  ).replace('%d', selectedMedia.length)\n            }}\n          </p>\n        </div>\n\n        <!-- Title -->\n        <div>\n          <label\n            class=\"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2\"\n          >\n            {{ __('Title', 'uixpress') }}\n          </label>\n          <AppInput\n            v-model=\"bulkEditForm.title\"\n            :placeholder=\"__('Leave empty to keep existing', 'uixpress')\"\n          />\n        </div>\n\n        <!-- Alt Text -->\n        <div>\n          <label\n            class=\"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2\"\n          >\n            {{ __('Alt Text', 'uixpress') }}\n          </label>\n          <AppInput\n            v-model=\"bulkEditForm.alt_text\"\n            :placeholder=\"__('Leave empty to keep existing', 'uixpress')\"\n          />\n        </div>\n\n        <!-- Caption -->\n        <div>\n          <label\n            class=\"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2\"\n          >\n            {{ __('Caption', 'uixpress') }}\n          </label>\n          <AppTextArea\n            v-model=\"bulkEditForm.caption\"\n            :placeholder=\"__('Leave empty to keep existing', 'uixpress')\"\n            rows=\"3\"\n          />\n        </div>\n\n        <!-- Description -->\n        <div>\n          <label\n            class=\"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2\"\n          >\n            {{ __('Description', 'uixpress') }}\n          </label>\n          <AppTextArea\n            v-model=\"bulkEditForm.description\"\n            :placeholder=\"__('Leave empty to keep existing', 'uixpress')\"\n            rows=\"4\"\n          />\n        </div>\n\n        <!-- Actions -->\n        <div\n          class=\"flex items-center gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700\"\n        >\n          <AppButton\n            @click=\"bulkEditDrawerOpen = false\"\n            type=\"default\"\n            class=\"flex-1\"\n          >\n            {{ __('Cancel', 'uixpress') }}\n          </AppButton>\n          <AppButton\n            @click=\"saveBulkEdit\"\n            type=\"primary\"\n            :loading=\"isBulkEditing\"\n            class=\"flex-1\"\n          >\n            {{ __('Save Changes', 'uixpress') }}\n          </AppButton>\n        </div>\n      </div>\n    </Drawer>\n  </div>\n</template>\n\n<style scoped>\n.hide-scrollbar {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n.hide-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n\n/* Modern scrollbar styling */\n.custom-scrollbar {\n  scrollbar-width: thin;\n  scrollbar-color: rgb(161 161 170 / 0.5) transparent;\n}\n\n.custom-scrollbar::-webkit-scrollbar {\n  width: 8px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-track {\n  background: transparent;\n  border-radius: 4px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb {\n  background: rgb(161 161 170 / 0.5);\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb:hover {\n  background: rgb(161 161 170 / 0.8);\n}\n\n/* Dark mode scrollbar */\n.dark .custom-scrollbar {\n  scrollbar-color: rgb(113 113 122 / 0.5) transparent;\n}\n\n.dark .custom-scrollbar::-webkit-scrollbar-thumb {\n  background: rgb(113 113 122 / 0.5);\n}\n\n.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n  background: rgb(113 113 122 / 0.8);\n}\n</style>\n\n<style>\n#wpbody,\n#wpcontent {\n  padding: 0 !important;\n}\n\nhtml {\n  --uixp-body-height: calc(100vh - var(--uixp-toolbar-height) - 1rem);\n}\n</style>\n","<script setup>\nimport MediaListView from './media-list-view.vue';\n</script>\n\n<template>\n  <MediaListView />\n</template>\n","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport { createWebHashHistory, createRouter } from 'vue-router';\nimport '@/apps/css/media.css';\n\n// Import store\nimport { useAppStore } from '@/store/app/app.js';\nimport { setGlobalProperties, setVueGlobalProperties } from '@/setup/setGlobalProperties.js';\n\n// Import comps\nimport AppWrapper from '@/pages/media/index.vue';\nimport MediaLayout from '@/pages/media/src/layout.vue';\n\n// Build app\nconst app = createApp(AppWrapper);\n\n// Use pinia\nconst pinia = createPinia();\napp.use(pinia);\n\n// Update app store\nconst appStore = useAppStore();\nsetGlobalProperties(appStore);\n\n// Declare translation functions\nsetVueGlobalProperties(app);\n\n// Routes\nconst routes = [\n  {\n    path: '/',\n    component: MediaLayout,\n    name: 'media-library',\n    meta: { name: __('Media Library', 'uixpress') },\n    children: [\n      {\n        path: '/details/:mediaId',\n        component: () => import('@/pages/media/src/media-details-view.vue'),\n        name: 'media-details',\n        meta: { name: __('Media Details', 'uixpress') },\n      },\n      {\n        path: '/edit/:mediaId',\n        component: () => import('@/pages/media/src/media-edit-view.vue'),\n        name: 'media-edit',\n        meta: { name: __('Edit Image', 'uixpress') },\n      },\n    ],\n  },\n];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\napp.use(router);\n\napp.mount('#uix-media-page');\n"],"file":"media.build.-0uB8UKL.js"}